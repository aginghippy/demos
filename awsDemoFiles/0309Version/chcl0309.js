"use strict";
!function(D){function L(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function");}var M=function(){return function(d,a){var b;if(b=a){b=d.prototype;for(var e=0;e<a.length;e++){var f=a[e];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}b=void 0}return b}}(),fa=function(){function g(a){var b;return L(this,g),this.csoObj=a||[],this.config=$.extend({},window.Chalakh["static"]),this.bubbleTypes={},this.messages=document.createElement("div"),
    $(this.messages).addClass(this.config.messageStreamClass),this.responses=document.createElement("div"),$(this.responses).addClass(this.config.responseStreamClass),this.botContainerDiv=document.createElement("div"),$(this.botContainerDiv).addClass(this.config.botContainerClass),document.body.appendChild(this.botContainerDiv),this.createHeader(this,this.botContainerDiv),b=document.createElement("div"),this.conversationStream=b,this.botContainerDiv.appendChild(this.conversationStream),$(this.conversationStream).addClass(this.config.conversationStreamClass),
    this.conversationStream.appendChild(this.messages),this.conversationStream.appendChild(this.responses),this.createExitModal(this,this.botContainerDiv),this.createErrorMessageModal(this,this.botContainerDiv),this.createConversionModal(this,this.botContainerDiv),this.createLeadConnectionModal(this,this.botContainerDiv),this.createVideoModal(this,this.botContainerDiv),this.createAudioModal(this,this.botContainerDiv),this.createCpatchAudioObject(this,this.botContainerDiv),this}return M(g,[{key:"createHeader",
    value:function(a,b){a.header=document.createElement("div");$(a.header).addClass(a.config.headerClass);a.header.setAttribute("id","header");b.appendChild(a.header);this.hideHeader();var e='<div class="cui__header__items"><div class="cui__sound__icon" id="toggleCpatchSound"><a class="sound__icon__image" href="#"><img id ="sound__image" src="https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/soundIcon.jpg" class = "img-fluid" width="30" height="30" alt=""></a></div><div class="cui__close__button active"><button class="btn btn-outline-success close__button" id="closeBot" type="button">X</button></div>';
      e+"</div>";a.header.innerHTML=e;document.getElementById("toggleCpatchSound").addEventListener("click",function(b){void 0==b&&b==window.event;b.stopPropagation();console.log("toggling icon "+c.muteAudio);a.toggleCpatchSound(b)});document.getElementById("closeBot").addEventListener("click",function(b){void 0==b&&b==window.event;b.stopPropagation();a.exitBot(b,"navbar")})}},{key:"addHeaderTitle",value:function(){function a(){var a=document.createElement("div");$(a).addClass("navbar-skip-button");a.innerHTML=
      '<div class="nav-item active mr-auto"><button class="btn btn-outline-success pr-4" id="skipTheme" type="button">Skip</button></div>';return a}var b=$("#header");var e=function(){a:{try{var a=x[c.chrIDObject.chrIndex].c_r_m.clientName;break a}catch(r){d.handleError("err_1a")}a=void 0}var b=document.createElement("div");$(b).addClass("cui__campaign__title");b.innerHTML='<div id ="campaignTitle" class="active">'+a+"</div>";return b}();$("#header .cui__header__items .cui__sound__icon").after(e);if(e=
      function(){var a=c.chrIDObject.chrIndex;try{return"simple"==x[a].c_r_m.type?!1:!0}catch(m){d.handleError("err_1b")}}()){var f=a();$("#header .cui__header__items .cui__campaign__title").after(f)}b.innerHTML="undefined</div>";e&&document.getElementById("skipTheme").addEventListener("click",function(a){void 0==a&&a==window.event;a.stopPropagation();g.skipCurrentTheme(a,"navbar")})}},{key:"handleError",value:function(a){u.sendErrorCode(c.currentNodeID,a,void 0==c.chrIDObject?void 0:c.chrIDObject.chrID);
      console.log(a);if(k.debugMode){var b=d.findErrorOrAlertorWarningString(a);alert(a+" : "+b+" "+c.currentNodeID);debugger}d.gracefulErrorExit()}},{key:"logConversationFlowAlerts",value:function(a){console.log(a);if(k.debugMode){var b=d.findErrorOrAlertorWarningString(a);console.log(a+" : "+b+" "+c.currentNodeID)}}},{key:"logWarning",value:function(a){console.log(a);if(k.debugMode){var b=d.findErrorOrAlertorWarningString(a);alert(a+" : "+b+" "+c.currentNodeID)}}},{key:"findErrorOrAlertorWarningString",
    value:function(a){var b;ca.forEach(function(e,f){for(var d in e)d==a&&(b=e[a])});return b}},{key:"displayNode",value:function(a,b,e,f){function h(a){var b=0;try{for(var e=0;e<a.length;e++){var f=a[e][1].da_meob;1==f.da_disob&&(b+=1)}}catch(X){d.handleError("err_3")}return 2<=b||1==b&&null==c.mainMotifThemeBeingShown?!1:!0}function m(){var a=C.findExitThemeName();a=C.findExitTheme(a);try{d.findThemeNodes("cso_int",Q,a);var b=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var e=Q[b]}catch(ua){d.handleError("err_4")}if(null!=
    e)return u.sendExitData(e._nid,c.chrIDObject.chrID,"botExit","botGenerated"),d.displayNode(e,!1,"forward",!0),!0;d.handleError("err_4")}function g(){var a;try{if(1==c.checkCxTrigger&&"proactiveExitMode"!=c.botState){if(a=d.checkCxTriggerAndDisplay())return!0}else c.checkCxTrigger=!0}catch(P){d.handleError("err_2")}}var l;if(!f||d.findMsgObject(a,b,e)){try{var q=d.findRespObject(a);var p=c.chrIDObject.chrIndex;var y=q.pr_obj.p_rdo;var v=q.qr_obj.qr_dobj;var w=q.pr_obj.p_mo;var K=q.qr_obj.qr_mobj;var G=
      w.p_rdc;var H=w.p_rdsc;var z=K.qr_dsc}catch(F){d.handleError("err_5")}c.messageTimeout=0;c.displayMsgTimeOutCount=0;c.timeouts=[];c.currentNodeID=a._nid;c.loadCpatchMediaCounter=0;try{u.cookieNodeImpressionCount(),u.sendNodeImpression(a._nid,a.nmobj.nodcat,c.chrIDObject.chrID)}catch(F){d.handleError("err_5A")}try{if("bot"==x[p].c_r_m.c_r_ge.c_r_pe&&"interestNode"==a.nmobj.nodcat)try{if(l=h(y))m(),d.hideChalakhIframe()}catch(F){d.handleError("err_6")}}catch(F){d.handleError("err_2a")}if("proactiveRestartMode"==
    c.botState||"proactiveFreshStartMode"==c.botState)var ea=g();if(!ea)try{d.recordDisplayedNodeInTheme(a,e),d.playCpatchAudio(),d.displayMsgObject(a,b,e),d.displayRespObjectAfterTimeOut(a,y,v,G,H,z)}catch(F){d.handleError("err_1")}}}},{key:"recordDisplayedNodeInTheme",value:function(a,b){var e;a:{try{var f=a.nmobj.nconth}catch(l){d.handleError("err_7a")}for(e=0;e<f.length;e++)if(f[e].th_m==c.currentTheme){f=!0;break a}f=!1}if(f)if("forward"==b){f=a._nid;var h=c.currentMotif;var m=c.currentTheme;var g=
      c.currentNode;e=a.nmobj.nodcat;f={motif:h,_nid:f,index:g,theme:m,nodcat:e};c.displayedThemeNodes.push(f)}else"backward"==b?c.displayedThemeNodes.pop():d.handleError("err_1A")}},{key:"findRespObject",value:function(a){try{if("staticContent"==a.nmobj.nprdac||"searchContent"==a.nmobj.nprdac)return a.rs_obj;if("dynamicResponse"==a.nmobj.nprdac){var b=a._nid;for(var e=0;e<U.length;e++)if(b==U[e]._nid){a.rs_obj=U[e].rs_obj;"staticContent"==a.nmobj.nprdac;break}return a.rs_obj}d.handleError("err_7b")}catch(f){d.handleError("err_7")}d.handleError("err_7b")}},
    {key:"findMsgObject",value:function(a,b,e){try{if("staticContent"==a.nmobj.nprdac||"dynamicResponse"==a.nmobj.nprdac)return!0;if("searchContent"==a.nmobj.nprdac)return O.getSearchContent(a,b,e),!1;d.handleError("err_7e")}catch(f){d.handleError("err_7")}d.handleError("err_7b")}},{key:"checkNodeToShowObj",value:function(a){Array.isArray(a)&&d.handleError("err_8")}},{key:"scrollAndDisplayRespObject",value:function(a,b,e,f,h,m){var g=setTimeout(function(){d.scrollIntoView();d.showBorderToMessageStream();
        d.displayRespObject(a,b,e,f,h,m)},k.delayBetweenMessagesAndResponse);c.timeouts.push(g)}},{key:"terminateConversationRightNow",value:function(){d.emptyMessageStream();d.emptyResponseStream();d.hideHeader();d.hideConversationStream();d.hideChalakhIframe()}},{key:"pauseAndThenTerminateChat",value:function(){setTimeout(function(){d.emptyMessageStream();d.emptyResponseStream();d.hideHeader();d.hideConversationStream();d.hideChalakhIframe()},k.delayBetweenMessagesAndResponse)}},{key:"displayNextNodeOrTerminate",
      value:function(){var a=setTimeout(function(){"proactiveExitMode"==c.botState?d.pauseAndThenTerminateChat():d.findAnddisplaySubsequentNodeObjInTheme("nextNodeInTheme",!1)},k.delayBetweenNodes);c.timeouts.push(a)}},{key:"terminateBotSession",value:function(a){setTimeout(function(){d.hideChalakhIframe();d.emptyMessageStream();d.hideBorderToMessageStream();d.emptyResponseStream();d.hideHeader();d.hideConversationStream();var b=d.getCurrentNodeSkipType(a),e=d.getCurrentNodeSkipLogic(a);"end"!=b?d.logWarning("warn_9A"):
      void 0!=e&&0!=e.length&&(b=e[0].skipTo,"undefined"!=b&&window.open(b,"_top"))},k.delayBeforeBotTerminating)}},{key:"displayRespObjectAfterTimeOut",value:function(a,b,e,f,h,m){var g;try{var l=b.length;var q=e.length;0<l||0<q?g=!0:g=!1}catch(v){d.handleError("err_9")}try{var p=a.ms_obj.conobj.conmobj.cdc;var y=setInterval(function(){if(0==c.displayMsgTimeOutCount)if(clearInterval(y),g)d.scrollAndDisplayRespObject(a,b,e,f,h,m);else if(null!=c.nextNode){var r=d.getNodeCat(a);"terminate"==p?d.terminateBotSession(a):
      "iconNode"!=r&&d.displayNextNodeOrTerminate()}else"passiveExitMode"!=c.botState&&"passiveRestartMode"!=c.botState&&"passiveFreshStartMode"!=c.botState&&"hybridFreshStartMode"!=c.botState&&d.terminateBotSession(a)},k.patchMsgRespSyncIntervalCheck)}catch(v){d.handleError("err_9")}}},{key:"getVisitorCultivationLevel",value:function(){try{var a=c.chrIDObject.chrIndex;var b=x[a].c_r_m.c_r_ge.c_r_vcul;var e=b.split(":")}catch(h){d.handleError("err_10")}if(void 0!=e)if("TH"==e[1])if("SE"==e[2]){a=k.themeImpSessCnt;
        var f=Number(sessionStorage.getItem(a))-1}else a=k.themeImpCumCnt,f=Number(u.getItem(a))-1;else"SE"==e[2]?(a=k.nodeImpSessCnt,f=Number(sessionStorage.getItem(a))-1):(a=k.nodeImpCumCnt,f=Number(u.getItem(a))-1);else d.handleError("err_10a");return f}},{key:"getConversionProbePersistenceLevel",value:function(){try{var a=c.chrIDObject.chrIndex;var b=x[a].c_r_m.c_r_ge.c_r_cxperl;var e=b.split(":")}catch(h){d.handleError("err_11")}if(void 0!=e)if("SE"==e[1]){a=k.cxSessAttemts;var f=Number(sessionStorage.getItem(a))}else a=
        k.cxCumAttemts,f=Number(u.getItem(a));else d.handleError("err_11a");return f}},{key:"recordConversionAttempt",value:function(a,b,e){u.cookieConversionAttemptCount();u.sendConversionData(a,b,"conversionEvent","cxAttempt",e);u.setItem(k.nodeImpCumCnt,0,k.mediumExpirationPeriod,k.cookiePath);sessionStorage.setItem(k.nodeImpSessCnt,0);u.setItem(k.themeImpCumCnt,0,k.mediumExpirationPeriod,k.cookiePath);sessionStorage.setItem(k.themeImpSessCnt,0)}},{key:"checkCxTriggerAndDisplay",value:function(){if(1==
      c.campaignGoalAchieved||1==u.getItem(k.goalStatus))return null;try{var a=c.chrIDObject.chrIndex;var b=x[a].c_r_m.c_r_ge.c_r_vcul;var e=x[a].c_r_m.c_r_ge.c_r_cxperl;var f=b.split(":");var h=e.split(":")}catch(q){d.handleError("err_12")}e=d.getVisitorCultivationLevel();b=d.getConversionProbePersistenceLevel();try{if(!(null==e||e<f[0])&&(null==b||b<h[0])){a:{var m;try{if(0==x[a].c_r_m.cso_con.length){var g=null;break a}var l=x[a].c_r_m.cso_con[0].th_m;g=m=d.findAllThemeNodesInMotif("cso_con",I,l,!1);
        break a}catch(q){d.handleError("err_13")}g=void 0}if(null!=g)return c.checkCxTrigger=!1,d.recordConversionAttempt(g._nid,c.chrIDObject.chrID,g),d.unhideHeader(),d.displayNode(g,!1,"forward",!0),!0;d.logWarning("warn_2")}}catch(q){d.handleError("err_13a")}return null}},{key:"displayMsgObject",value:function(a,b,e){try{"iconNode"!=a.nmobj.nodcat&&d.displayPatchObj(a)}catch(h){d.handleError("err_14")}try{var f=setInterval(function(){0==c.displayMsgTimeOutCount&&(clearInterval(f),d.displayContentObj(a,
      b,e))},k.patchMsgRespSyncIntervalCheck)}catch(h){d.handleError("err_15")}}},{key:"displayPatchObj",value:function(a){function b(){try{f=a.ms_obj.cpatch,f.forEach(function(a,b){for(var e in a)null!=a[e]&&(h=d.createTextObjFromPatches(e,a[e]),c.push(h))})}catch(y){d.handleError("err_33")}}function e(){try{for(var a=0;a<c.length;a++)c[a].reduce(function(a,b,e){g=0===e?0:a;for(var f=0;f<b.length;f++)$.each(b[f],function(a,e){"da_ddf"==a&&$.each(b[f].da_ddf.text,function(a,b){q=b;p={text:q};l=d.displayMsgContent(p,
      "text")})});return g+l},0)}catch(v){d.handleError("err_34")}}var f,h,c=[],g,l,q,p;try{b(),e()}catch(y){d.handleError("err_16")}}},{key:"findPatchObjString",value:function(a){var b,e=[];try{var f=a.ms_obj.cpatch;f.forEach(function(a,f){for(var h in a)null!=a[h]&&(b=d.createTextObjFromPatches(h,a[h]),e.push(b))})}catch(h){d.handleError("err_17")}try{return e[0][0][0].da_ddf.text}catch(h){d.handleError("err_18")}}},{key:"keepOnlySelectedSegmentDataInCDO",value:function(a){function b(a){try{a.forEach(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     b){a.forEach(function(a,b){$.each(a,function(a,b){"da_meob"==a&&(m=b,m.da_disob=!1)})})})}catch(y){d.handleError("err_20")}}function e(a,b,e){try{a.forEach(function(a,f){for(var d=a[1].da_meob,h=d.da_obseg,c,m=[],g=0;g<h.length;g++){var l=h[g].da_ob_skey,r=h[g].da_ob_sval;if(l==e||"all"==l)for(var q=0;q<r.length;q++)c=l+"-"+r[q],m.push(c)}for(h=0;h<m.length;h++){var p=!1;if("all-all"==m[h]||m[h]==b){p=!0;break}}p&&(d.da_disob=!0)})}catch(w){d.handleError("err_19")}}function f(a){b(a);try{for(var f=
        0;f<g.length;f++)for(var h=g[f],c=0;c<l.length;c++)e(a,l[c],h)}catch(K){d.handleError("err_19a")}return a}function h(a){try{for(var f=a,h=0;h<f.length;h++){a=f[h];b(a);for(var c=0;c<g.length;c++){var m=g[c];for(h=0;h<l.length;h++)e(a,l[h],m)}}return f}catch(G){d.handleError("err_19b")}}var m;var g=function(){var a=[];if(0==c.segmentSelectionArrayOfArrays.length)return null;try{for(var b=0;b<c.segmentSelectionArrayOfArrays.length;b++){var e=c.segmentSelectionArrayOfArrays[b][0].split("-");a.push(e[0])}return a}catch(w){d.handleError("err_20")}}();
        var l=function(){if(0==c.segmentSelectionArrayOfArrays.length)return null;var a=c.segmentSelectionArrayOfArrays[0];try{for(var b=1;b<c.segmentSelectionArrayOfArrays.length;b++)a=a.concat(c.segmentDimensionValueStringArray[b]);return a}catch(v){d.handleError("err_20")}}();if(null==l)return a;var q=void 0==a[0][0].length?"shallow":"deep";return a="shallow"==q?f(a):h(a)}},{key:"displayContentObj",value:function(a,b,e){try{var f=a.ms_obj.conobj.cdo.length,h=a.ms_obj.conobj.conmobj.cdc,m=a.ms_obj.conobj.conmobj.cdsc,
      g=a.ms_obj.conobj.cdo,l=a.nmobj.nodcat}catch(q){d.handleError("err_21")}if(0!=f){c.segmentNodeWasFound&&"contentNode"==l&&"forward"==e&&(g=d.keepOnlySelectedSegmentDataInCDO(g));switch(h){case "terminate":case "text":d.displayTextMsgObj(g);break;case "image":d.displayImageMsgObj(g,h,m,a);break;case "video":d.displayVideoMsgObj(g,h,m);break;case "audio":d.displayAudioMsgObj(g,h,m);break;case "audioVideo":d.displayAudioVideoMsgObj(g,h,m);break;case "tile":d.displayTileMsgObj(a,h,m);break;case "bullet":d.displayBulletMsgObj(a,
      h,m);break;case "card":d.displayCardMsgObj(a,h,m);break;case "doc":d.displayDocMsgObj(g,h,m);break;default:d.logConversationFlowAlerts("err_21A")}d.scrollIntoView();d.showBorderToMessageStream()}else"icon"==h&&d.displayIconMsgObj(a,m)}},{key:"displayTextMsgObj",value:function(a,b){var e,f,h,c;try{a.reduce(function(a,b,m){f=0===m?0:a;for(var g=0;g<b.length;g++)$.each(b[g],function(a,f){"da_ddf"==a&&$.each(b[g].da_ddf.text,function(a,b){h=b;c={text:h};e=d.displayMsgContent(c,"text")})});return f+e},
      0)}catch(r){d.handleError("err_21B")}}},{key:"displayImageMsgObj",value:function(a,b,e,f){d.displayMsgContent(a,b,e,f)}},{key:"displayVideoMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"displayAudioMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"displayAudioVideoMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"displayDocMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"displayTileMsgObj",value:function(a,b,e){d.displayMsgContent(a,
      b,e)}},{key:"displayBulletMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"displayCardMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"displayDocMsgObj",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"showIconMsgObjToolTip",value:function(a,b,e){d.displayMsgContent(a,b,e)}},{key:"createIconSVGImg",value:function(){var a=document.createElementNS("https://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 40 40");a.setAttribute("width","45px");a.setAttribute("height",
      "45px");var b=document.createElementNS("https://www.w3.org/2000/svg","circle");b.setAttribute("cx","20");b.setAttribute("cy","20");b.setAttribute("r","15.91549430918954");b.setAttribute("fill","#0000FF");var e=document.createElementNS("https://www.w3.org/2000/svg","circle");e.setAttribute("cx","20");e.setAttribute("cy","20");e.setAttribute("r","15.91549430918954");e.setAttribute("fill","transparent");e.setAttribute("stroke","#d2d3d4");e.setAttribute("stroke-width","8");var f=document.createElementNS("https://www.w3.org/2000/svg",
      "circle");f.setAttribute("cx","20");f.setAttribute("cy","20");f.setAttribute("r","15.91549430918954");f.setAttribute("fill","transparent");f.setAttribute("stroke","#ff6666");f.setAttribute("stroke-width","3");a.appendChild(b);a.appendChild(e);a.appendChild(f);return a}},{key:"displayIconMsgObj",value:function(a,b){d.hideHeader();d.emptyMessageStream();d.emptyResponseStream();d.hideConversationStream();d.makeChalakhFrameNarrow();if(c.ChalakhIconCreated){console.log("icon already created");var e=d.findPatchObjString(a);
        c.chalakhToolTip.textContent=e}else{var f=document.createElement("div");var h=document.createElement("span");c.chalakhToolTip=h;h.id="tooltip";e=d.findPatchObjString(a);h.textContent=e;f.id="chalakhIcon";e=d.createIconSVGImg();f.appendChild(e);f.appendChild(h);$("body").append(f);c.ChalakhIconCreated=!0}setTimeout(function(){d.unhideChalakhIcon();1==k.alertUser&&(new Audio(k.beepSoundFile)).play()},k.chalakIconDisplayDelay);(function(){c.toolTipDisplayTimeout=setTimeout(function(){$("#tooltip").addClass("cui__display__tooltip");
        c.toolTipHideTimeout=setTimeout(function(){$("#tooltip").removeClass("cui__display__tooltip");"hybridFreshStartMode"==c.botState&&(c.hybridProactivTimeout=setTimeout(function(){c.initiationMode="PR-1";d.hideChalakhIcon();C.initiateProactiveFreshConversation(c.initiationMode)},k.chalakIconHybridProactiveDelay))},k.chalakIconToolTipHideDelay)},k.chalakIconToolTipDisplayDelay)})();$("#chalakhIcon").click(function(a){a.stopPropagation();clearTimeout(c.toolTipDisplayTimeout);d.processResponseClick(null,
      void 0,null,this,null,"iconNode")})}},{key:"displayMsgContent",value:function(a,b,e,f){var h=d.createMessageBubble(a,b,e,f);c.messageTimeout+=k.delayBetweenMessages;a=setTimeout(function(){d.displayMsgContentBubble(h,b,e);d.animateMessageBubble(h,void 0);--c.displayMsgTimeOutCount},c.messageTimeout);c.timeouts.push(a);c.displayMsgTimeOutCount+=1}},{key:"createMessageBubble",value:function(a,b,e,f){var h=this.bubbleTypes[b];try{if(h)return(new h(a)).render("msgObject",this,b,e,f);console.log("cdc is"+
      b);d.handleError("err_4")}catch(m){d.handleError("err_22")}}},{key:"addCardFlipHandler",value:function(a){function b(a){a.stopPropagation();0!=$(".cui__card__msg__body #cardCarouselControlID").length?$(".carousel-item.active > .card-flip").toggleClass("flipped"):$(".cui__card__msg__body > .card-flip").toggleClass("flipped")}function e(a){a.stopPropagation();$("#cardCarouselControlID .card-flip").removeClass("flipped")}if("c4"==a||"c2"==a)$(".cui__flip__front__card").click(b),$(".cui__flip__back__card").click(b),
        $("#cardCarouselControlID").on("slide.bs.carousel",e)}},{key:"addCarouselSwipeEventHandler",value:function(a){$(a).on("touchstart",function(a){var b=a.originalEvent.touches[0].pageX;$(this).one("touchmove",function(a){a=a.originalEvent.touches[0].pageX;5<Math.floor(b-a)?$(this).carousel("next"):-5>Math.floor(b-a)&&$(this).carousel("prev")});$(".carousel").on("touchend",function(){$(this).off("touchmove")})})}},{key:"cycleCarouselAndThenStop",value:function(a){$(a).on("slid.bs.carousel",function(b){b.stopPropagation();
        $(".carousel-item").length-1==b.to&&(c.carouselCycleCount+=1,c.carouselCycleCount==k.maxCarouselCycleCount&&($(a).carousel("pause"),setTimeout(function(){$(a).carousel(0)},k.carouselIntervalPeriod)))})}},{key:"displayMsgContentBubble",value:function(a,b,e){var f=document.createElement("div");switch(b){case "terminate":case "text":f.classList.add("cui__text__message");f.appendChild(a);this.messages.appendChild(f);break;case "image":f.classList.add("cui__image__message");$(f).addClass(e);f.appendChild(a);
        this.messages.appendChild(f);0!=$("#imageCarouselControlID").length&&($("#imageCarouselControlID").carousel({interval:k.carouselIntervalPeriod}),d.addCarouselSwipeEventHandler("#imageCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#imageCarouselControlID"));this.addImageEventHandlers();break;case "video":f.classList.add("cui__video__message");$(f).addClass(e);f.appendChild(a);this.messages.appendChild(f);this.addVideoEventHandlers();break;case "audio":f.classList.add("cui__audio__message");
        $(f).addClass(e);f.appendChild(a);this.messages.appendChild(f);this.addAudioEventHandlers();break;case "audioVideo":f.classList.add("cui__media__message");$(f).addClass(e);f.appendChild(a);this.messages.appendChild(f);0!=$("#mediaCarouselControlID").length&&($("#mediaCarouselControlID").carousel({interval:k.carouselIntervalPeriod}),d.addCarouselSwipeEventHandler("#mediaCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#mediaCarouselControlID"));this.addAudioEventHandlers();this.addVideoEventHandlers();
        break;case "card":f.classList.add("cui__card__message");$(f).addClass(e);f.appendChild(a);this.messages.appendChild(f);0!=$("#cardCarouselControlID").length&&($("#cardCarouselControlID").carousel({interval:k.carouselIntervalPeriod}),d.addCarouselSwipeEventHandler("#cardCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#cardCarouselControlID"));d.addCardFlipHandler(e);break;case "tile":f.classList.add("cui__tile__message");$(f).addClass(e);f.appendChild(a);this.messages.appendChild(f);
        0!=$("#tileCarouselControlID").length&&($("#tileCarouselControlID").carousel({interval:k.carouselIntervalPeriod}),d.addCarouselSwipeEventHandler("#tileCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#tileCarouselControlID"));if("t4"==e)$(".cui__tile__items").on("click",J.tileT4EventHandler);else"t5"==e&&($(".cui__short__list__icon").on("click",J.tileT5EventHandler),$("[data-toggle=tooltip]").tooltip());break;case "bullet":f.classList.add("cui__bullet__message");$(f).addClass(e);
        f.appendChild(a);this.messages.appendChild(f);0!=$("#bulletCarouselControlID").length&&($("#bulletCarouselControlID").carousel({interval:k.carouselIntervalPeriod}),d.addCarouselSwipeEventHandler("#bulletCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#bulletCarouselControlID"));break;case "doc":f.classList.add("cui__doc__message");$(f).addClass(e);f.appendChild(a);this.messages.appendChild(f);0!=$("#docCarouselControlID").length&&($("#docCarouselControlID").carousel({interval:k.carouselIntervalPeriod}),
        d.addCarouselSwipeEventHandler("#docCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#docCarouselControlID"));this.addDocEventHandlers();break;default:console.log("unknown message type in displayMsgContentBubble")}return a}},{key:"animateMessageBubble",value:function(a,b){var e=this;a.getBoundingClientRect();window.getComputedStyle(a).opacity;a.classList.add("cui__message__bubble--slideIn");var f=setTimeout(function(){var b=setTimeout(function(b){a.classList.remove("cui__message__bubble--typing");
        a.removeAttribute("style");e.scrollIntoView()},350);c.timeouts.push(b)},b);c.timeouts.push(f)}},{key:"addDocEventHandlers",value:function(){$(".cui__doc__container .btn").click(function(a){a.stopPropagation();a=$(this).attr("data-doc-src");"undefined"!=a?(d.recordMediaUsageData("doc",a),"Safari"==c.browser&&"mobile"==c.device?window.open(a,"_blank"):O.getDownloadFile(a)):d.logWarning("warn_9")})}},{key:"addVideoEventHandlers",value:function(){var a,b,e,f;$(".cui__video__descriptor").click(function(h){function m(){$("#cuiVideoModal").modal("show")}
        function g(){3<=c.videoMediaObject.readyState?(clearInterval(c.checkVideoFileReadyStatusInterval),c.checkVideoFileReadyStatusInterval=null,m(),console.log("video file now ready "),c.abortMediaPlay?console.log("video media play is aborted"):(B.mediaUnMute(c.videoMediaObject),B.mediaPlay(c.videoMediaObject,"video"))):(l+=1,l==k.audioVideoDownloadAttemptCount?(clearInterval(c.checkVideoFileReadyStatusInterval),$("#cui__video__object").attr("poster",""),c.checkVideoFileReadyStatusInterval=null,B.mediaStop(c.videoMediaObject),
          d.hideVideoModal(),d.showErrorPopUp(k.oopsCouldNotDownloadAVFile)):console.log(c.videoMediaObject.readyState,"video media play no ready"))}var l=0;c.loadMediaCounter=0;d.turnOnSoundIconInHeader();d.unhideVideoModal();h.stopPropagation();B.mediaStop(c.videoMediaObject,"video");B.mediaStop(c.cpatchAudioMediaObject);try{a=$(this).find(".cui__media__title").text(),b=$(this).find(".cui__media__subtitle").text(),e=$(this).find(".cui__video__media__file").attr("src"),f=a.substring(0,100),b.substring(0,100)}catch(q){d.handleError("err_24")}d.recordMediaUsageData("video",
        e);$("#cui__modal__title").children("h6").text(f+"..");try{$("#cui__video__object").children("source").attr("src",e),c.videoMediaObject=$("#cui__video__object")[0],0==c.loadMediaCounter&&(c.videoMediaObject.load(),c.loadMediaCounter+=1,console.log("load counter in modal click handler",c.loadMediaCounter))}catch(q){d.handleError("err_25")}m();4==c.videoMediaObject.readyState?(B.mediaUnMute(c.videoMediaObject),B.mediaPlay(c.videoMediaObject,"video")):(console.log("video file not loaded - using a set interval"),
        null==c.checkVideoFileReadyStatusInterval&&(c.checkVideoFileReadyStatusInterval=setInterval(g,250)));return!1});$("#cuiVideoModal").on("hide.bs.modal",function(){clearInterval(c.checkVideoFileReadyStatusInterval);c.checkVideoFileReadyStatusInterval=null;d.hideVideoModal();B.mediaStop(c.videoMediaObject)})}},{key:"addAudioEventHandlers",value:function(){var a,b,e,f,h,m,g;$(".cui__audio__descriptor").click(function(l){function r(){$("#cuiAudioModal").modal("show")}function p(){4==c.audioMediaObject.readyState?
      (clearInterval(c.checkAudioFileReadyStatusInterval),c.checkAudioFileReadyStatusInterval=null,d.hideDownloadGif(),r(),console.log("audio media play ready"),c.abortMediaPlay?console.log("audio media play is aborted"):B.mediaPlay(c.audioMediaObject,"audio")):(y+=1,y==k.audioVideoDownloadAttemptCount&&(clearInterval(c.checkVideoFileReadyStatusInterval),d.hideDownloadGif(),c.checkAudioFileReadyStatusInterval=null,B.mediaStop(c.audioMediaObject),d.hideAudioModal(),d.showErrorPopUp(k.oopsCouldNotDownloadAVFile)),
        console.log("audio media play not ready"))}var y=0;c.loadMediaCounter=0;d.hideDownloadGif();c.downloadGifDisplayTimeOut=setTimeout(function(){4!=c.audioMediaObject.readyState&&d.unhideDownloadGif()},k.delayBeforeDownloadGifIsShown);d.turnOnSoundIconInHeader();d.unhideAudioModal();l.stopPropagation();B.mediaStop(c.audioMediaObject,"audio");B.mediaStop(c.cpatchAudioMediaObject);try{a=$(this).find(".cui__media__title").text(),b=$(this).find(".cui__media__subtitle").text(),f=$(this).find(".cui__lhs__footer1").text(),
        h=$(this).find(".cui__lhs__footer2").text(),m=$(this).find(".cui__rhs__footer1").text(),g=$(this).find(".cui__rhs__footer2").text(),a.substring(0,100),b.substring(0,100),e=$(this).find(".cui__audio__media__file").attr("src")}catch(v){d.handleError("err_26")}d.recordMediaUsageData("audio",e);$(".cui__modal__title").text(a);$(".cui__modal__subtitle").text(b);$(".cui__modal__lhs__footer1").text(f);$(".cui__modal__lhs__footer2").text(h);$(".cui__modal__rhs__footer1").text(m);$(".cui__modal__rhs__footer2").text(g);
        try{$("#cui__audio__object").children("source").attr("src",e),c.audioMediaObject=$("#cui__audio__object")[0],0==c.loadMediaCounter&&(c.audioMediaObject.load(),c.loadMediaCounter+=1)}catch(v){d.handleError("err_27")}r();4==c.audioMediaObject.readyState?(d.hideDownloadGif(),B.mediaPlay(c.audioMediaObject,"audio")):null==c.checkAudioFileReadyStatusInterval&&(c.checkAudioFileReadyStatusInterval=setInterval(p,250));return!1});$("#cuiAudioModal").on("hide.bs.modal",function(){clearInterval(c.checkAudioFileReadyStatusInterval);
        c.checkAudioFileReadyStatusInterval=null;B.mediaStop(c.audioMediaObject);d.hideAudioModal()})}},{key:"turnOnSoundIconInHeader",value:function(a){c.muteAudio||($("#sound__image").attr("src","https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/soundIcon.jpg"),c.muteAudio=!0)}},{key:"toggleCpatchSound",value:function(a){c.muteAudio?($("#sound__image").attr("src","https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/noSoundIcon.jpg"),1==$(".cui__conversation__stream .cui__media__message").length?
      (B.mediaPause(c.audioMediaObject),B.mediaMute(c.videoMediaObject)):c.currentNodeHasCpatchAudio&&B.mediaPause(c.cpatchAudioMediaObject)):($("#sound__image").attr("src","https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/soundIcon.jpg"),1==$(".cui__conversation__stream .cui__media__message").length?(B.mediaUnPause(c.audioMediaObject,"notPatchAudio"),B.mediaUnMute(c.videoMediaObject)):c.currentNodeHasCpatchAudio&&B.mediaUnPause(c.cpatchAudioMediaObject,"patchAudio"));c.muteAudio=!c.muteAudio;console.log(c.muteAudio)}},
    {key:"playCpatchAudio",value:function(){function a(a){try{$("#cui__cpatch__audio__object").children("source").attr("src",a),c.cpatchAudioMediaObject=$("#cui__cpatch__audio__object")[0],0==c.loadCpatchMediaCounter&&(c.cpatchAudioMediaObject.load(),c.loadCpatchMediaCounter+=1)}catch(h){d.handleError("err_120")}}function b(){4==c.cpatchAudioMediaObject.readyState?(clearInterval(c.checkPatchAudioFileReadyStatusInterval),c.checkPatchAudioFileReadyStatusInterval=null,console.log("cpatch audio file ready"),
        c.abortMediaPlay?console.log("cpatch audio play being aborted"):B.mediaPlay(c.cpatchAudioMediaObject,"audio")):console.log("cpatch audio file not ready")}console.log("stopping  media  in play cpatch");clearInterval(c.checkPatchAudioFileReadyStatusInterval);clearInterval(c.checkAudioFileReadyStatusInterval);clearInterval(c.checkVideoFileReadyStatusInterval);c.checkPatchAudioFileReadyStatusInterval=null;c.checkAudioFileReadyStatusInterval=null;c.checkVideoFileReadyStatusInterval=null;B.mediaStop(c.audioMediaObject);
        B.mediaStop(c.videoMediaObject);B.mediaStop(c.cpatchAudioMediaObject);c.abortMediaPlay=!1;var e=function(a){try{var b=d.createTextObjFromPatches("cpa",c.currentNodeID);if(null==b||void 0==b)return c.currentNodeHasCpatchAudio=!1,null;var e=b[0][0].da_ddf.text[0];c.currentNodeHasCpatchAudio=!0;return e}catch(r){d.handleError("err_26")}}();null!=e&&a(e);if(c.muteAudio&&null!=e)return 4==c.cpatchAudioMediaObject.readyState?B.mediaPlay(c.audioMediaObject,"audio"):null==c.checkPatchAudioFileReadyStatusInterval&&
          (c.checkPatchAudioFileReadyStatusInterval=setInterval(b,250)),!1}},{key:"recordMediaUsageData",value:function(a,b){u.sendMediaUsageData(c.currentNodeID,c.chrIDObject.chrID,"mediaUsed",a,b)}},{key:"addImageEventHandlers",value:function(){$(".cui__image__thumbnail").click(function(a){$(".cui__image__modal").removeClass("cui__image__modal__hide");$("#cuiImageModal").modal({backdrop:!1});return!1});$(".cui__close__image__modal").click(function(a){$("#cuiImageModal").modal("hide");$("body").removeClass("modal-open");
        $(".cui__image__modal").addClass("cui__image__modal__hide");return!1})}},{key:"addBulletModalEventHandlers",value:function(){$(".cui__close__bullet__modal").click(function(a){console.log("closing bullet modal");$("#cuiBulletModal").modal("hide");$("body").removeClass("modal-open");$(".cui__bullet__modal").addClass("cui__bullet__modal__hide");return!1})}},{key:"OldaddTileT4EventHandlers",value:function(){$(".cui__tile__items").click(function(a){$(".cui__bullet__modal").removeClass("cui__bullet__modal__hide");
        $("#cuiBulletModal").modal({backdrop:!1});return!1})}},{key:"checkIfSelectionOrDeselection",value:function(a){return $(a).hasClass("preFill")||$(a).hasClass("cui__tile__selected")?!1:!0}},{key:"checkIfFirstSelectionOfTile",value:function(){return 0==$("div.cui__tile__selected").length?!0:!1}},{key:"addPastSelections",value:function(a){$("#tile-response .preFill").each(function(b){b=$(this).attr("data-tile-name");var e=$(this).attr("data-tile-value");a.push(b+"-"+e)});return a}},{key:"addPrefilledSelectionsFromPastToVisitorSelection",
      value:function(a){try{for(var b=0;b<a.length;b++){var e=a[b][0].da_ddf;"preFill"==e.valueType&&c.visitorSelection.push(e.name+"-"+e.value)}}catch(f){d.handleError("err_27a")}a=d.findNodeObj(c.currentNode);a=A.getDataProbeID(a);c.visitorQuestion=a}},{key:"removeTileSelectionFromVisitorSelection",value:function(a,b,e){try{var f=e.indexOf(a+"-"+b);-1<f&&e.splice(f,1)}catch(h){d.handleError("err_27b")}return e}},{key:"storeRespTileSelectionInNode",value:function(a,b){var e=d.findNodeObj(c.currentNode);
        try{var f=e.rs_obj.pr_obj.p_rdo;for(e=0;e<f.length;e++){var h=f[e][0].da_ddf;h.value==b&&h.name==a&&(h.valueType="preFill")}}catch(m){d.handleError("err_27c")}}},{key:"removeRespTileSelectionFromNode",value:function(a,b){var e=d.findNodeObj(c.currentNode);try{var f=e.rs_obj.pr_obj.p_rdo;for(e=0;e<f.length;e++){var h=f[e][0].da_ddf;h.value==b&&h.name==a&&(h.valueType="")}}catch(m){d.handleError("err_27d")}}},{key:"createPseudoClickedButtonHTML",value:function(){return"<div data-next-node=nextNodeInTheme>"}},
    {key:"createSelectionArray",value:function(a){var b=[],e=$("#tile-response").attr("data-probe-id");b.push(e+"-"+a);return b}},{key:"createSelectionDataObject",value:function(a,b){var e={};e[a]=b;return e}},{key:"createInterestNode",value:function(a){var b=d.findBotPersonality();null!=c.mainMotifThemeBeingShown&&"bot"==b&&d.tagAsShownInterestNodeProbeThemeOptionsShown(c.mainMotifThemeBeingShown);a=d.createCopyOfNode(a);a=d.removeProbeOptionsTaggedAsNeverFromInterestNode(a);if("proactiveRestartMode"==
      c.botState||"bot"==b)a=d.removeProbeOptionsTaggedAsShownFromInterestNode(a);a=d.removeIfNecessaryLowImpactThemesFromProbeDataObject(a);try{var e=a.rs_obj.pr_obj.p_rdo;2>=e.length&&(a=d.changeInterestNodeProbeDisplayCategoryToTile(a))}catch(f){d.handleError("err_28")}return a}},{key:"displayRespObject",value:function(a,b,e,f,h,m){var g=this;try{if("interestNode"==a.nmobj.nodcat){a=d.createInterestNode(a);var l=a.rs_obj.pr_obj.p_rdo.length;var q=a.rs_obj.pr_obj.p_mo;b=a.rs_obj.pr_obj.p_rdo;f=q.p_rdc;
        h=q.p_rdsc}else l=b.length}catch(p){d.handleError("err_30")}if(0<l)switch(f){case "form":d.displayFormResponse(a,b,f,h,e,m);break;case "input":d.displayInputResponse(a,g,b,e,h);break;case "survey":d.displaySurveyResponse(a,b,f,h,e,m);break;case "payment":"pm"==h?d.displayPaymentMethodNode(a,b,f,h,e,m):d.displayPaBiPpNodes(a,b,f,h,e,m);break;case "tile":d.displayTileResponse(a,b,f,h,e,m);break;default:console.log("invalid response display category")}else d.displayQuickReplyResponse(a,b,f,h,e,m);a=
        setTimeout(function(){g.scrollIntoView()},300);c.timeouts.push(a)}},{key:"createAndDisplayResponseBubble",value:function(a,b,e,f,h,c,g){a=d.createResponseBubble({nodeObj:a,prdo:b,qrdo:h,prdc:e,prdsc:f,qrdsc:c,renderObjectType:"respObject",responseBubbleType:g});return d.displayResponseBubble(a,g,f)}},{key:"createResponseBubble",value:function(a){var b=this.bubbleTypes[a.responseBubbleType];try{if(b)return(new b(a)).render(a.renderObjectType,this);d.handleError("err_30")}catch(e){d.handleError("err_30")}}},
    {key:"displayResponseBubble",value:function(a,b,e){var f=document.createElement("div");switch(b){case "form":$(f).addClass(this.config.responseFormClass);f.appendChild(a);this.responses.appendChild(f);break;case "QRNodeSelector":$(f).addClass(this.config.responseQRButtonClass);f.appendChild(a);this.responses.appendChild(f);break;case "QRImgSelector":$(f).addClass(this.config.responseQRButtonClass);f.appendChild(a);this.responses.appendChild(f);break;case "input":$(f).addClass(this.config.responseInputClass);
        f.appendChild(a);this.responses.appendChild(f);break;case "survey":$(f).addClass(this.config.responseSurveyClass);f.appendChild(a);this.responses.appendChild(f);break;case "payment":$(f).addClass(this.config.responsePaymentClass);$(f).addClass(e);f.appendChild(a);this.responses.appendChild(f);break;case "tile":$(f).addClass(this.config.responseTileClass);$(f).addClass(e);f.appendChild(a);this.responses.appendChild(f);if("t8"==e||"t10"==e||"t11"==e)$(".tile-button").on("click",J.tileT8EventHandler);
      else"t9"==e&&($(".tile-button").on("click",J.tileT9EventHandler),$("#qr-response").on("click",J.QREventHandlers));0!=$("#tileCarouselControlID").length&&($("#tileCarouselControlID").carousel({interval:k.shortCarouselIntervalPeriod}),d.addCarouselSwipeEventHandler("#tileCarouselControlID"),c.carouselCycleCount=0,d.cycleCarouselAndThenStop("#tileCarouselControlID"));break;default:console.log("unmatched response bubble type "+a.responseBubbleType)}b=d.createfooter();this.responses.appendChild(b);b=setTimeout(function(){$(a).addClass("cui__response__bubble--slideIn");
        $(".cui__response__stream").addClass("border__to__response")},250);c.timeouts.push(b);var h=function(b){a.focus();a.removeEventListener("transitionend",h)};a.addEventListener("transitionend",h);return a}},{key:"createfooter",value:function(){var a=document.createElement("div");$(a).addClass(k.footerClass);a.setAttribute("id","footer");'<div class="d-flex"><div id = "poweredByChalakh">Powered by Chalakh</div></div>';a.innerHTML='<div class="d-flex"><div id = "poweredByChalakh">Powered by Chalakh</div>';
        return a}},{key:"processResponseClick",value:function(a,b,e,f,h,m,g,l){function r(){function a(a){var b=[];var e=$("#tile-response").attr("data-probe-id");for(var f=0;f<a.length;f++){var d=a[f].split("-")[1];b.push(e+"-"+d)}return b}h="t9"==d.findNodeObj(c.currentNode).rs_obj.pr_obj.p_mo.p_rdsc?a(c.visitorSelection):null;var b=function(a){for(var b={},e=0;e<a.length;e++){var f=a[e].split("-");b[f[0]]=f[1]}return b}(c.visitorSelection),e=c.visitorQuestion;d.findCampaignUseCase()&&O.postVisitorData(b);
        u.sendUserSelectionData(c.currentNodeID,c.chrIDObject.chrID,"userSelection",b,e);c.visitorSelection=[];c.visitorQuestion=""}c.abortMediaPlay=!0;document.documentElement.style.setProperty("--cui__text__message-font-size","0.9rem");if(!function(a){a=$(a).attr("data-next-node");if(void 0!=a&&null!=a)return a=a.split("-"),"href"==a[0]?(a.shift(),a=a.join("-"),window.open(a,"_top"),!0):!1}(b)){try{var p=d.findNodeObj(c.currentNode);var y=p.rs_obj.pr_obj.p_mo.p_rdsc,v=p.ms_obj.conobj.conmobj.cdsc}catch(w){d.handleError("err_31b")}"t9"!=
      y&&"t5"!=v||r();m=function(a){try{void 0==a&&(a=p.nmobj.nodcat)}catch(K){d.handleError("err_31")}return a}(m);1!=c.conversationStartRecorded&&(u.sendConversationData(p._nid,c.chrIDObject.chrID,"conversationEvent","coStart",c.botState),u.setItem(k.convStarted,1,k.mediumExpirationPeriod,k.cookiePath),c.conversationStartRecorded=!0);switch(m){case "contentNode":d.processContentNodeClick(a,b,f,h);break;case "contextNode":d.processContextNodeClick(a,b,f,h);break;case "interestNode":d.processInterestNodeClick(a,
      b,f,h);break;case "searchNode":c.segmentNodeWasFound=!1;d.processSearchNodeClick(a,b,f,h);break;case "segmentNode":c.segmentNodeWasFound=!0;d.processSearchNodeClick(a,b,f,h);break;case "purposeNode":d.processPurposeNodeClick(a,b,f,h);break;case "conversionNode":d.processConversionNodeClick(a,b,f,g,l);break;case "restartPreferenceNode":d.processRestartPreferenceNodeClick(a,b,f,h);break;case "iconNode":d.processIconNodeClick(a,b,f);break;default:d.handleError("err_32")}}}},{key:"findAnddisplaySubsequentNodeObjInTheme",
      value:function(a,b,e){"redirectNode"==e?d.processRedirectNode(a,!1):(d.emptyMessageStream(),d.emptyResponseStream(),e=d.getNodeToDisplay(a),d.checkNodeToShowObj(e),d.displayNode(e,b,"previousNodeInTheme"==a?"backward":"forward",!0))}},{key:"displaySubsequentNodeObjInTheme",value:function(a,b,e,f){"redirectNode"==e?d.processRedirectNode(a,!1):(d.emptyMessageStream(),d.emptyResponseStream(),d.checkNodeToShowObj(a),d.displayNode(a,b,"previousNodeInTheme"==f?"backward":"forward",!0))}},{key:"removeImageModalIfWasCreated",
      value:function(){$(".cui__image__modal").length&&($(".cui__image__modal").remove(),c.imgGroups=[])}},{key:"getDataNextNodeFromClickedResponseButton",value:function(a){a=$(a).attr("data-next-node");void 0==a&&(a="nextNodeInTheme");return a}},{key:"getNodeCat",value:function(a){try{var b=a.nmobj.nodcat}catch(e){d.handleError("err_37")}return b}},{key:"processContentNodeClick",value:function(a,b,e,f){a=d.getDataNextNodeFromClickedResponseButton(b);b=d.findNodeCategory(a,f);d.removeImageModalIfWasCreated();
        f=d.getNodeToDisplay(a,f);d.displaySubsequentNodeObjInTheme(f,!1,b,a)}},{key:"processContextNodeClick",value:function(a,b,e,f){var h,c;a=d.getSelectionValue(f);"Attendee"==a?h="sponsor":h="Attendee";"Attendee"==a?c="Attendee":c="sponsor";d.suppressContextualNodesInCSO({csoConvert:I,csoMain:R},h);u.setItem(k.visitorContext,c,k.mediumExpirationPeriod,k.cookiePath);h=$(b).attr("data-next-node");b=h.split(":");1==b.length?h=b[0]:d.handleError("err_33");d.findAnddisplaySubsequentNodeObjInTheme(h,!1)}},
    {key:"processPurposeNodeClick",value:function(a,b,e,f){var h,c;e=d.getSelectionValue(f);"attendee"==e?(h="sponsor",c="attendee"):"sponsor"==e?(h="attendee",c="sponsor"):h=!1;a=d.findNodeTargetAudience("currentNode");try{var g=a.concat(":",e)}catch(q){d.handleError("err_34")}if("attendee"==h||"sponsor"==h)a={csoConvert:I,csoMain:R},d.suppressContextualNodesInCSO(a,h),u.setItem(k.visitorContext,c,k.mediumExpirationPeriod,k.cookiePath);b=$(b).attr("data-next-node");h=d.getNodeToDisplay(b);Array.isArray(h)&&
      (h=d.removeDuplicateNodesTemporarilyUsingTargetAudience(h[0],g));try{var l=h.nmobj.nodcat;d.displaySubsequentNodeObjInTheme(h,!1,l,b)}catch(q){d.handleError("err_35")}}},{key:"processInterestNodeClick",value:function(a,b,e,f){a=d.getSelectionValue(f);u.cookieConversationThemeHistory(a);u.cookieThemeImpressionCount();c.mainMotifThemeBeingShown=a;d.findThemeNodes("cso_mai",R,a);try{var h=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var g=R[h]}catch(r){d.handleError("err_36")}d.displaySubsequentNodeObjInTheme(g,
      !1,void 0,"nextNodeInTheme")}},{key:"processSearchNodeClick",value:function(a,b,e,f){try{var h=d.findNodeObj(c.currentNode).ms_obj.conobj.conmobj.cdsc}catch(r){d.handleError("err_37a")}"t5"==h&&(f=c.segmentSelectionArrayOfArrays[c.segmentSelectionArrayOfArrays.length-1]);if(0==c.currentNode||"searchNode"!=d.findNodeCategory("previousNodeInTheme"))c.segmentSelectionArrayOfArrays=[];c.segmentSelectionArrayOfArrays.push(f);b=d.getDataNextNodeFromClickedResponseButton(b);a="previousNodeInTheme"==b?!1:
      !0;f=d.getNodeToDisplay(b,f);try{var g=f.nmobj.nodcat}catch(r){d.handleError("err_37b")}d.displaySubsequentNodeObjInTheme(f,a,g,b)}},{key:"processConversionNodeClick",value:function(a,b,e,f,h){function g(a){try{a.nmobj.dinod="never"}catch(v){d.handleError("err_37c")}(function(){function b(b){try{for(var e=a.rs_obj.pr_obj.p_mo.p_seg,f=0;f<b.length;f++){var h=E[b[f].motif][b[f].index],c=h.nmobj;e==h.rs_obj.pr_obj.p_mo.p_seg&&(c.dinod="never")}}catch(X){d.handleError("err_38b")}}function e(a,b,e){try{var f=
        [],h=[];try{var c=[],g=x[a].c_r_m[b];for(a=0;a<g.length;a++)c.push(g[a].th_m)}catch(Z){d.handleError("err_38a")}var m=c;for(c=0;c<m.length;c++)for(h=d.findThemeNodesNotTaggedAsNever([],b,e,m[c]),g=0;g<h.length;g++)"conversionNode"==h[g].nodcat&&f.push(h[g])}catch(Z){d.handleError("err_38c")}return f}for(var f=c.chrIDObject.chrIndex,h=[{motifName:"cso_con",motifObj:I},{motifName:"cso_mai",motifObj:R},{motifName:"cso_res",motifObj:V},{motifName:"cso_int",motifObj:Q}],g=0;g<h.length;g++){var m=e(f,h[g].motifName,
      h[g].motifObj);0<m.length&&b(m,a)}})();a:{try{r=c.chrIDObject.chrIndex;if(0==x[r].c_r_m.cso_con.length){var b=!1;break a}l=x[r].c_r_m.cso_con[0].th_m;q=d.findAllThemeNodesInMotif("cso_con",I,l,!0)}catch(v){d.handleError("err_38")}b=0==q.length?!1:!0}b||u.cookieGoalCompletion(1);(function(b,e){u.cookieConversionNodeHistory(b);u.sendConversionData(b,e,"conversionEvent","cxSuccess",a)})(a._nid,c.chrIDObject.chrID,a);u.setItem(k.cxCumAttemts,0,k.mediumExpirationPeriod,k.cookiePath);sessionStorage.setItem(k.cxSessAttemts,
      0)}var r,l,q;a=function(a,b){if(0==x[a].c_r_m.cso_con.length)return!1;var e=x[a].c_r_m.cso_con[0].th_m;if(null!=e){e=d.findAllThemeNodesInMotif("cso_con",I,e,!0);for(var f=0;f<e.length;f++)if(e[f]._nid==b._nid)return!0}else return!1}(c.chrIDObject.chrIndex,h);1==f?g(h):u.sendConversionData(h._nid,c.chrIDObject.chrID,"conversionEvent","cxFailure",h);f=d.findNodeObj(c.currentNode);d.checkNodeToShowObj(f);a?"never"!=f.nmobj.dinod?d.displaySubsequentNodeObjInTheme(f,!1,void 0,"nextNodeInTheme"):(b=d.getNodeToDisplay("nextNodeInTheme"),
        d.displaySubsequentNodeObjInTheme(b,!1,void 0,"nextNodeInTheme")):(b=$(b).attr("data-next-node"),b=d.getNodeToDisplay(b),d.checkNodeToShowObj(b),d.displaySubsequentNodeObjInTheme(b,!1,void 0,"nextNodeInTheme"))}},{key:"findInterestNodeObj",value:function(a){var b;try{for(var e=0;e<a.length;e++){var f=a[e],h=E[c.currentThemeNodes[f].motif][c.currentThemeNodes[f].index];"interestNode"==h.nmobj.nodcat&&(b=h)}}catch(m){d.handleError("err_39")}return b}},{key:"areThemesAvailableToDisplay",value:function(a){a=
        d.findInterestNodeObj(a[0]);return d.checkIfThemesAvailableToShow(a)}},{key:"processRestartPreferenceNodeClick",value:function(a,b,e,f){var h,c;a=d.getSelectionValue(f);e=d.getNodeToDisplay("nextNodeInTheme");"pickUpWhereLeft"==selection?c="pickUpWhereLeft":c="themesAvailableToShow";b=d.findNodeTargetAudience("currentNode");if("startAllOverAgain"==a)try{c=b.concat(":","themesAvailableToShow"),e=d.removeDuplicateNodesTemporarilyUsingTargetAudience(e[0],c),d.recapThemesShownInPast(e.ms_obj.cpatch)}catch(r){d.handleError("err_40")}else try{(h=
        d.areThemesAvailableToDisplay(e))?c=b.concat(":","themesAvailableToShow"):c=b.concat(":","themesUnavailableToShow"),e=d.removeDuplicateNodesTemporarilyUsingTargetAudience(e[0],c),h&&(e=d.findThemesShownBeforeAndTagAsShown(e),d.recapThemesShownInPast(e.ms_obj.cpatch))}catch(r){d.handleError("err_41")}d.displaySubsequentNodeObjInTheme(e,!1,void 0,"nextNodeInTheme")}},{key:"processRedirectNode",value:function(a,b,e){$.isPlainObject(a)||(a=d.getNodeToDisplay(a));try{var f=a.nmobj.nredth;var h=f.split(":");
        var g=h[0];var r=h[1];var l=E[g]}catch(y){d.handleError("err_42")}d.findThemeNodes(g,l,"currentTheme"==r?c.currentTheme:r);try{var q=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var p=l[q]}catch(y){d.handleError("err_43")}d.displaySubsequentNodeObjInTheme(p,!1,void 0,"nextNodeInTheme")}},{key:"processIconNodeClick",value:function(){function a(){b=d.getNodeToDisplay("nextNodeInTheme");var a=d.getNodeCat(b);d.displaySubsequentNodeObjInTheme(b,!1,a,"nextNodeInTheme")}var b;$("#chalakhIcon").off("click");
        d.hideChalakhIcon();d.adjustCSSVarstoMatchDeviceType();d.makeChalakhFrameWide();d.unhideHeader();d.unhideConversationStream();d.showBorderToMessageStream();switch(c.botState){case "passiveFreshStartMode":a();break;case "passiveExitMode":a();break;case "passiveRestartMode":a();break;default:console.log("bot state not recognized in iconNode click handler"+c.botState)}u.sendConversationData(b._nid,c.chrIDObject.chrID,"conversationEvent","coOpen","passive");sessionStorage.setItem(k.convOpenURL,c.currentURL)}},
    {key:"processImgSelectorClick",value:function(a){var b=[];$(".cui__image__modal").remove();(function(){c.imgGroups.forEach(function(a,b){e="."+a;$(e).addClass("cui__image__thumbnail__hide")})})();var e="."+a;$(e).removeClass("cui__image__thumbnail__hide");var f=d.findNodeObj(c.currentNode);try{var h=f.ms_obj.conobj.cdo;h.forEach(function(e,f){var d=e[0].da_ddf;d.groupName==a&&b.push(d)})}catch(m){d.handleError("err_45")}d.createImageModal(b);d.addImageEventHandlers()}},{key:"getThemesShownInPast",
      value:function(){var a=[],b=[];sessionStorage.getItem(k.sessID);var e=localStorage.getItem(k.convThemeHistory);try{null!=e&&(a=JSON.parse(e),a.forEach(function(a,e){b.push(a.thid)}))}catch(f){d.handleError("err_46")}return b}},{key:"removeProbeOptionsTaggedAsNeverFromInterestNode",value:function(a){try{var b=a.rs_obj.pr_obj.p_rdo;for(var e=0;e<b.length;e++){var f=b[e][1].da_meob;"never"==f.da_disob&&(b.splice(e,1),--e)}}catch(h){d.handleError("err_47")}return a}},{key:"removeProbeOptionsTaggedAsShownFromInterestNode",
      value:function(a){try{var b=a.rs_obj.pr_obj.p_rdo;for(var e=0;e<b.length;e++){var f=b[e][1].da_meob;"shown"==f.da_disob&&(b.splice(e,1),--e)}}catch(h){d.handleError("err_48")}return a}},{key:"removeShownAndNeverProbeOptionsBeforeRestart",value:function(a){var b=d.getThemesShownInPast();if(0!=b.length){for(var e=0;e<b.length;e++)d.tagAsShownInterestNodeProbeThemeOptionsShown(b[e]);a=d.removeShownAndNeverProbeOptionsFromInterestNode(a)}return a}},{key:"findThemesShownBeforeAndTagAsShown",value:function(a){var b=
        d.getThemesShownInPast();if(0!=b.length)for(var e=0;e<b.length;e++)d.tagAsShownInterestNodeProbeThemeOptionsShown(b[e]);return a}},{key:"changeInterestNodeProbeDisplayCategoryToTile",value:function(a){try{var b=a.rs_obj.pr_obj.p_mo;b.p_rdc="tile";b.p_rdsc="t8";return a}catch(e){d.handleError("err_49")}}},{key:"removeIfNecessaryLowImpactThemesFromProbeDataObject",value:function(a){var b;try{var e=x[c.chrIDObject.chrIndex].c_r_m.c_r_ge.c_r_de;var f=a.rs_obj.pr_obj.p_rdo;if(f.length>e){var h=f.length-
      e;var g=["low","medium","high"];var r=d.findChrMetaMainMotifThemeObj();for(e=0;e<g.length;e++){for(var l=g[e],q=0;q<f.length;q++){var p=f[q][0].da_ddf;var k=p.value;r.forEach(function(a,e){a.th_m==k&&(b=a.impact)});if(b==l&&(--h,f.splice(q,1),--q,0==h))break}if(0==h)break}}}catch(v){d.handleError("err_50")}return a}},{key:"tagAsShownInterestNodeProbeThemeOptionsShown",value:function(a){var b,e,f;var h=d.findInterestNodes([N,R,V,Q]);try{h.forEach(function(d,h){b=d.rs_obj.pr_obj.p_rdo;b.forEach(function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 d){e=b[0].da_ddf;f=b[1].da_meob;e.value==a&&(f.da_disob="shown")})})}catch(m){d.handleError("err_51")}}},{key:"tagAsNeverInterestNodeProbeThemeOptionNotInMainMotif",value:function(){var a,b=[],e,f,h,c;b=d.findMainMotifThemes();var g=d.findInterestNodes([N,R,V,Q]);try{g.forEach(function(d,g){f=d.rs_obj.pr_obj.p_rdo;f.forEach(function(f,d){h=f[0].da_ddf;c=f[1].da_meob;e=h.value;a="never";b.forEach(function(b,f){b==e&&(a=!0)});c.da_disob=a})})}catch(l){d.handleError("err_52")}}},{key:"findInterestNodes",
      value:function(a){var b=[];try{return a.forEach(function(a,f){a.forEach(function(a,e){"interestNode"==a.nmobj.nodcat&&b.push(a)})}),c.interestNodes=b}catch(e){d.handleError("err_53")}}},{key:"findMainMotifThemes",value:function(){var a=[];try{var b=d.findChrMetaMainMotifThemeObj();b.forEach(function(b,f){a.push(b.th_m)})}catch(e){d.handleError("err_54")}return a}},{key:"createCopyOfNode",value:function(a){try{var b=JSON.parse(JSON.stringify(a))}catch(e){d.handleError("err_55")}return b}},{key:"findChrMetaMainMotifThemeObj",
      value:function(){try{return x[c.chrIDObject.chrIndex].c_r_m.cso_mai}catch(a){d.handleError("err_46")}}},{key:"findBotPersonality",value:function(){try{var a=c.chrIDObject.chrIndex;var b=x[a].c_r_m.c_r_ge.c_r_pe}catch(e){d.handleError("err_57")}return b}},{key:"resetTemporarilyRemovedNodes",value:function(a){try{for(var b=0;b<a.length;b++)c.currentThemeNodes[a[b]].dinod=!0}catch(e){d.handleError("err_58")}}},{key:"removeDuplicateNodesTemporarilyUsingTargetAudience",value:function(a,b){var e;try{for(var f=
        0;f<a.length;f++){var h=a[f];var g=c.currentThemeNodes[h].index;var r=c.currentThemeNodes[h].motif;var l=E[r];var q=l[g];var k=q.nmobj.taraud;k==b?e=q:c.currentThemeNodes[h].dinod=!1}}catch(y){d.handleError("err_59")}c.previousNode=c.currentNode;c.currentNode=d.findForwardNodeIndex(c.previousNode);c.nextNode=d.findForwardNodeIndex(c.currentNode);c.afterNextNode=d.findForwardNodeIndex(c.nextNode);c.afterNextNextNode=d.findForwardNodeIndex(c.afterNextNode);return e}},{key:"recapThemesShownInPast",value:function(a){var b=
        [],e=[],f,h,c,g;var l=localStorage.getItem(k.convThemeHistory);try{if(null==l)a.forEach(function(a,b){for(var e in a)"_blrbs"==e&&a[e]==k.pastThemeSummaryBlurb&&(a[e]=k.pastThemeGenericBlurb)});else{b=JSON.parse(l);b.forEach(function(a,b){e.push(a.thid)});e=[new Set(e)];W.forEach(function(a,b){for(var e in a)"_blrbs"==e&&(h=a._blrbs)});h.forEach(function(a,b){for(var e in a)a[e]==k.pastThemeSummaryBlurb&&(f=a)});var q=f.sentenceObject;e.forEach(function(a,b){c=["themeDisplayNames:"+a];g={fragmentObject:[{fragmentType:"parameteric",
          fragments:c}]};q.push(g)})}}catch(p){d.handleError("err_60")}}},{key:"checkIfThemesAvailableToShow",value:function(a){try{var b=a.rs_obj.pr_obj.p_rdo;var e=d.getThemesShownInPast();if(0!=e.length)for(var f=0;f<e.length;f++)for(a=0;a<b.length;a++){var h=b[a][0].da_meob;var c=b[a][1].da_ddf;var g=c.value;g==e[f]&&(h.da_disob="shown")}for(f=0;f<b.length;f++)if(h=b[f][1].da_meob,1==h.da_disob)return!0}catch(l){d.handleError("err_61")}return!1}},{key:"checkIfCurrentNodeHasImageThumbnails",value:function(){try{return"image"==
      d.findCurrentNodeContentDisplayCategory()?!0:!1}catch(a){d.handleError("err_3")}}},{key:"removePreviousNodeFromQRDO",value:function(a){var b=!1,e=0;var f=JSON.parse(JSON.stringify(a));try{return f.forEach(function(a,f){"previous"==a.qr_opty&&(e=f,b=!0)}),b?(f.splice(e,1),f):a}catch(h){d.handleError("err_63")}}},{key:"displayQuickReplyResponse",value:function(a,b,e,f,h,g){var m,l={};g=d.checkIfCurrentNodeHasImageThumbnails()?"QRImgSelector":"QRNodeSelector";l=0==c.currentNode?d.removePreviousNodeFromQRDO(h):
      h;h=setTimeout(function(){m=d.createAndDisplayResponseBubble(a,b,e,f,l,g,g);m.addEventListener("click",J.QREventHandlers)},165);c.timeouts.push(h)}},{key:"displayTileResponse",value:function(a,b,e,f,h,c){d.createAndDisplayResponseBubble(a,b,e,f,h,c,"tile")}},{key:"displayPaBiPpNodes",value:function(a,b,e,f,h,g){function m(){function a(a,b){var e=d.findNodeObj(c.currentNode);try{var f=e.rs_obj.pr_obj.p_rdo;if("paymentAmount"==h){var g=f[0][0].da_ddf.paymentChoices;for(var m=0;m<g.length;m++)g[m].value==
      b&&g[m].name==a&&(g[m].valueType="")}else{var l=f[0][0].da_ddf.paymentType;for(m=0;m<l.length;m++)l[m].value==b&&l[m].name==a&&(l[m].valueType="")}}catch(aa){d.handleError("err_27c")}}function b(b){if("paymentAmount"==h){b=$(".cui__payment__amount__selected");var e=b[0];$(e).removeClass("cui__payment__amount__selected")}else b=$(".cui__payment__type__selected"),e=b[0],$(e).removeClass("cui__payment__type__selected");b=$(e).attr("data-name");e=$(e).attr("data-value");a(b,e)}function e(a,b,e){"paymentAmount"==
      h?$(e).addClass("cui__payment__amount__selected"):$(e).addClass("cui__payment__type__selected");$(e).children("img").addClass("cui__img__make__opaque");e=d.findNodeObj(c.currentNode);try{var f=e.rs_obj.pr_obj.p_rdo;if("paymentAmount"==h){var g=f[0][0].da_ddf.paymentChoices;for(var m=0;m<g.length;m++)g[m].value==b&&g[m].name==a&&(g[m].valueType="preFill")}else{var l=f[0][0].da_ddf.paymentType;for(m=0;m<l.length;m++)l[m].value==b&&l[m].name==a&&(l[m].valueType="preFill")}}catch(aa){d.handleError("err_27c")}"other"!=
      b?"paymentAmount"==h?c.paymentAmount=b:c.paymentType=b:d.unhidePaymentAmountOtherOption()}function f(b,e,f){"paymentAmount"==h?$("#cui__payment__amount__container").removeClass("cui__payment__amount__selected"):$("#cui__payment__type__container").removeClass("cui__payment__type__selected");$(f).children("img").removeClass("cui__img__make__opaque");a(b,e)}var h=$(this).hasClass("payment-type-button")?"paymentType":"paymentAmount";var g="paymentAmount"==h?$(this).hasClass("preFill")||$(this).hasClass("cui__payment__amount__selected")?
      !1:!0:$(this).hasClass("preFill")||$(this).hasClass("cui__payment__type__selected")?!1:!0;var m=$(this).attr("data-name");var l=$(this).attr("data-value");g?("paymentAmount"==h?0!=$("div#cui__payment__amount__container .cui__payment__amount__selected").length&&b(this):0!=$("div#cui__payment__type__container .cui__payment__type__selected").length&&b(this),e(m,l,this)):"paymentAmount"==h?0!=$("div#cui__payment__amount__container .cui__payment__amount__selected").length&&f(m,l,this):0!=$("div#cui__payment__type__container .cui__payment__type__selected").length&&
      f(m,l,this);return!1}var l;d.createAndDisplayResponseBubble(a,b,e,f,h,g,"payment");try{var q=a.nmobj.nodcat}catch(p){d.handleError("err_66")}$("#payment-pa-bi-pp").validate({rules:{firstName:"required",lastName:"required",businessTitle:"required",company:"required",email:{required:!0,email:!0},phone:{required:!0,digits:!0,minlength:10,maxlength:11},password:{required:!0,minlength:5},streetAddress1:"required",city:"required",state:"required",zipcode:"required"},messages:{firstName:{required:"Please enter first name"},
          lastName:{required:"Please enter last name"},businessTitle:{required:"Please enter your business title"},company:{required:"Please enter your company name"},phone:{required:"Please enter phone number",digits:"Please enter valid phone number",minlength:"Phone number should be at least 10 digits",maxlength:"Phone number cannot exceed 11 digits"},email:{required:"Please enter email address",email:"Please enter a valid email address."},streetAddress1:{required:"Please enter your street address"},city:{required:"Please enter your city"},
          state:{required:"Please enter your state"},zipcode:{required:"Please enter your zipcode"}}});$("#failure").click(function(b){b.stopPropagation();l=this;d.processResponseClick(null,l,this,"form",null,q,0,a);return!1});$("#payment-pa-bi-pp").submit(function(b){function e(){var a;try{var b=$("#payment-pa-bi-pp :input");b.each(function(){"success"==this.id&&(a=this)})}catch(X){d.handleError("err_66a")}return a}function h(a){try{var b=$("#payment-pa-bi-pp :input");b.each(function(){"success"!=this.id&&
      "failure"!=this.id&&(a[this.name]=this.value)})}catch(X){d.handleError("err_66b")}return a}function g(a){var b=d.findNodeObj(c.currentNode);try{var e=b.rs_obj.pr_obj.p_rdo;for(var f in a)for(b=0;b<e.length;b++){var h=e[b][0].da_ddf;h.name==f&&(h.value=a[f])}}catch(Z){d.handleError("err_66c")}}function m(a){if("undefined"!=a.paymentAmount&&""!=a.paymentAmount){var b=d.findNodeObj(c.currentNode);try{var e=b.rs_obj.pr_obj.p_rdo;var f=e[0][0].da_ddf.otherFormField;f.value=a.paymentAmount;f.valueType=
        "preFill"}catch(aa){d.handleError("err_66c")}}}function r(a){if("undefined"!=a.payProcessingCharge&&""!=a.payProcessingCharge){a=d.findNodeObj(c.currentNode);try{var b=a.rs_obj.pr_obj.p_rdo;var e=b[0][0].da_ddf.includePayCCProcessingCharge;e.valueType="preFill"}catch(va){d.handleError("err_66c")}}}function p(a){void 0!=c.paymentAmount&&null!=c.paymentAmount?a.paymentAmount=c.paymentAmount:(""!=a.paymentAmount?c.paymentAmount=a.paymentAmount:console.log("error in processing amount"),c.payProcessingCharge=
        "true"==a.payProcessingCharge?!0:!1)}function z(a){if(void 0==c.paymentType||null==c.paymentType)a=$("#cui__payment__type__container .cui__payment__type__selected")[0],c.paymentType=$(a).attr("data-value")}function u(a){c.firstName=a.firstName;c.lastName=a.lastName;c.streetAddress1=a.streetAddress1;c.city=a.city;c.state=a.state;c.zipCode=a.zipCode}var F={};b.preventDefault();if($("#payment-pa-bi-pp").valid()){F=h(F);d.sendResponseToBackEnd("#payment-pa-bi-pp",F);l=e();try{switch(f){case "pa":a:{try{if(void 0!=
      c.paymentAmount&&null!=c.paymentAmount)var P=!0;else""!=F.paymentAmount&&"null"!=F.paymentAmount?P=!0:(d.showErrorPopUp(k.invalidInputMessage),P=!1);break a}catch(da){d.handleError("err_63a")}P=void 0}if(P){m(F);r(F);p(F);z(this);O.storePaymentInformation(F);break}else return;case "bi":g(F);u(F);O.storePaymentInformation(F);break;case "pp":g(F);O.processCreditCard(F,l,q,"form",1);return;default:d.handleError("err_67A")}}catch(da){d.handleError("err_67")}d.processResponseClick(null,l,this,"form",null,
      q,1,a)}});$(".payment-amount-button").click(m);$(".payment-type-button").click(m)}},{key:"displayPaymentMethodNode",value:function(a,b,e,f,h,g){function m(a,b,e){d.storeRespTileSelectionInNode(a,b);var f=d.createSelectionArray(b);a=d.createSelectionDataObject(a,b);d.sendResponseToBackEnd("paymentMethodSelection",a);"creditcard"==e?(b=d.createPseudoClickedButtonHTML(),d.processResponseClick(null,b,null,null,f)):"wallet"!=e&&window.open(b,"_top")}var l=function(a,b,e){var f=document.createElement("script");
        f.src=a;f.async=e;0!=b&&(f.integrity=b);document.getElementsByTagName("head")[0].appendChild(f)};d.createAndDisplayResponseBubble(a,b,e,f,h,g,"payment");c.paypalSDKLoaded||(l("https://www.paypalobjects.com/api/checkout.js",0,0),c.paypalSDKLoaded=!0);(function(a,b,e){var f=document.createElement("script");f.src=a;f.type="text/javascript";f.async=e;0!=b&&(f.integrity=b);document.getElementsByTagName("head")[0].appendChild(f)})("https://chalakh-bot-js.s3.us-east-2.amazonaws.com/script/paypalSnippet.js",
      0,0);$("#cui__digital__wallet__container").click(function(a){a.stopPropagation();var b=$(a.target).attr("data-value");a=$(a.target).attr("data-name");m(a,b,"wallet")});$("#cui__website__payment__container").click(function(a){a.stopPropagation();var b=$(a.currentTarget).children();a=b.attr("data-value");b=b.attr("data-name");m(b,a,"website")});$("#cui__credit__card__container").click(function(a){a.stopPropagation();m("paymentMethod","creditCard","creditcard")})}},{key:"displayFormResponse",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   b,e,f,h,c){d.createAndDisplayResponseBubble(a,b,e,f,h,c,"form");try{var g=a.nmobj.nodcat}catch(l){d.handleError("err_66")}$("#form-response").validate({rules:{firstName:"required",lastName:"required",businessTitle:"required",company:"required",email:{required:!0,email:!0},phone:{required:!0,digits:!0,minlength:10,maxlength:11},password:{required:!0,minlength:5},streetAddress1:"required",city:"required",state:"required",zipcode:"required"},messages:{firstName:{required:"Please enter first name"},lastName:{required:"Please enter last name"},
          businessTitle:{required:"Please enter your business title"},company:{required:"Please enter your company name"},phone:{required:"Please enter phone number",digits:"Please enter valid phone number",minlength:"Phone number should be at least 10 digits",maxlength:"Phone number cannot exceed 11 digits"},email:{required:"Please enter email address",email:"Please enter a valid email address."},streetAddress1:{required:"Please enter your street address"},city:{required:"Please enter your city"},state:{required:"Please enter your state"},
          zipcode:{required:"Please enter your zipcode"}}});$("#failure").on("click",{ncat:g,node:a},J.handleFormNonSubmitButtonClick);$("#form-response").on("submit",{ncat:g,node:a},J.handleFormSubmitButtonClick)}},{key:"displaySurveyResponse",value:function(a,b,e,f,h,g){d.createAndDisplayResponseBubble(a,b,e,f,h,g,"survey");var m=function(){var a=$("#survey-response input")[0];a.addEventListener("invalid",function(a){a.currentTarget.setCustomValidity("Please select at least one option in the choices I have shown")});
        return a}();$(".form-check-input").change(function(){function a(){m.setCustomValidity("");(function(){var a=$("#survey-response :input");try{a.each(function(){$(this).prop("required",!1)})}catch(y){d.handleError("err_63e")}})()}function b(a){var b=d.findNodeObj(c.currentNode);try{var e=b.rs_obj.pr_obj.p_rdo}catch(K){d.handleError("err_3")}var f=function(){var a=[],b=$("#survey-response :input:not(:checked)");try{b.each(function(){var b={};b[this.name]=this.value;a.push(b)})}catch(H){d.handleError("err_64g")}return a}();
        b=0==$("#survey-response input:checkbox:checked").length?!0:!1;b&&($(a).prop("required",!0),m.setCustomValidity("Please select at least one option in the choices I have shown"));(function(a,b){for(var f,d=0;d<a.length;d++)for(var h in a[d]){f=a[d][h];for(var c=0;c<e.length;c++){var g=e[c][0].da_ddf;g.name==h&&g.value==f&&(g.valueType="",b&&(g.required=!0))}}})(f,b)}try{$(this).is(":checked")?a():b(this)}catch(p){d.handleError("err_64")}});$("#survey-failure").on("click",J.handleSurveyNodeNonSubmitButtonClick);
        $("#survey-response").on("submit",J.handleSurveyNodeSubmitButtonClick)}},{key:"displayInputResponse",value:function(a){var b=a.createResponseBubble({respObject:n.rs_obj,renderObjectType:"respObject",responseDisplayCategory:"input"}),e=a.displayResponseBubble(f,t.responseType),f=a.displayResponseBubble(b,"input");f.setAttribute("style","outline: 0px solid transparent");$(f).addClass("cui__answers__placeholder");var h=f.getElementsByTagName("span");$(".cui__answers__placeholder span").css({outline:"0px solid transparent"});
        $(".cui__answers__placeholder span").css({display:"inline-block"});$(".cui__answers__placeholder span").css({"min-width":"70px"});$(".cui__answers__placeholder span").attr("contenteditable","true");f.addEventListener("paste",function(a){return!1});var c=function(a){if(f.innerText.length){var b=f.getElementsByTagName("span");b[0].innerText=" ";b[0].setAttribute("contentEditable",!0);f.removeEventListener("keyup",c);a.preventDefault()}};f.addEventListener("keyup",c);f.addEventListener("click",function(a){if(f.innerText.length){var b=
          f.getElementsByTagName("span");b[0].innerText=" ";b[0].setAttribute("contentEditable",!0);f.removeEventListener("keyup",c);a.preventDefault()}});var g=!1;f.addEventListener("keydown",function(a){13===a.keyCode&&(a.preventDefault(),f.innerText.length&&!g&&(g=!0,f.removeAttribute("style"),h=f.getElementsByTagName("span"),f.classList.remove("cui__answers__placeholder"),h[0].removeAttribute("style"),h[0].removeAttribute("contentEditable")))});f.addEventListener("keypress",function(a){f.innerText.length>
        n.config.maxCharsResponse&&(e||(e=!0,d.displayNode({messages:[{text:n.config.maxCharsResponseReached}]})),a.preventDefault())})}},{key:"animateResponseBubble",value:function(a,b,e,f){e.call(this,a)}},{key:"moveResponseNotClickedDown",value:function(a){[].slice.call(this.responses.children).forEach(function(b){return b!==a?b.parentNode.removeChild(b):void 0})}},{key:"createExitModal",value:function(a,b){var e=document.createElement("div");$(e).addClass(a.config.exitMessageModalClass);b.appendChild(e);
        e.innerHTML='<div class="modal" id="cuiExitModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Chalakh: Your Adpative Website Assistant</h5></div><div class="modal-body"><p>I am sorry to see you leave. I hope I was of help. If you do need some assistance, I am just a click away. When we meet again, we will continue where we left.</p><p> Au Revoir! </p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div></div>';
        a.hideExitModal()}},{key:"createConversionModal",value:function(a,b){var e=function(){var e=document.createElement("div");$(e).addClass(a.config.conversionModalClass);b.appendChild(e);return e}();var f='<div class="modal" id="cuiConversionModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"> <h6>'+window.Chalakh.st.firstDripFirstAsk+" </h6></div>";f=function(a){var b=window.Chalakh.st.conversionModalData;a=window.Chalakh.bb.createForm(b,a+'<div class="modal-body"><form id = "conversion-modal-form-response"  data-toggle="validator"  data-probe-id =conversion_modal>',
      "#conversion-modal-form-response");a=window.Chalakh.bb.createFormQR(b,a+'<div class="cui__form__qr__container">');return a+"</div></form></div>"}(f);e.innerHTML=f+'<div class="modal-footer"><button type="button" id= "cui__close__conversion__modal" class="btn" data-dismiss="modal">Close</button></div></div>';$("#cui__close__conversion__modal").on("click",J.handleCloseConversionModalClick);$("#conversion-modal-form-response").on("submit",J.handleConversionModalFormSubmitButtonClick);a.hideConversionModal()}},
    {key:"createLeadConnectionModal",value:function(a,b){var e=function(){var e=document.createElement("div");$(e).addClass(a.config.leadConnectModalClass);b.appendChild(e);return e}();var f='<div class="modal" id="cuiLeadConnectModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"> <h6>'+window.Chalakh.st.secondDripFirstAsk+" </h6></div>";f=function(a){var b=window.Chalakh.st.leadConnectModalData;a=window.Chalakh.bb.createSurvey(b,a+'<div class="modal-body"><form id = "lead-connect-modal-survey-response"  data-toggle="validator"  data-probe-id =lead__connect__modal>',
        "#lead-connect-modal-survey-response");a=window.Chalakh.bb.createSurveyQR(b,a+'<div class="cui__survey__qr__container">');return a+"</div></form></div>"}(f);e.innerHTML=f+'<div class="modal-footer"><button type="button" id= "cui__close__lead__connect__modal" class="btn" data-dismiss="modal">Close</button></div></div>';$("#cui__close__lead__connect__modal").on("click",J.handleCloseLeadConnectModalClick);$("#lead-connect-modal-survey-response").on("submit",J.handleLeadConnectModalSubmitButtonClick);
        a.hideLeadConnectModal()}},{key:"createErrorMessageModal",value:function(a,b){var e=function(){var e=document.createElement("div");$(e).addClass(a.config.errorMessageModalClass);b.appendChild(e);return e}();var f=function(b){b=b+'<div class="modal-body"><p>'+a.config.invalidInputMessage+"</p>";return b+"</div>"}('<div class="modal" id="cuiErrorModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"></div>');e.innerHTML=f+'<div class="modal-footer"><button type="button" id= "cui__close__error__message" class="btn" data-dismiss="modal">Close</button></div></div>';
        $("#cui__close__error__message").click(function(a){});a.hideErrorModal()}},{key:"createAudioModal",value:function(a,b){var e=function(){var e=document.createElement("div");$(e).addClass(a.config.audioModalClass);b.appendChild(e);return e}();e.innerHTML='<div class="modal fade" id="cuiAudioModal"  role="dialog" ><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" id="cui__audio__modal__title"><button type="button" class="cui__close__audio__modal" data-dismiss="modal"><span>Close</span></button></div> <div class="cui__modal__download__gif"><img src="https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/download.gif" class = "img-fluid" alt="not loaded"></div> <div class="modal-body"><object class="embed-responsive-item"><audio  id="cui__audio__object" preload=\'auto\'><source src="https://chalakh-bot-js.s3.us-east-2.amazonaws.com/audio/sound_sample.mp3"><p>Your browser does not support H.264/MP4.</p> </audio><div class="cui__modal__title mt-1"> Showcasing Faculty Expertise with Webinars on Ways to Use Chalakh</div><div class="cui__modal__subtitle mb-4"> Application of Chalakh in Non-Profit Sector</div> </object></div><div class="modal-footer"><div class="img-thumbnail img-fluid btn-group" id="cui__media__control"><a href="#" id = "audio__backward" class="btn btn-inverse mr-1"><i class="fa fa-backward"></i></a><a href="#" id = "audio__stop" class="btn btn-inverse mr-1"><i class="fa fa-stop"></i></a><a href="#" id = "audio__play" class="btn btn-inverse mr-1"><i class="fa fa-play"></i></a><a href="#" id = "audio__pause" class="btn btn-inverse mr-1"><i class="fa fa-pause"></i></a><a href="#" id = "audio__forward" class="btn btn-inverse mr-1"><i class="fa fa-forward"></i></a><a href="#" id = "audio__timer" class="btn btn-inverse ml-1"><span class="audio_timer"> 00:00/00:00</span></a></div></div></div></div></div>';
        (function(){$("#audio__play").click(function(a){B.mediaPlay(c.audioMediaObject,"audio");a.preventDefault()});$("#audio__pause").click(function(a){B.mediaPause(c.audioMediaObject,"audio");a.preventDefault()});$("#audio__stop").click(function(a){B.mediaStop(c.audioMediaObject,"audio");a.preventDefault()});$("#audio__forward").click(function(a){B.mediaForward(c.audioMediaObject,"audio");a.preventDefault()});$("#audio__backward").click(function(a){B.mediaBackward(c.audioMediaObject,"audio");a.preventDefault()})})();
        Chalakh.runtime.audioMediaObject=$("#cui__audio__object")[0];a.hideAudioModal()}},{key:"createCpatchAudioObject",value:function(a,b){var e=document.createElement("div");$(e).addClass(a.config.cpatchAudioContainerClass);b.appendChild(e);e.innerHTML='<audio  id="cui__cpatch__audio__object" preload=\'auto\'><source src="https://chalakh-bot-js.s3.us-east-2.amazonaws.com/audio/sound_sample.mp3"><p>Your browser does not support H.264/MP4.</p> </audio>';Chalakh.runtime.cpatchAudioMediaObject=$("#cui__cpatch__audio__object")[0]}},
    {key:"createVideoModal",value:function(a,b){var e=function(){var e=document.createElement("div");$(e).addClass(a.config.videoModalClass);b.appendChild(e);return e}();e.innerHTML='<div class="modal fade" id="cuiVideoModal"  role="dialog" ><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" id="cui__modal__title"> <h6> how are things </h6><button type="button" class="cui__close__video__modal" data-dismiss="modal"><span>Close</span></button></div> <div class="modal-body"><object class="embed-responsive-item"><video  id="cui__video__object" poster="https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/download.gif" preload=\'auto\'><source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4" type="video/mp4"><p>Your browser does not support H.264/MP4.</p> </video> </object></div><div class="modal-footer"><div class="img-thumbnail img-fluid btn-group" id="cui__media__control"><a href="#" id = "video__backward" class="btn btn-inverse mr-1"><i class="fa fa-backward"></i></a><a href="#" id = "video__stop" class="btn btn-inverse mr-1"><i class="fa fa-stop"></i></a><a href="#" id = "video__play" class="btn btn-inverse mr-1"><i class="fa fa-play"></i></a><a href="#" id = "video__pause" class="btn btn-inverse mr-1"><i class="fa fa-pause"></i></a><a href="#" id = "video__forward" class="btn btn-inverse mr-1"><i class="fa fa-forward"></i></a><a href="#" id = "video__timer" class="btn btn-inverse ml-1"><span class="timer"> 00:00/00:00</span></a></div></div></div></div></div>';
        Chalakh.runtime.videoMediaObject=$("#cui__video__object")[0];(function(){$("#video__play").click(function(a){B.mediaPlay(c.videoMediaObject,"video");a.preventDefault()});$("#video__pause").click(function(a){B.mediaPause(c.videoMediaObject,"video");a.preventDefault()});$("#video__stop").click(function(a){B.mediaStop(c.videoMediaObject,"video");a.preventDefault()});$("#video__forward").click(function(a){B.mediaForward(c.videoMediaObject,"video");a.preventDefault()});$("#video__backward").click(function(a){B.mediaBackward(c.videoMediaObject,
          "video");a.preventDefault()})})();a.hideVideoModal()}},{key:"createImageModal",value:function(a){var b=0,e,f,h;var c=function(){var a=document.createElement("div");$(a).addClass(Chalakh.chat.config.imageModalClass);document.body.appendChild(a);return a}();var g='<div class="modal fade" id="cuiImageModal"  role="dialog" ><div id="imageCarouselControlID" class="carousel slide carousel-fade" role="document" data-ride="carousel" data-wrap="true" data-touch ="true" ><div class="carousel-inner">';try{a.forEach(function(a){e=
        a.imgTitle;f=a.imgSubtitle;h=a.imgSrc;g=d.makeCarouselItemActiveOrInactive(b,g);b+=1;a=g+='<div class="modal-content">';a+='<div class="modal-header"><div class="cui__modal__header__title__subtitle">';void 0!=e&&(a=a+'<div class="cui__modal__image__title">'+e+"</div>");void 0!=f&&(a=a+'<div class="cui__modal__image__subtitle">'+f+"</div>");a=g=a+'</div><button type="button" class=" cui__close__image__modal" data-dismiss="modal"><span>Close</span></button></div>';a=a+' <div class="modal-body"><div class ="img-thumbnail img-fluid cui__thumbnail__descriptor"><img class="d-block w-100" src="'+
      h+'" alt="First slide">';g=a+"</div>";g+='</div><div class="modal-footer "></div>';g+="</div>";g+="</div>"})}catch(l){d.handleError("err_68")}g+='</div><a class="carousel-control-prev" href="#imageCarouselControlID" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span></a><a class="carousel-control-next" href="#imageCarouselControlID" role="button" data-slide="next"><span class="carousel-control-next-icon"></span></a>';g+="</div></div>";c.innerHTML=g}},{key:"createBulletModal",
      value:function(a,b){function e(a){try{c=a[0].bulletGroupHeader,l=a[0].bulletGroupStrings}catch(K){d.handleError("err_69")}}function f(a,b){b+=' <div class="modal-body">';b+='<div class = "cui__bullet__msg__body">';try{a.forEach(function(a,f){e(a);b=b+'<div class = "cui__bullet__group__header">'+c+"</div> ";l.forEach(function(a,e){try{g=a[0],1==a.length?k=q=" ":2==a.length?(q=a[1],k=" "):(q=a[1],k=a[2])}catch(P){d.handleError("err_68")}var f=b;f=f+'<ul class=\'\'>  <li><div class = "cui__bullet__items "><div class = "cui__bullet__first__column__string">'+
        g+"</div> ";void 0!=q&&null!=q&&" "!=q&&(f=f+'<div class = "cui__bullet__second__column__string">'+q+"</div> ");void 0!=k&&null!=k&&" "!=k&&(f=f+'<div class = "cui__bullet__third__column__string">'+k+"</div> ");b=f+"</div></li>  </ul>"})})}catch(G){d.handleError("err_68")}b+="</div>";return b+="</div>"}var h=0,c,g,l,q,k;var y=function(){var a=document.createElement("div");$(a).addClass(Chalakh.chat.config.bulletModalClass);document.body.appendChild(a);return a}();var v='<div class="modal fade" id="cuiBulletModal"  role="dialog" ><div id="bulletCarouselControlID" class="carousel slide carousel-fade" role="document" data-ride="carousel" data-wrap="true" data-touch ="true"><div class="carousel-inner">';
        a.forEach(function(a,b){v=d.makeCarouselItemActiveOrInactive(h,v);h+=1;v+='<div class="modal-content">';v+='<div class="modal-header"><button type="button" class=" cui__close__bullet__modal" data-dismiss="modal"><span>Close</span></button></div>';v=f(a,v);v+='<div class="modal-footer "></div>';v+="</div>";v+="</div>"});v+='</div><a class=" carousel-control-prev" href="#bulletCarouselControlID" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span></a><a class=" carousel-control-next" href="#bulletCarouselControlID" role="button" data-slide="next"><span class="carousel-control-next-icon"></span></a>';
        v+="</div>";v+="</div>";y.innerHTML=v}},{key:"createNodeDisplayTitleAndSubtitle",value:function(a){function b(a,b){var e="";try{for(var f=a.rs_obj.pr_obj.p_rdo,h=b[0].split("-")[1],c=0;c<f.length;c++){var g=f[c][0].da_ddf;g.value==h&&(e=g.label)}}catch(H){d.handleError("err_70x")}return e}function e(){var a=c.displayedThemeNodes.length-1;return 0!=a&&(f=a-1,"searchNode"==d.findNodCategory(f))?!0:!1}var f;try{var h=d.createTextObjFromPatches("_ndn",c.currentNodeID);if(null!=h&&0!=h.length){var g=h[0][0].da_ddf.text[0];
        null==g&&(g="")}else if(e()){var r=d.findNodeObj(f);g=b(r,c.segmentSelectionArrayOfArrays[c.segmentSelectionArrayOfArrays.length-1])}else g="";var l=""}catch(q){d.handleError("err_70")}a='<div class = "cui__cdo__section__header">';""!=g&&void 0!=g&&(a=a+'<div class = "cui__cdo__section__header__title mb-1">'+g+"</div> ");""!=l&&void 0!=l&&(a=a+'<div class = ".cui__cdo__section__header__subtitle" class="mb-1">'+l+"</div>");return a+"</div>"}},{key:"showErrorPopUp",value:function(a,b){d.unhideErrorModal();
        $(".cui__error__modal .modal-body p").text(a);$("#cuiErrorModal").modal("show");"openNewWindow"==b&&void 0!=window.Chalakh.runtime.thankYouPage&&setTimeout(function(){window.open(window.Chalakh.runtime.thankYouPage,"_top")},k.delayBeforeOpeningClientWindow)}},{key:"showConversionModal",value:function(a){d.unhideConversionModal();$(".cui__conversion__modal .modal-body p").text(a);$("#cuiConversionModal").modal("show")}},{key:"showLeadConnectModal",value:function(a){d.unhideLeadConnectModal();$("#cuiLeadConnectModal").modal("show")}},
    {key:"makeCarouselItemActiveOrInactive",value:function(a,b){return 0==a?b+'<div class="carousel-item active">':b+'<div class="carousel-item">'}},{key:"createCarouselControls",value:function(a,b){a=a+'<a class="carousel-control-prev" href="#'+b+'" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span></a>';return a=a+'<a class="carousel-control-next" href="#'+b+'" role="button" data-slide="next"> <span class="carousel-control-next-icon"></span></a>'}},{key:"findExitNodeInInterruptMotif",
      value:function(){var a=C.findExitThemeName();a=C.findExitTheme(a);d.findThemeNodes("cso_int",Q,a);try{var b=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var e=Q[b]}catch(f){d.handleError("err_72")}return e}},{key:"exitBot",value:function(a,b){function e(){h=d.findExitNodeInInterruptMotif();try{setTimeout(function(){d.displaySubsequentNodeObjInTheme(h,!1,void 0,"nextNodeInTheme")},k.delayBetweenExitMotifNodesAndMainMotifNodes)}catch(m){d.handleError("err_73")}}function f(){h=d.findExitNodeInInterruptMotif();
        try{setTimeout(function(){d.displaySubsequentNodeObjInTheme(h,!1,void 0,"nextNodeInTheme")},k.delayBetweenExitMotifNodesAndMainMotifNodes)}catch(m){d.handleError("err_73")}}var h;try{a.preventDefault()}catch(m){d.handleError("err_73")}u.sendExitData(c.currentNodeID,c.chrIDObject.chrID,"botExit","userGenerated");(function(){for(var a=0;a<c.timeouts.length;a++)clearTimeout(c.timeouts[a]);c.timeouts=[]})();"proactiveExitMode"==c.botState?e():f()}},{key:"gracefulErrorExit",value:function(a,b){d.emptyMessageStream();
        d.emptyResponseStream();d.hideHeader();d.hideConversationStream();B.mediaStop(c.audioMediaObject);B.mediaStop(c.videoMediaObject);B.mediaStop(c.cpatchAudioMediaObject)}},{key:"skipCurrentTheme",value:function(a,b){try{a.preventDefault()}catch(m){d.handleError("err_74")}(function(){for(var a=0;a<c.timeouts.length;a++)clearTimeout(c.timeouts[a]);c.timeouts=[]})();var e=C.findSkipTheme();d.findThemeNodes("cso_int",Q,e);try{var f=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var h=Q[f]}catch(m){d.handleError("err_74")}setTimeout(function(){d.displaySubsequentNodeObjInTheme(h,
      !1,void 0,"nextNodeInTheme")},k.delayBetweenExitMotifNodesAndMainMotifNodes)}},{key:"sendResponseToBackEnd",value:function(a,b){var e=d.findCampaignUseCase();var f=$(a).attr("data-probe-id");e&&O.postVisitorData(b);u.sendUserSelectionData(c.currentNodeID,c.chrIDObject.chrID,"userSelection",b,f)}},{key:"emptyMessageStream",value:function(){$(".cui__message__stream").empty()}},{key:"emptyResponseStream",value:function(){$(".cui__response__stream").empty()}},{key:"hideHeader",value:function(){$("#header").addClass("header__hide")}},
    {key:"hideChalakhIframe",value:function(){window.parent.postMessage({requestType:"hideFrame",requestParam:null},"*")}},{key:"wait",value:function(a,b){for(var e=new Date;new Date-e<=a;);b&&eval(b)}},{key:"adjustCSSVarstoMatchDeviceType",value:function(){function a(){var a=document.documentElement;a.style.setProperty("--font-size","0.9rem");a.style.setProperty("--cui__text__message-font-size","0.7rem");a.style.setProperty("--t10__title-font-size","0.8rem");a.style.setProperty("--t10__subtitle-font-size",
      "0.7rem");a.style.setProperty("--t10__tile-height","21vh");a.style.setProperty("--cui__bot__container-pad-right","0");a.style.setProperty("--cui__bot__container-top","0");a.style.setProperty("--cui__bot__container-position","relative");a.style.setProperty("--cui__bot__container-margin-left","0");a.style.setProperty("--cui__bot__container-max-width","100%");a.style.setProperty("--cui__conversation__stream-max-height","90vh");a.style.setProperty("--cui__conversation__stream-min-height","90vh");a.style.setProperty("--header-min-height",
      "10vh");a.style.setProperty("--header-min-border-top-right-radius","0px");a.style.setProperty("--header-min-border-top-left-radius","0px");a.style.setProperty("--header-padding-top","0rem");a.style.setProperty("--header-padding-bottom","0rem");a.style.setProperty("--cui__footer-display","none");a.style.setProperty("--icon-width","95%");a.style.setProperty("--icon-font-size","2.5vw");a.style.setProperty("--cui__tool__tip-right","20%");a.style.setProperty("--chalakh__icon__svg-width","20%");a.style.setProperty("--chalakh__icon__tooltip-width",
      "75%");a.style.setProperty("--modal-margin-left","0");a.style.setProperty("--modal-max-width"," 100%");a.style.setProperty("--modal-width"," 100%");a.style.setProperty("--modal-top"," 12vh");a.style.setProperty("--modal-padding-right","0");a.style.setProperty("--error-modal-width"," 50%");a.style.setProperty("--error-modal-position"," absolute");a.style.setProperty("--error-modal-left"," 25%");a.style.setProperty("--error-modal-top"," 20vh");a.style.setProperty("--conversion-modal-width"," 100%");
        a.style.setProperty("--conversion-modal-position"," absolute");a.style.setProperty("--conversion-modal-left"," 0");a.style.setProperty("--conversion-modal-top"," 7vh");a.style.setProperty("--modal-dialog-margin-right","0");a.style.setProperty("--modal-dialog-margin-left","0");a.style.setProperty("--modal-dialog-margin-top"," 0");a.style.setProperty("--modal-dialog-margin-bottom"," 0");a.style.setProperty("--modal-dialog-max-width"," 100%");a.style.setProperty("--modal-download-gif-width","40%");a.style.setProperty("--modal-download-gif-height",
        "10%");a.style.setProperty("--image-modal-carousel-margin-right","0")}function b(){var a=document.documentElement;a.style.setProperty("--font-size","0.9rem");a.style.setProperty("--cui__text__message-font-size","0.8rem");a.style.setProperty("--t10__title-font-size","0.9rem");a.style.setProperty("--t10__subtitle-font-size","0.8rem");a.style.setProperty("--t10__tile-height","19vh");a.style.setProperty("--cui__bot__container-pad-right","3rem");a.style.setProperty("--cui__bot__container-top","10vh");
        a.style.setProperty("--cui__bot__container-position","relative");a.style.setProperty("--cui__bot__container-margin-left","0");a.style.setProperty("--cui__bot__container-max-width","100%");a.style.setProperty("--cui__conversation__stream-max-height","73vh");a.style.setProperty("--cui__conversation__stream-min-height","73vh");a.style.setProperty("--header-min-height","6vh");a.style.setProperty("--header-min-border-top-right-radius","15px");a.style.setProperty("--header-min-border-top-left-radius","15px");
        a.style.setProperty("--header-padding-top","0rem");a.style.setProperty("--header-padding-bottom","0rem");a.style.setProperty("--cui__footer-display","none");a.style.setProperty("--icon-width","95%");a.style.setProperty("--icon-font-size","2.0vw");a.style.setProperty("--chalakh__icon__svg-width","20%");a.style.setProperty("--cui__tool__tip-right","20%");a.style.setProperty("--chalakh__icon__tooltip-width","80%");a.style.setProperty("--modal-margin-left","0");a.style.setProperty("--modal-max-width",
        " 100%");a.style.setProperty("--modal-width"," 100%");a.style.setProperty("--modal-top"," 18vh");a.style.setProperty("--modal-padding-right","0");a.style.setProperty("--error-modal-width"," 50%");a.style.setProperty("--error-modal-position"," absolute");a.style.setProperty("--error-modal-left"," 25%");a.style.setProperty("--error-modal-top"," 20vh");a.style.setProperty("--conversion-modal-width"," 100%");a.style.setProperty("--conversion-modal-position"," absolute");a.style.setProperty("--conversion-modal-left",
        " 0");a.style.setProperty("--conversion-modal-top"," 7vh");a.style.setProperty("--modal-dialog-margin-right","3rem");a.style.setProperty("--modal-dialog-margin-left","0.1rem");a.style.setProperty("--modal-dialog-margin-top"," 0");a.style.setProperty("--modal-dialog-margin-bottom"," 0");a.style.setProperty("--modal-dialog-max-width"," 100%");a.style.setProperty("--modal-download-gif-width","25%");a.style.setProperty("--modal-download-gif-height","8%");a.style.setProperty("--image-modal-carousel-margin-right",
        "0")}"mobile"==c.device?a():"ipad"==c.device&&b()}},{key:"makeChalakhFrameWide",value:function(){window.parent.postMessage({requestType:"wideFrame",requestParam:c.device},"*");d.wait(1E3)}},{key:"makeChalakhFrameNarrow",value:function(){window.parent.postMessage({requestType:"narrowFrame",requestParam:c.device},"*");d.wait(1E3)}},{key:"hideDownloadGif",value:function(){$(".cui__modal__download__gif").addClass("cui__modal__download__gif__hide")}},{key:"unhideDownloadGif",value:function(){$(".cui__modal__download__gif").removeClass("cui__modal__download__gif__hide")}},
    {key:"hideErrorModal",value:function(){$(".cui__error__modal").addClass("cui__error__modal__hide")}},{key:"unhideErrorModal",value:function(){$(".cui__error__modal").removeClass("cui__error__modal__hide")}},{key:"unhideLeadConnectModal",value:function(){$(".cui__lead__connect__modal").removeClass("cui__error__modal__hide")}},{key:"hideLeadConnectModal",value:function(){$(".cui__lead__connect__modal").removeClass("cui__error__modal__hide")}},{key:"unhideConversionModal",value:function(){$(".cui__conversion__modal").removeClass("cui__error__modal__hide")}},
    {key:"hideConversionModal",value:function(){$(".cui__conversion__modal").addClass("cui__error__modal__hide")}},{key:"hideLeadConnectModal",value:function(){$(".cui__lead__connect__modal").addClass("cui__error__modal__hide")}},{key:"hideExitModal",value:function(){$(".cui__exit__modal").addClass("cui__exit__modal__hide")}},{key:"unhideExitModal",value:function(){$(".cui__exit__modal").removeClass("cui__exit__modal__hide")}},{key:"hideAudioModal",value:function(){$(".cui__audio__modal").addClass("cui__audio__modal__hide")}},
    {key:"unhideAudioModal",value:function(){$(".cui__audio__modal").removeClass("cui__audio__modal__hide")}},{key:"hideVideoModal",value:function(){$(".cui__video__modal").addClass("cui__video__modal__hide")}},{key:"unhideVideoModal",value:function(){$(".cui__video__modal").removeClass("cui__video__modal__hide")}},{key:"unhideHeader",value:function(){$("#header").removeClass("header__hide")}},{key:"hideConversationStream",value:function(){$(".cui__conversation__stream").addClass("cui__conversation__stream__hide")}},
    {key:"unhideConversationStream",value:function(){$(".cui__conversation__stream").removeClass("cui__conversation__stream__hide")}},{key:"hideBotContainer",value:function(){$(".cui__bot__container").addClass("bot__container__hide")}},{key:"unhideBotContainer",value:function(){$(".cui__bot__container").removeClass("bot__container__hide")}},{key:"unhideChalakhIcon",value:function(){$("#chalakhIcon").addClass("chalakhIcon__show")}},{key:"hideChalakhIcon",value:function(){$("#chalakhIcon").removeClass("chalakhIcon__show")}},
    {key:"unhidePaymentAmountOtherOption",value:function(){$("#cui__payment__other__choice__container").removeClass("hide__other__choice")}},{key:"widenMessageStream",value:function(){$(".cui__conversation__stream").css({"max-width":"40%"})}},{key:"unwidenMessageStream",value:function(){$(".cui__conversation__stream").css({"max-width":"30%"})}},{key:"showBorderToMessageStream",value:function(a,b){$(".cui__message__stream").addClass("border__to__message__stream")}},{key:"hideBorderToMessageStream",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     b){}},{key:"registerBubbleType",value:function(a,b){this.bubbleTypes[a]=b}},{key:"scrollIntoView",value:function(a){a=k.scrollPeriod;var b=window.innerHeight;var e=$(".cui__header").prop("scrollHeight"),f=$(".cui__message__stream").prop("scrollHeight"),d=$(".cui__response__stream").prop("scrollHeight");b=e+f+d+k.iframeAnchorIDTop*b-b;0<b&&$(".cui__conversation__stream").animate({scrollTop:b+300},a)}},{key:"getAbsoluteRect",value:function(a){try{var b=a.getBoundingClientRect();return{x:b.left+window.pageXOffset,
        y:b.top+window.pageYOffset}}catch(e){d.handleError("err_75")}}},{key:"findThemeNodesNotTaggedAsNever",value:function(a,b,e,f){try{for(var h=0;h<e.length;h++){var c=e[h].nmobj.nconth;for(var g=0;g<c.length;g++)if(c[g].th_m==f&&"never"!=e[h].nmobj.dinod){var l=e[h]._nid;var k=c[g].orinth;var p=e[h].nmobj.nodcat;a.push({motif:b,theme:f,_nid:l,index:h,order:k,dinod:!0,nodcat:p})}}}catch(y){d.handleError("err_76")}return a}},{key:"findThemeNodes",value:function(a,b,e){c.currentThemeNodes=[];c.displayedThemeNodes=
        [];c.currentTheme=e;c.currentMotif=a;c.currentThemeNodes=d.findThemeNodesNotTaggedAsNever(c.currentThemeNodes,a,b,e);(function(){function a(){for(var a=!1,b=0;b<c.currentThemeNodes.length;b++)1E3<c.currentThemeNodes[b].order&&(a=!0);if(a)for(b=0;b<c.currentThemeNodes.length;b++)c.currentThemeNodes[b].pseudoOrder=b;else for(b=0;b<c.currentThemeNodes.length;b++)c.currentThemeNodes[b].pseudoOrder=c.currentThemeNodes[b].order}try{a(),c.currentThemeNodes.sort(function(a,b){return parseFloat(a.pseudoOrder)-
      parseFloat(b.pseudoOrder)})}catch(h){d.handleError("err_77")}})();c.previousNode=null;c.currentNode=k.orderOfFirstNodeInTheme;c.nextNode=d.findForwardNodeIndex(c.currentNode);c.afterNextNode=d.findForwardNodeIndex(c.nextNode);c.afterNextNextNode=d.findForwardNodeIndex(c.afterNextNode)}},{key:"findAllThemeNodesInMotif",value:function(a,b,e,f){var h=[];h=d.findThemeNodesNotTaggedAsNever(h,a,b,e);try{if(0!=h.length){h.sort(function(a,b){return parseFloat(a.order)-parseFloat(b.order)});var c=h[0].index;
        return void 0==c||f?h:b[c]}"cso_con"!=a&&d.logWarning("warn_1");return h}catch(r){d.handleError("err_78")}}},{key:"getCurrentNodeSkipType",value:function(a){try{var b=a.rs_obj.qr_obj.qr_mobj.skty}catch(e){d.handleError("err_78D")}return b}},{key:"getCurrentNodeSkipLogic",value:function(a){try{var b=a.rs_obj.qr_obj.qr_mobj.sklog}catch(e){d.handleError("err_78D")}return b}},{key:"getCurrentNodeOrder",value:function(a){try{var b=a.nmobj.nconth;for(a=0;a<b.length;a++)if(b[a].th_m==c.currentTheme){var e=
        b[a].orinth;break}}catch(f){d.handleError("err_78D")}return e}},{key:"getNodeObjectUsingIndexInThemeNodesArray",value:function(a){try{var b=c.currentThemeNodes[a].index;var e=c.currentThemeNodes[a].motif;var f=E[e];return f[b]}catch(h){d.handleError("err_79")}}},{key:"getNodeToDisplay",value:function(a,b){if("previousNodeInTheme"==a){c.currentNode=d.findBackwardNodeIndex(c.currentNode);c.previousNode=d.findBackwardNodeIndex(c.currentNode);c.nextNode=d.findForwardNodeIndex(c.currentNode);c.afterNextNode=
        d.findForwardNodeIndex(c.nextNode);c.afterNextNextNode=d.findForwardNodeIndex(c.afterNextNode);var e=d.getNodeObjectUsingIndexInThemeNodesArray(c.currentNode)}else{e=d.findNodeObj(c.currentNode);switch(d.getCurrentNodeSkipType(e)){case "default":var f=d.getForwardNodeObjForDefaultSkip(e,a,!0);break;case "jump":f=d.getForwardNodeObjForJumpSkip(e,a,!0);break;case "complex":f=d.getForwardNodeObjForComplexSkip(e,b,a,!0);break;default:d.handleError("err_78E")}e=f}return e}},{key:"resetForwardNodeOrderPointers",
      value:function(a,b,e){null==e&&console.log("node order is null - something messed up");c.previousNode=a;c.currentNode=b;switch(e){case "nextNodeInTheme":c.nextNode=d.findForwardNodeIndex(c.currentNode);c.afterNextNode=d.findForwardNodeIndex(c.nextNode);c.afterNextNextNode=d.findForwardNodeIndex(c.afterNextNode);break;case "nodeAfterNextNodeInTheme":c.nextNode=d.findForwardNodeIndex(c.currentNode);c.afterNextNode=d.findForwardNodeIndex(c.nextNode);c.afterNextNextNode=d.findForwardNodeIndex(c.afterNextNode);
        break;case "nodeAfterNextNextNodeInTheme":c.nextNode=d.findForwardNodeIndex(c.currentNode);c.afterNextNode=d.findForwardNodeIndex(c.nextNode);c.afterNextNextNode=d.findForwardNodeIndex(c.afterNextNode);break;case "lastNodeInTheme":c.nextNode=null;c.afterNextNode=null;c.afterNextNextNode=null;break;default:console.log("unknown node order")}}},{key:"findBackwardNodeIndex",value:function(a){function b(a){try{for(;0<=a;a--){if(0>a-1||"searchNode"!=c.displayedThemeNodes[a-1].nodcat)return a;c.displayedThemeNodes.pop()}}catch(r){d.handleError("79B")}}
        function e(a){try{var b=c.displayedThemeNodes[a].index;a=b-1;var e=b+1,f=c.currentThemeNodes[b].order,h=b=void 0;0<=a&&(b=c.currentThemeNodes[a].order);e<=c.currentThemeNodes.length-1&&(h=c.currentThemeNodes[e].order);return f==b||f==h?!0:!1}catch(y){d.handleError("err_79C")}}function f(a){try{for(;0<=a;a--){if(!e(a))return a;c.displayedThemeNodes.pop()}}catch(r){d.handleError("err_79D")}}if(0!=a&&null!=a&&void 0!=a)for(a=c.displayedThemeNodes.length-1;0<=a;){var h=a-1;a=d.findNodCategory(h);return"searchNode"==
        a?(a=b(h),c.displayedThemeNodes[a].index):"contentNode"==a&&e(h)?(a=f(h),a=b(a),c.displayedThemeNodes[a].index):c.displayedThemeNodes[h].index}}},{key:"findForwardNodeIndex",value:function(a){try{if(a==c.currentThemeNodes.length-1||null==a)return null;for(a+=1;a<c.currentThemeNodes.length;a++)if(1==c.currentThemeNodes[a].dinod)return a}catch(b){d.handleError("80A")}return null}},{key:"findCampaignUseCase",value:function(){try{var a=x[c.chrIDObject.chrIndex].c_r_m.useCase}catch(b){d.handleError("err_80B")}return 1==
      a?!0:!1}},{key:"getForwardNodeObjForDefaultSkip",value:function(a,b,e){var f=c.currentNode+1;a=d.getNodeObjectUsingIndexInThemeNodesArray(f);e&&d.resetForwardNodeOrderPointers(c.currentNode,f,b);return a}},{key:"getForwardNodeObjForJumpSkip",value:function(a,b,e){a=d.getCurrentNodeSkipLogic(a)[0].skipTo;var f=d.findIndexInThemeNodesArrayFromOrder(a);a=d.getNodeObjectUsingIndexInThemeNodesArray(f);e&&d.resetForwardNodeOrderPointers(c.currentNode,f,b);return a}},{key:"getForwardNodeObjForComplexSkip",
      value:function(a,b,e,f){a=d.getCurrentNodeSkipLogic(a);b=b[0].split("-")[1];for(var h=0;h<a.length;h++)if(a[h].resp==b){var g=a[h].skipTo;g=d.findIndexInThemeNodesArrayFromOrder(g);break}a=d.getNodeObjectUsingIndexInThemeNodesArray(g);f&&d.resetForwardNodeOrderPointers(c.currentNode,g,e);return a}},{key:"findIndexInThemeNodesArrayFromOrder",value:function(a){for(var b,e=0;e<c.currentThemeNodes.length;e++)if(c.currentThemeNodes[e].order==a){b=e;break}return b}},{key:"findNodeCategory",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              b){try{if("previousNodeInTheme"==a){var e=c.previousNode;var f=c.currentThemeNodes[e].index;var h=c.currentThemeNodes[e].motif;var g=E[h];return g[f].nmobj.nodcat}var r=d.findNodeObj(c.currentNode);var l=d.getCurrentNodeSkipType(r);switch(l){case "default":var k=d.getForwardNodeObjForDefaultSkip(r,a,!1);break;case "jump":k=d.getForwardNodeObjForJumpSkip(r,a,!1);break;case "complex":k=d.getForwardNodeObjForComplexSkip(r,b,a,!1);break;case "end":return null;default:d.handleError("err_78F")}return k.nmobj.nodcat}catch(p){d.handleError("err_80C")}}},
    {key:"findNodeObj",value:function(a){try{var b=c.currentThemeNodes[a].index;var e=c.currentThemeNodes[a].motif;var f=E[e];return f[b]}catch(h){d.handleError("err_81")}}},{key:"findNodCategory",value:function(a){try{return c.displayedThemeNodes[a].nodcat}catch(b){d.handleError("79B")}}},{key:"findCurrentNodeContentDisplayCategory",value:function(){var a;try{var b=c.currentNode;var e=c.currentThemeNodes[b].index;var f=c.currentThemeNodes[b].motif;var h=E[f];var g=h[e];return a=g.ms_obj.conobj.conmobj.cdc}catch(r){d.handleError("err_81A")}}},
    {key:"findNodeTargetAudience",value:function(a){switch(a){case "nextNodeInTheme":var b=c.nextNode;break;case "previousNodeInTheme":b=c.previousNode;break;case "nodeAfterNextNodeInTheme":b=c.afterNextNode;break;case "nodeAfterNextNextNodeInTheme":b=c.afterNextNextNode;break;case "currentNode":b=c.currentNode;break;case "lastNodeInTheme":b=c.currentThemeNodes.length-1;break;default:d.handleError("err_82")}null!=b&&void 0!=b||d.handleError("err_82");try{var e=c.currentThemeNodes[b].index;var f=c.currentThemeNodes[b].motif;
        var h=E[f];return h[e].nmobj.taraud}catch(m){d.handleError("err_83")}}},{key:"getSelectionValue",value:function(a){var b;0==a.length||1<a.length?d.handleError("err_83A"):b=a.shift();try{var e=b.split("-");return e[1]}catch(f){d.handleError("err_83A")}}},{key:"getMessageDisplayTimeInterval",value:function(a,b){var e=this.config.delayBetweenMessages;return 0==b?e+this.config.delayBeforeFirstMessage:e}},{key:"suppressContextualNodesInCSO",value:function(a,b){var e,f,h;try{for(e in a)a[e].forEach(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   e){f=a.nmobj.taraud;h=f.split(":");h[0]==b&&(a.nmobj.dinod="never")})}catch(m){d.handleError("err_84")}}},{key:"suppressNodesInStartMotif",value:function(a,b){function e(a){return a.order===this}function f(){try{for(var a=0;a<H.length;){y=H[a].order;v=H.filter(e,y);for(var b=0;b<v.length;b++)if(h=v[b].index,c=N[h].nmobj.taraud,g=c.split(":"),1==g.length)switch(l=g[0],l){case "all":break;case "anonymous":w!=l&&(N[h].nmobj.dinod="never");break;default:console.log("err_10 "+l)}else switch(l=g[0],q=g[1],
        l){case "attendee":if(w!=l||p!=q)N[h].nmobj.dinod="never";break;case "sponsor":if(w!=l||p!=q)N[h].nmobj.dinod="never";break;case "anonymous":w!=l&&(N[h].nmobj.dinod="never");break;default:console.log("err_11 "+l)}a+=v.length}}catch(F){d.handleError("err_38")}}var h,c,g,l,q,p,y,v;if("anon"==a)var w="anonymous";else"attn"==a?(w="attendee",u.setItem(k.visitorContext,"attendee",k.mediumExpirationPeriod,k.cookiePath),"renew"==b&&(p="renewal")):"spons"==a?(u.setItem(k.visitorContext,"sponsor",k.mediumExpirationPeriod,
      k.cookiePath),"renew"==b&&(p="renewal")):(w="anonymous",console.log("err_9"));try{for(var K=0;K<x.length;K++){var G=x[K].c_r_m.cso_sta[0].th_m;var H=d.findAllThemeNodesInMotif("cso_sta",N,G,!0);f()}}catch(z){d.handleError("err_85")}}},{key:"suppressContextualThemesInCSO",value:function(a,b){}},{key:"createTextObjFromSentenceObj",value:function(a){var b,e,f,h,g,r=[],l;try{a.forEach(function(a,m){b="";a.fragmentObject.forEach(function(a,m){"parameteric"!=a.fragmentType?1==a.fragments.length?null!=a.fragments[0]&&
      (b+=a.fragments[0]):(g=S.getRandomMinMax(0,a.fragments.length-1),null!=a.fragments[g]&&(b+=a.fragments[g])):(e=a.fragments[0].split(":"),f=e[0],h=e[1],"currentTheme"==h?h=c.currentTheme:"currentNode"==h&&(h=c.currentNodeID),l=d.createTextObjFromPatches(f,h),""!=b?"undefined"!=l[0][0].da_ddf.text[0]&&(b+=l[0][0].da_ddf.text[0]):r=r.concat(l))});""!=b&&r.push([{da_ddf:{text:[b]}}])})}catch(q){d.handleError("err_86")}return r}},{key:"createTextObjFromPatches",value:function(a,b){var e,f;try{W.forEach(function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      f){for(var d in b)d==a&&(e=b[a])})}catch(h){d.handleError("err_87")}try{e.forEach(function(a,e){for(var d in a)a[d]==b&&(f=a)})}catch(h){d.handleError("err_87")}return void 0==f?null:d.createTextObjFromSentenceObj(f.sentenceObject)}}]),g}(),ha=function(){function d(a){return L(this,d),this.config=$.extend({},a),this}return M(d,[{key:"parseTextTemplate",value:function(a){return"<span>"+a.text+"</span>"}},{key:"render",value:function(a,b){var e=document.createElement("div");return"respObject"==a?e.classList.add(b.config.responseBubbleClass):
    e.classList.add(b.config.messageBubbleClass),e.innerHTML=this.parseTextTemplate(this.config),e}}]),d}(),ia=function(){function d(a){return L(this,d),this.config=$.extend({},a),this}return M(d,[{key:"parseQRNodeSelectorTemplate",value:function(a){var b,e;a=a.qrdo;var f='<div id = "qr-response">';a.forEach(function(a,d){b=a.qr_opty;e=A.getQuickReplyOptionLabels(b);var h=A.getDataNextNode(b);f=f+'<input class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 qr-button cui__qr__button btn btn-outline-primary mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-1" type="button" value="'+
    e+'" data-next-node="'+h+'">'});f+="</div>";return f+="</div>"}},{key:"render",value:function(a,b){var e=document.createElement("div");return"respObject"==a?e.classList.add(b.config.responseBubbleClass):e.classList.add(b.config.messageBubbleClass),e.innerHTML=this.parseQRNodeSelectorTemplate(this.config),e}}]),d}(),ja=function(){function d(a){return L(this,d),this.config=$.extend({},a),this}return M(d,[{key:"parseQRImgSelectorTemplate",value:function(a){var b,e,f,d;var c=a.qrdo;var g=0;var l=[];c.forEach(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           b){void 0!=a.ntosh&&(l=a.ntosh.split("-"));2==l.length&&(g+=1);l=[]});a=c.slice(0,g);c=c.slice(g,c.length);0!=a.length&&(b='<div class = "cui__imgselector__qr mb-2">');a.forEach(function(a,c){e=a.qr_opty;f=A.getQuickReplyOptionLabels(e);d=a.ntosh;b=b+'<input class="qr-button cui__imgselector__button mr-2 mr-sm-2 mr-md-2 mr-lg-2 mr-xl-2 mb-2" type="button" value="'+f+'" data-next-node="'+d+'">'});0!=a.length?(b+="</div>",b+='<div id = "qr-response">'):b='<div id = "qr-response">';c.forEach(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  d){e=a.qr_opty;f=A.getQuickReplyOptionLabels(e);var c=A.getDataNextNode(e);b=b+'<input class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 qr-button cui__qr__button btn btn-outline-primary mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-1" type="button" value="'+f+'" data-next-node="'+c+'">'});return b+="</div></div>"}},{key:"render",value:function(a,b){var e=document.createElement("div");return"respObject"==a?e.classList.add(b.config.responseBubbleClass):e.classList.add(b.config.messageBubbleClass),e.innerHTML=
      this.parseQRImgSelectorTemplate(this.config),e}}]),d}(),ka=function(){function d(a){return L(this,d),this.config=$.extend({},a),this}return M(d,[{key:"parseFormTemplate",value:function(a){var b=A.createNodeDisplayTitleAndSubtitle();var e=A.getDataProbeID(a.nodeObj);b=A.createForm(a,b+'<form id = "form-response"  data-toggle="validator"  data-probe-id ='+e+">","#form-response");b=A.createFormQR(a,b+'<div class="cui__form__qr__container">');return b+"</div></form>"}},{key:"render",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         b){var e=document.createElement("div");return"respObject"==a?e.classList.add(b.config.responseBubbleClass):e.classList.add(b.config.messageBubbleClass),e.innerHTML=this.parseFormTemplate(this.config),e}}]),d}(),la=function(){function d(a){return L(this,d),this.config=$.extend({},a),this}return M(d,[{key:"parseSurveyTemplate",value:function(a){var b=A.createNodeDisplayTitleAndSubtitle();var e=A.getDataProbeID(a.nodeObj);b=A.createSurvey(a,b+'<form id = "survey-response"  data-probe-id ='+e+">","#survey-response");
      b=A.createSurveyQR(a,b+'<div class="cui__survey__qr__container">');return b+"</div></form>"}},{key:"render",value:function(a,b){var e=document.createElement("div");return"respObject"==a?e.classList.add(b.config.responseBubbleClass):e.classList.add(b.config.messageBubbleClass),e.innerHTML=this.parseSurveyTemplate(this.config),e}}]),d}(),ma=function(){function c(a){return L(this,c),this.config=$.extend({},a),this}return M(c,[{key:"parseRespTileTemplate",value:function(a,b,e){b=a.prdo;var f=a.qrdo,c=
      A.createNodeDisplayTitleAndSubtitle();a=A.getDataProbeID(a.nodeObj);c=c+'<div id = "tile-response" data-probe-id ='+a+">";switch(e){case "t8":c=this.parseT8Tile(c,b);break;case "t9":d.addPrefilledSelectionsFromPastToVisitorSelection(b);c=b.length>k.maxTilesInT9Group?this.createRespTilesWithCarousel(this,b,f,e,k.maxTilesInT9Group,c):c=this.parseT9Tile(c,b,f);break;case "t10":c=this.parseT10Tile(c,b);break;case "t11":c=this.parseT11Tile(c,b);break;default:console.log("err_14 "+e)}return c+"</div>"}},
    {key:"parseMsgTileTemplate",value:function(a,b,e){a=a.ms_obj.conobj.cdo;switch(e){case "t1":var f=a.length>k.maxTilesInT1Group?this.createMsgTilesWithCarousel(a,e,k.maxTilesInT1Group):this.createMsgTilesWithoutCarousel(a,e);break;case "t2":f=a.length>k.maxTilesInT2Group?this.createMsgTilesWithCarousel(a,e,k.maxTilesInT2Group):this.createMsgTilesWithoutCarousel(a,e);break;case "t3":f=a.length>k.maxTilesInT3Group?this.createMsgTilesWithCarousel(a,e,k.maxTilesInT3Group):this.createMsgTilesWithoutCarousel(a,
        e);break;case "t4":f=this.parseT4Tile(a);break;case "t5":f=this.createMsgTilesWithCarousel(a,e,k.maxTilesInT5Group);break;case "t6":f=a.length>k.maxTilesInT6Group?this.createMsgTilesWithCarousel(a,e,k.maxTilesInT6Group):this.createMsgTilesWithoutCarousel(a,e);break;case "t7":f=a.length>k.maxTilesInT7Group?this.createMsgTilesWithCarousel(a,e,k.maxTilesInT7Group):this.createMsgTilesWithoutCarousel(a,e);break;default:console.log("err_14 "+e)}return f}},{key:"createMsgTileGroupsWithCarousel",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    b,e){var f,c,g=0,r=this;var l=A.createNodeDisplayTitleAndSubtitle();l+='<div class = "cui__tiles__msg__body">';l=l+'<div id="tileCarouselControlID" class="carousel slide carousel-fade" data-interval= "'+k.carouselIntervalPeriod+'"data-pause="hover" data-ride="carousel" data-wrap ="true" data-touch ="true"> ';l+='<div class="carousel-inner">';a.forEach(function(a,h){var m=0;f=void 0;for(var k=0;k<a.length;k++){var q=a[k];if(q[1].da_meob.da_disob){c=q[0].da_ddf;0==m&&(q=l,q=d.makeCarouselItemActiveOrInactive(g,
      q),void 0==f?(f='<div class = "cui__tile__group__title col-12 mt-1 mb-1">'+c.tileGroupTitle+"</div> ",q+=f):q+=f,l=q,g+=1,m+=1);q=b;var p=l,G=c,H=m;switch(q){case "t1":p=r.parseT1Tile(p,G);break;case "t2":p=r.parseT2Tile(p,G);break;case "t3":p=r.parseT3Tile(p,G);break;case "t5":p=r.parseT5Tile(p,G);break;case "t6":p=r.parseT6Tile(p,G,H);break;case "t7":p=r.parseT7Tile(p,G);break;default:console.log("err_12 "+q)}l=p;m+=1;m==e&&(l+="</div>",m=0)}k==a.length-1&&0!==m&&(l+="</div>")}});l+="</div>";l=
        d.createCarouselControls(l,"tileCarouselControlID");l+="</div>";return l+="</div>"}},{key:"findTileObjectCategory",value:function(a){a=a[0].da_ddf;if(void 0!=a.tile){a=a.tile[0];var b="tileObject"}else a=a.tileGroupName[0],b="tileGroupName";return{tileObj:a,tileObjType:b}}},{key:"createTileGroupHeaderHTML",value:function(a,b){var e=b.tileGroupTitle;void 0!=e&&(a+='<div class = "cui__tile__group__title col-12 mt-1 mb-1">'+e+"</div> ");return a}},{key:"createMsgTilesWithCarousel",value:function(a,b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          e){var f=0,c=0,g=this,r=!1;var l=A.createNodeDisplayTitleAndSubtitle();l+='<div class = "cui__tiles__msg__body">';l=l+'<div id="tileCarouselControlID" class="carousel slide carousel-fade" data-interval= "'+k.carouselIntervalPeriod+'"data-pause="hover" data-ride="carousel" data-wrap ="true" data-touch ="true"> ';l+='<div class="carousel-inner">';var q=!1;a.forEach(function(h,m){if(h[1].da_meob.da_disob){r=!0;var k=h[0].da_ddf;0!=c||q||(l=d.makeCarouselItemActiveOrInactive(f,l),f+=1);var w=l;switch(b){case "t1":w=
        g.parseT1Tile(w,k);break;case "t2":w=g.parseT2Tile(w,k);break;case "t3":w=g.parseT3Tile(w,k);break;case "t5":w=g.parseT5Tile(w,k);break;case "t6":w=g.parseT6Tile(w,k,c);break;case "t7":w=g.parseT7Tile(w,k);break;default:console.log("err_12 "+b)}l=w;c+=1;c==e&&(l+="</div>",c=0,q=!1)}m==a.length-1&&0!==c&&(l+="</div>")});r||d.showErrorPopUp(k.oopsContentNotFoundMsg);l+="</div>";l=d.createCarouselControls(l,"tileCarouselControlID");l+="</div>";return l+="</div>"}},{key:"createMsgTilesWithoutCarousel",
      value:function(a,b){var e=this,f=!1,c=0;var g=A.createNodeDisplayTitleAndSubtitle();g+='<div class = "cui__tiles__msg__body">';a.forEach(function(a,d){if(a[1].da_meob.da_disob){f=!0;var h=a[0].da_ddf;switch(b){case "t1":g=e.parseT1Tile(g,h);break;case "t2":g=e.parseT2Tile(g,h);break;case "t3":g=e.parseT3Tile(g,h);break;case "t6":g=e.parseT6Tile(g,h,c);break;case "t7":g=e.parseT7Tile(g,h)}c+=1}});f||d.showErrorPopUp(k.oopsContentNotFoundMsg);return g+="</div>"}},{key:"parseT1Tile",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b){var e,f,d,c;(function(a){e=a.tileHeaderTitle;f=a.tileBodyTitle;d=a.tileFooterTitle;c=a.tileImgSource})(b);a=function(a){void 0!=e&&""!=e&&(a=a+'<div class = "cui__tile__header__title mt-1 mb-1">'+e+"</div> ");void 0!=f&&""!=f&&(a=a+'<div class = "cui__tile__body__title mt-1 mb-1">'+f+"</div> ");void 0!=c&&""!=c&&(a=a+'<img class="img-thumbnail cui__tile__img__thumbnail" src='+c+' alt="">');void 0!=d&&""!=d&&(a=a+'<div class = "cui__tile__footer__title mt-1 mb-1">'+d+"</div> ");return a}(a+'<div class = "cui__tile__items mb-3">');
        return a+"</div>"}},{key:"parseT2Tile",value:function(a,b){var e,f,d,c,g;(function(a){e=b.tileHeaderTitle;f=b.tileHeaderSubtitle;c=a.tileBodyTitle;d=b.tileBodyContent;g=a.tileFooterTitle})(b);a=function(a){void 0!=e&&""!=e&&(a=a+'<div class = "cui__tile__header__title mt-1">'+e+"</div> ");void 0!=f&&""!=f&&(a=a+'<div class = "cui__tile__header__subtitle mt-1 ">'+f+"</div> ");void 0!=c&&""!=c&&(a=a+'<div class = "cui__tile__body__title mt-3 mb-1 ">'+c+"</div> ");void 0!=d&&""!=d&&(a=a+'<div class = "cui__tile__body__content mt-1 ">'+
      d+"</div> ");void 0!=g&&""!=g&&(a=a+'<div class = "cui__tile__footer__title mt-4 ">'+g+"</div> ");return a}(a+'<div class = "cui__tile__items col-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 mb-2">');return a+"</div>"}},{key:"parseT3Tile",value:function(a,b){function e(a){void 0!=c&&""!=c&&(a=a+'<img class="img-thumbnail cui__tile__img__thumbnail" src='+c+' alt="">');return a}function f(b){void 0!=d&&""!=d&&(b=b+'<div class = "cui__tile__group__title col-12 mt-1 mb-1">'+d+"</div> ");a+="</div>";return b}
        var d,c;"tile"==function(a){var b="tile";void 0!=a.tileImgSource&&""!=c&&(c=a.tileImgSource);void 0!=a.tileGroupTitle&&""!=d&&(d=a.tileGroupTitle,b="tileGroupHeader");return b}(b)?(a+='<div class = "cui__tile__items mb-2">',a=e(a),a+="</div>"):a=f(a);return a}},{key:"parseT4Tile",value:function(a){var b,e=[];var f=A.createNodeDisplayTitleAndSubtitle();f+='<div class = "cui__tiles__msg__body">';for(var c=0;c<a.length;c++)a[c].forEach(function(a,d){var c=a[0].da_ddf,g=c.tile[0];c=c.bullet;a[1].da_meob.da_disob&&
      (b=g.tileImgSource,g=f,g+='<div class = "cui__tile__items col-3 col-sm-3 col-md-3 col-lg-3 col-xl-3 mr-1 ml-1 mb-1">',void 0!=b&&""!=b&&(g=g+'<img class="img-thumbnail cui__tile__img__thumbnail" src='+b+' alt="">'),f=g+"</div>",e.push(c))});f+="</div>";d.createBulletModal(e);d.addBulletModalEventHandlers();return f}},{key:"parseT5Tile",value:function(a,b){var e,f,c,g,r,l,q,p,y;(function(a){e=a.tileHeaderTitle;f=a.tileBodyTitle;c=a.tileBodySubtitle;g=a.tileLeftHandSideFooterTitle1;r=a.tileRightHandSideFooterTitle1;
        l=a.tileLeftHandSideFooterTitle2;q=a.tileRightHandSideFooterTitle2;p=e;y="listingName"})(b);a=function(a){function b(a,b){b+='<div class = "cui__body__title__container mt-2 mb-1">';for(var e=k.revenueIcon,f=k.revenueIcon,c=k.employeesIcon,g=0;g<a.length;g++){var h=a[g];switch(h.attributeType){case "revenue":b+='<p class="attribute-type-value" title="Annual Revenues" data-toggle="tooltip" data-trigger="hover" data-placement="bottom" >';b=b+'<img class="img-thumbnail cui__body__title__icons pr-2" src='+
      e+' alt="">';b+=h.attributeValue;b+="</p>";break;case "employee":b+='<p class="attribute-type-value" title="Number of Employees" data-toggle="tooltip" data-trigger="hover" data-placement="bottom" >';b=b+'<img class="img-thumbnail cui__body__title__icons pr-2" src='+c+' alt="">';b+=h.attributeValue;b+="</p>";break;case "founded":b+='<p class="attribute-type-value" title="Year Founded" data-toggle="tooltip" data-trigger="hover" data-placement="bottom" >';b=b+'<img class="img-thumbnail cui__body__title__icons pr-2" src='+
      f+' alt="">';b+=h.attributeValue;b+="</p>";break;default:d.handleError("err_200")}}return b+"</div>"}a=function(a){a=a+'<p class="short__list__container pt-1"><img class="img-thumbnail cui__short__list__icon pr-2" title="Select Company" data-toggle="tooltip" data-trigger="hover" data-placement="bottom"  src='+k.shortListIcon+' alt="">Select';return a+"</p>"}(a);void 0!=e&&""!=e&&(a=a+'<div class = "cui__tile__header__title mb-4 pb-2">'+e+"</div> ");void 0!=f&&""!=f&&(a=b(f,a));void 0!=c&&""!=c&&(a=
      a+'<div class = "cui__tile__body__subtitle mt-3 mb-4">'+c+"</div> ");a=function(a){a+='<div class = "cui__tile__footer__container mt-2 mb-1">';void 0!=g&&""!=g&&(a=a+'<div class = "cui__tile__footer__lhs__title1 mt-1">'+g+"</div> ");void 0!=r&&""!=r&&(a=a+'<div class = "cui__tile__footer__rhs__title1 mt-1">'+r+"</div> ");a+='</div><div class = "cui__tile__footer__container mt-2 mb-3">';void 0!=l&&""!=l&&(a=a+'<div class = "cui__tile__footer__lhs__title2 mt-1">'+l+"</div> ");void 0!=q&&""!=q&&(a=a+
      '<div class = "cui__tile__footer__rhs__title2 mt-1">'+q+"</div> ");return a}(a);return a+"</div>"}(a+'<div class="tile-button cui__tile__message__field  mr-1 ml-1 mb-1"tile-name ="'+y+'"tile-value ="'+p+'">');return a+"</div>"}},{key:"parseT6Tile",value:function(a,b,e){var f,d,c,g;(function(a){f=a.tileHeaderTitle;d=a.tileBodyBullets;c=a.tileFooterTitle;g=a.tileImgSource})(b);a=function(a){void 0!=f&&""!=f&&(a=a+'<div class = "cui__tile__header__title  mb-2 pb-2">'+f+"</div> ");for(var b=0;b<d.length;b++)a=
      a+'<div class = "cui__tile__body__bullet pb-2 pl-1 pr-1 ml-1 mr-1 mt-1 mb-1">'+d[b]+"</div> ";void 0!=g&&""!=g&&(a=a+'<img class="img-thumbnail cui__tile__img__thumbnail" src='+g+' alt="">');void 0!=c&&""!=c&&(a=a+'<div class = "cui__tile__footer__title ml-4 mr-4 mt-1 mb-2">'+c+"</div> ");return a}("firstTile"==(0==e%2?"firstTile":"secondTile")?a+'<div class = "cui__tile__items mb-4 first_tile">':a+'<div class = "cui__tile__items mb-4 second_tile">');return a+"</div>"}},{key:"parseT7Tile",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   b){var e,f,d,c;(function(a){e=a.tileHeaderTitle;f=a.tileHeaderSubtitle;c=a.tileImgSource;d=a.tileFooterTitle})(b);a=function(a){void 0!=e&&""!=e&&(a=a+'<div class = "cui__tile__header__title mt-1">'+e+"</div> ");void 0!=f&&""!=f&&(a=a+'<div class = "cui__tile__header__title mt-1">'+f+"</div> ");void 0!=c&&""!=c&&(a=a+'<img class="img-thumbnail cui__tile__img__thumbnail" src='+c+' alt="">');void 0!=d&&""!=d&&(a=a+'<div class = "cui__tile__footer__title mt-1">'+d+"</div> ");return a}(a+'<div class = "cui__tile__items mb-2">');
        return a+"</div>"}},{key:"parseT8Tile",value:function(a,b){b.forEach(function(b,f){var e=b[0].da_ddf;if(1==b[1].da_meob.da_disob){var d=e.label;a=a+'<div class="'+(("preFill"==e.valueType?"cui__tile__selected":"")+' tile-button cui__tile__response__field mb-3 p-3"data-tile-value ="')+e.value+'"data-tile-name ="'+e.name+'">';a=a+"<p>"+d+"</p>";a+="</div>"}});return a}},{key:"parseT9Tile",value:function(a,b,e){a=function(a,b){a.forEach(function(a,e){var f=a[0].da_ddf;if(1==a[1].da_meob.da_disob){var d=
        f.label;b=b+'<div class="'+(("preFill"==f.valueType?"cui__tile__selected":"")+' tile-button cui__tile__response__field mb-2 p-3"data-tile-value ="')+f.value+'"data-tile-name ="'+f.name+'">';b=b+"<p>"+d+"</p>";b+="</div>"}});return b}(b,a);a=function(a,b){var e,f,d;b+='<div id = "qr-response">';a.forEach(function(a,c){e=a.qr_opty;f=A.getQuickReplyOptionLabels(e);d=A.getDataNextNode(e);b=b+'<input class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 qr-button cui__qr__button btn btn-outline-primary mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-1" type="button" value="'+
      f+'" data-next-node="'+d+'">'});return b+="</div></div>"}(e,a+'</div><div class="cui__tile__qr__container">');return a+"</div>"}},{key:"parseT11Tile",value:function(a,b){var e=0;b.forEach(function(b,c){var f=b[0].da_ddf;if(1==b[1].da_meob.da_disob){var g=f.label,h=f.imgSource,k=f.sublabel,p=f.value,y=f.name;f="preFill"==f.valueType?"cui__tile__selected":"";switch(e){case 0:f+=" tile-button cui__tile__response__field  first_tile mb-4 p-1";break;case 1:f+=" tile-button cui__tile__response__field  second_tile mb-4 p-1";
        break;case 2:f+=" tile-button cui__tile__response__field  third_tile mb-4 p-1";break;case 3:f+=" tile-button cui__tile__response__field  fourth_tile mb-4 p-1";break;default:d.logConversationFlowAlerts("err_21A")}e+=1;a=a+'<div class="'+f+'"data-tile-value ="'+p+'"data-tile-name ="'+y+'">';void 0!=g&&(a=a+"<p class = cui__tile__title>"+g+"</p>");void 0!=h&&(a=a+'<img class="img-thumbnail cui__tile__img__thumbnail" src='+h+' alt="">');void 0!=k&&(a=a+'<p class = "cui__tile__subtitle  pb-1" >'+k+"</p>");
        a+="</div>"}});return a}},{key:"parseT10Tile",value:function(a,b){var e=0;b.forEach(function(b,c){var f=b[0].da_ddf;if(1==b[1].da_meob.da_disob){var g=f.label,h=f.sublabel,k=f.value,p=f.name;f="preFill"==f.valueType?"cui__tile__selected":"";switch(e){case 0:f+=" tile-button cui__tile__response__field  first_tile mb-4 p-1";break;case 1:f+=" tile-button cui__tile__response__field  second_tile mb-4 p-1";break;case 2:f+=" tile-button cui__tile__response__field  third_tile mb-4 p-1";break;case 3:f+=" tile-button cui__tile__response__field  fourth_tile mb-4 p-1";
        break;default:d.logConversationFlowAlerts("err_21A")}e+=1;a=a+'<div class="'+f+'"data-tile-value ="'+k+'"data-tile-name ="'+p+'">';a=a+"<p class = cui__tile__title>"+g+"</p>";a=a+'<p class = "cui__tile__subtitle pt-2 pb-2" >'+h+"</p>";a+="</div>"}});return a}},{key:"createTileQRHTML",value:function(a,b){var e,f,d;b+='<div id = "qr-response">';a.forEach(function(a,c){e=a.qr_opty;f=A.getQuickReplyOptionLabels(e);d=A.getDataNextNode(e);b=b+'<input class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 qr-button cui__qr__button btn btn-outline-primary mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-1" type="button" value="'+
      f+'" data-next-node="'+d+'">'});return b+="</div></div>"}},{key:"createRespTilesWithCarousel",value:function(a,b,e,f,c,g){var h=0,l=0;g+='<div class = "cui__tiles__resp__body">';g+='<div id="tileCarouselControlID" class="carousel slide carousel-fade" data-interval="false" data-ride="carousel" data-wrap="true" data-touch ="true"> ';g+='<div class="carousel-inner">';var m=!1;b.forEach(function(a,e){var f=a[0].da_ddf;if(a[1].da_meob.da_disob){0!=l||m||(g=d.makeCarouselItemActiveOrInactive(h,g),h+=1,
        m=!0);var k=g;k=k+'<div class="'+(("preFill"==f.valueType?"cui__tile__selected":"")+' tile-button cui__tile__response__field mb-2 p-3"data-tile-value ="')+f.value+'"data-tile-name ="'+f.name+'"><p>'+f.label+"</p>";g=k+"</div>";l+=1;l==c&&(g+="</div>",l=0,m=!1)}e==b.length-1&&0!==l&&(g+="</div>")});g+="</div>";g=d.createCarouselControls(g,"tileCarouselControlID");g+="</div>";g+="</div>";g+='<div class="cui__tile__qr__container">';g=a.createTileQRHTML(e,g);return g+="</div>"}},{key:"render",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     b,e,f){var d=document.createElement("div");switch(a){case "respObject":d.classList.add(b.config.responseBubbleClass);d.innerHTML=this.parseRespTileTemplate(this.config,this.config.prdc,this.config.prdsc);break;case "msgObject":d.classList.add(b.config.messageBubbleClass);d.innerHTML=this.parseMsgTileTemplate(this.config,e,f);break;default:console.log("err_15 "+a)}return d}}]),c}(),na=function(){function c(a){return L(this,c),this.config=$.extend({},a),this}return M(c,[{key:"parseC1Card",value:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                b){var e=b.cardFrontHeaderTitle;var f=b.cardFrontBodyContentSummary;var d=b.cardFrontFooterTitle;var c=b.cardFrontFooterSubtitle;a+='<div class = "cui__front__card__items">';a=function(a){void 0!=e&&""!=e&&(a=a+'<div class = "cui__card__body__title mb-4">'+e+"</div> ");return a}(a);f.forEach(function(b,e){void 0!=b&&""!=b&&(a=a+'<div class = "cui__card__body__content mt-2">'+b+"</div> ")});a=function(a){void 0!=d&&""!=d&&(a=a+'<div class = "cui__card__lhs__footer1 mt-5">'+d+"</div> ");void 0!=c&&
    ""!=c&&(a=a+'<div class = "cui__card__lhs__footer2 mt-1">'+c+"</div> ");return a}(a);return a+="</div>"}},{key:"parseC2Card",value:function(a,b){var e=b.cardFrontHeaderTitle;var f=b.cardFrontHeaderSubtitle;var d=b.cardFrontBodyTitle;var c=b.cardFrontBodySubtitle;var g=b.cardFrontBodyContentSummary;var l=b.cardLeftHandSideFooter1;var k=b.cardLeftHandSideFooter2;var p=b.cardRightHandSideFooter1;var y=b.cardRightHandSideFooter2;var v=b.cardBackImageColumn1;var w=b.cardBackBodyTitleColumn1;var K=b.cardBackBodyContentColumn1;
      var G=b.cardBackImageColumn2;var H=b.cardBackBodyTitleColumn2;var z=b.cardBackBodyContentColumn2;a=function(a){a=function(a){void 0!=e&&""!=e&&(a=a+'<div class="cui__card__header__title">'+e+"</div>");void 0!=f&&""!=f&&(a=a+'<div class="cui__card__header__subtitle mt-1 mb-1">'+f+"</div>");return a}(a+'<div class="frontside"><div class="card"><div class="card-body text-center cui__front__card__items">');a=function(a){void 0!=d&&""!=d&&(a+="<div class = cui__card__body__title__subtitle>",void 0!=d&&
      ""!=d&&(a=a+'<div class="cui__card__body__title mt-2 mb-1">'+d+"</div>"),void 0!=c&&""!=c&&(a=a+'<div class="cui__card__body__subtitle mb-1">'+c+"</div>"),a+="</div>");return a}(a);a=function(a){void 0!=g&&""!=g&&(a=a+'<p class="cui__card__body__content ml-2 mr-2 mt-2 mb-4">'+g+" </p>");return a}(a);a=function(a){a+='<div class="cui__lhs__rhs__footer1__row mt-4">';void 0!=l&&""!=l&&(a=a+'<div class="cui__card__lhs__footer1 ">'+l+"</div>");void 0!=p&&""!=p&&(a=a+'<div class="cui__card__rhs__footer1">'+
      p+"</div>");return a+"</div>"}(a+'<button class = "cui__flip__front__card btn mb-2" type="button">Read Bios</button>');a=function(a){a+='<div class="cui__lhs__rhs__footer2__row ">';void 0!=k&&""!=k&&(a=a+'<div class="cui__card__lhs__footer2">'+k+"</div>");void 0!=y&&""!=y&&(a=a+'<div class="cui__card__rhs__footer2">'+y+"</div>");return a+"</div>"}(a);return a+"</div></div></div>"}(a+'<div class="card-flip">');a=function(a){function b(a){a=function(a){void 0!=G&&""!=G&&(a=a+'<p><img class="img-fluid cui__card__back__image" src="'+
      G+' " alt="card image"></p>');return a}(a+'<div class="mr-3 cui__card__back__item">');a=function(a){void 0!=H&&""!=H&&(a=a+'<div class="cui__card__back__title">'+H+"</div>");return a}(a);a=function(a){void 0!=z&&""!=z&&(a=a+'<p class="cui__card__back__content">'+z+" </p>");return a}(a);return a+"</div>"}a=function(a){a=function(a){void 0!=v&&""!=v&&(a=a+'<p><img class="img-fluid cui__card__back__image" src="'+v+' " alt="card image"></p>');return a}(a+'<div class="mr-3 cui__card__back__item">');a=
        function(a){void 0!=w&&""!=w&&(a=a+'<div class="cui__card__back__title">'+w+"</div>");return a}(a);a=function(a){void 0!=K&&""!=K&&(a=a+'<p class="cui__card__back__content">'+K+" </p>");return a}(a);return a+"</div>"}(a+'<div class="backside"><div class="card"><div class="card-body text-center cui__back__card__items">');void 0!=G&&void 0!=H&&void 0!=z&&""!=G&&""!=H&&""!=z&&(a=b(a));return a+'</div><button class = "cui__flip__back__card btn mb-2" type="button">Flip Back</button></div></div>'}(a);return a+
      "</div>"}},{key:"parseC3Card",value:function(a,b){var e=b.cardFrontHeaderTitle;var f=b.cardFrontHeaderSubtitle;var d=b.cardFrontBodyTitle;var c=b.cardFrontBodySubtitle;var g=b.cardFrontBodyContentSummary;var l=b.cardFrontBodyContentDetails;var k=b.cardLeftHandSideFooter1;var p=b.cardLeftHandSideFooter2;var y=b.cardRightHandSideFooter1;var v=b.cardRightHandSideFooter2;a=function(a){void 0!=e&&""!=e&&(a=a+'<div class="cui__card__header__title">'+e+"</div>");void 0!=f&&""!=f&&(a=a+'<div class="cui__card__header__subtitle mt-1 mb-1">'+
    f+"</div>");return a}(a+'<div class="frontside"><div class="card"><div class="card-body text-center cui__front__card__items">');a=function(a){void 0!=d&&""!=d&&(a+="<div class = cui__card__body__title__subtitle>",void 0!=d&&""!=d&&(a=a+'<div class="cui__card__body__title mt-2 mb-1">'+d+"</div>"),void 0!=c&&""!=c&&(a=a+'<div class="cui__card__body__subtitle mb-1">'+c+"</div>"),a+="</div>");return a}(a);a=function(a){void 0!=g&&""!=g&&(a=a+'<p class="cui__card__body__content ml-1 mr-1 mt-1 mb-1">'+
    g+" </p>");return a}(a);a=function(a){if(void 0!=l){a+="<ul class>";for(var b=0;b<l.length;b++)a+="<li>",a=a+'<div class = "cui__card__details__bullet pb-1 pl-1 pr-1 mt-1 mb-1">'+l[b]+"</div> ",a+="</li>";a+="</ul>"}return a}(a);a=function(a){a+='<div class="cui__lhs__rhs__footer1__row mt-4">';void 0!=k&&""!=k&&(a=a+'<div class="cui__card__lhs__footer1 ">'+k+"</div>");void 0!=y&&""!=y&&(a=a+'<div class="cui__card__rhs__footer1">'+y+"</div>");return a+"</div>"}(a);a=function(a){a+='<div class="cui__lhs__rhs__footer2__row ">';
      void 0!=p&&""!=p&&(a=a+'<div class="cui__card__lhs__footer2">'+p+"</div>");void 0!=v&&""!=v&&(a=a+'<div class="cui__card__rhs__footer2">'+v+"</div>");return a+"</div>"}(a);return a+"</div></div></div>"}},{key:"parseC4Card",value:function(a,b){var e=b.cardFrontImageColumn1;var f=b.cardBodyTitle;var d=b.cardBodySubtitle;var c=b.cardBackHeaderTitleColumn1;var g=b.cardBackBodyContentColumn1;a=function(a){a=function(a){return a=a+'<p><img class="img-fluid cui__card__front__image" src="'+e+' " alt="card image"></p>'}(a+
    '<div class="frontside"><div class="card"><div class="card-body text-center cui__front__card__items">');a=function(a){void 0!=f&&""!=f&&(a=a+'<div class="cui__card__body__title">'+f+"</div>");void 0!=d&&""!=d&&(a=a+'<div class="cui__card__body__subtitle">'+d+"</div>");return a}(a);return a+'<button class= "cui__flip__front__card btn mb-2" type="button">Read Bios</button></div></div></div>'}(a+'<div class="card-flip">');a=function(a){a=function(a){void 0!=c&&""!=c&&(a=a+'<div class="cui__card__header__title">'+
    c+"</div>");return a}(a+'<div class="backside"><div class="card"><div class="card-body text-center cui__back__card__items"><div class="cui__back__card__item m3-3">');a=function(a){void 0!=g&&""!=g&&(a=a+'<p class="cui__card__body__content">'+g+" </p>");return a}(a);return a+'</div></div><button class = "cui__flip__back__card btn mb-2" type="button">Flip Back</button></div></div>'}(a);return a+"</div>"}},{key:"createCarouselCards",value:function(a,b){var e,f,c,g=0,r=this,l=!1;var q=a.ms_obj.conobj.cdo;
      var p=A.createNodeDisplayTitleAndSubtitle();p+='<div class = "cui__card__msg__body">';p+='<div id="cardCarouselControlID" class="carousel slide carousel-fade" data-ride="carousel" data-wrap="true" data-touch ="true"> ';p+='<div class="carousel-inner">';q.forEach(function(a,h){e=a[0].da_ddf;f=a[1].da_meob;c=e;if(f.da_disob){l=!0;p=d.makeCarouselItemActiveOrInactive(g,p);g+=1;switch(b){case "c1":p=r.parseC1Card(p,c);break;case "c2":p=r.parseC2Card(p,c);break;case "c3":p=r.parseC3Card(p,c);break;case "c4":p=
        r.parseC4Card(p,c);break;default:console.log("err_17 "+b)}p+="</div>"}});l||d.showErrorPopUp(k.oopsContentNotFoundMsg);p+="</div>";p=d.createCarouselControls(p,"cardCarouselControlID");p+="</div>";return p+="</div>"}},{key:"createNonCarouselCards",value:function(a,b){var e=a.ms_obj.conobj.cdo[0][0].da_ddf;var f=A.createNodeDisplayTitleAndSubtitle();f+='<div class = "cui__card__msg__body">';switch(b){case "c1":f=this.parseC1Card(f,e);break;case "c2":f=this.parseC2Card(f,e);break;case "c3":f=this.parseC3Card(f,
    e);break;case "c4":f=this.parseC4Card(f,e);break;default:console.log("err_18 "+b)}return f+"</div>"}},{key:"render",value:function(a,b,e,f){a=document.createElement("div");a.classList.add(b.config.messageBubbleClass);switch(f){case "c1":a.innerHTML=1<this.config.ms_obj.conobj.cdo.length?this.createCarouselCards(this.config,f):this.createNonCarouselCards(this.config,f);break;case "c2":case "c3":case "c4":a.innerHTML=1<this.config.ms_obj.conobj.cdo.length?this.createCarouselCards(this.config,f):this.createNonCarouselCards(this.config,
    f);break;default:console.log("err_18 "+f)}return a}}]),c}(),oa=function(){function c(a){return L(this,c),this.config=$.extend({},a),this}return M(c,[{key:"parseBulletWithWithoutHeader",value:function(a,b){var e,f,d,c,g,k,q,p;b.forEach(function(b,h){c=b[0].da_ddf;q=b[1].da_meob;1==q.da_disob&&(p=c,k=p.bulletHeader,void 0!=k&&(a=a+'<div class = "cui__bullet__group__header">'+k+"</div> "),g=p.bulletStrings,g.forEach(function(b,c){e=b[0];1==b.length?d=f=" ":2==b.length?(f=b[1],d=" "):(f=b[1],d=b[2]);
      var g=a;g=g+'<ul class=\'\'>  <li><div class = "cui__bullet__items"><div class = "cui__bullet__first__column__string">'+e+"</div> ";void 0!=f&&null!=f&&" "!=f&&(g=g+'<div class = "cui__bullet__second__column__string">'+f+"</div> ");void 0!=d&&null!=d&&" "!=d&&(g=g+'<div class = "cui__bullet__third__column__string">'+d+"</div> ");a=g+"</div></li>  </ul>"}))});return a}},{key:"parseCarouselBullet",value:function(a,b){var e=0,f=this,c=!1;var g=A.createNodeDisplayTitleAndSubtitle();g+='<div class = "cui__bullet__msg__body">';
      g+='<div id="bulletCarouselControlID" class="carousel slide carousel-fade" data-ride="carousel" data-wrap="true" data-touch ="true"> ';g+='<div class="carousel-inner">';a.forEach(function(a,h){if(a[1].da_meob.da_disob){c=!0;g=d.makeCarouselItemActiveOrInactive(e,g);e+=1;switch(b){case "bwoh-l":case "bwoh":g=f.parseBulletWithWithoutHeader(g,a);break;case "bwih":g=f.parseBulletWithWithoutHeader(g,a);break;default:console.log("err_17 "+b)}g+="</div>"}});c||d.showErrorPopUp(k.oopsContentNotFoundMsg);
      g+="</div>";g=d.createCarouselControls(g,"bulletCarouselControlID");g+="</div>";return g+="</div>"}},{key:"parseNonCarouselBullet",value:function(a,b){var e=A.createNodeDisplayTitleAndSubtitle();e=this.parseBulletWithWithoutHeader(e+'<div class = "cui__bullet__msg__body">',a);return e+"</div>"}},{key:"render",value:function(a,b,e,f){a=document.createElement("div");var d=this.config.ms_obj.conobj.cdo;a.classList.add(b.config.messageBubbleClass);switch(f){case "bwoh-l":case "bwoh":a.innerHTML=this.config.ms_obj.conobj.cdo.length>
    k.maxBulletsInGroup?this.parseCarouselBullet(d,f):this.parseNonCarouselBullet(d,f);a.innerHTML+="</div>";break;case "bwih":a.innerHTML=this.config.ms_obj.conobj.cdo.length>k.maxBulletsInGroup?this.parseCarouselBullet(d,f):this.parseNonCarouselBullet(d);a.innerHTML+="</div>";break;default:console.log("err_16 "+e)}return a}}]),c}(),pa=function(){function c(a){return L(this,c),this.config=a,this}return M(c,[{key:"parseAudioVideoFullScreenTemplate",value:function(a){var b,e,f,c,g,r,l,q,p,y=0,v=!1;var w=
      A.createNodeDisplayTitleAndSubtitle();w+='<div id = "cui__media__container" class="mt-2">';1<a.length&&(w+='<div id="mediaCarouselControlID" class="carousel slide carousel-fade" data-ride="carousel" data-wrap="true" data-touch ="true">',w+='<div class="carousel-inner">');a.forEach(function(a,h){var k=a[0].da_ddf;if(a[1].da_meob.da_disob){v=!0;b=k.mediaType;e=k.mediaTitle;f=k.mediaSubtitle;c=k.mediaLeftHandSideFooter1;g=k.mediaLeftHandSideFooter2;r=k.mediaRightHandSideFooter1;l=k.mediaRightHandSideFooter2;
      q=k.mediaCallToAction;p=k.mediaSource;w=d.makeCarouselItemActiveOrInactive(y,w);y+=1;if("audio"==b)w+='<div class="col-12 mb-2 cui__audio__descriptor" >';else if("video"==b)w+='<div class="col-12 mb-2 cui__video__descriptor" >';else{console.log("unknown media type in AV bubble");return}k=w+="<a>";void 0!=e&&(k=k+'<div class="cui__media__title mt-2">'+e+"</div>");void 0!=f&&(k=k+'<div class="cui__media__subtitle mt-2 mb-4">'+f+"</div>");k=w=k;k=k+'<div class="cui__media__call__to__action mt-4 mb-5 mr-4"> <button type="button"  class="btn btn-primary " >'+
      q+"</button>";k=w=k+"</div>";k+='<div class="cui__lhs__rhs__footer1__row pt-2 mt-4">';void 0!=c&&(k=k+'<div class="cui__lhs__footer1 ">'+c+"</div>");void 0!=r&&(k=k+'<div class="cui__rhs__footer1">'+r+"</div>");k=w=k+"</div>";k+='<div class="cui__lhs__rhs__footer2__row ">';void 0!=g&&(k=k+'<div class="cui__lhs__footer2">'+g+"</div>");void 0!=l&&(k=k+'<div class="cui__rhs__footer2">'+l+"</div>");w=k+"</div>";"audio"==b?(k=w,w=k=k+'<audio class="cui__audio__media__object" preload=\'auto\'> <source class="cui__audio__media__file" src='+
      p+"> </audio>"):(k=w,w=k=k+'<video class="cui__video__media__object" preload=\'auto\'> <source class="cui__video__media__file" src='+p+"> </video>");w+="</a>";w+="</div>";w+="</div>"}});v||d.showErrorPopUp(k.oopsContentNotFoundMsg);1<a.length&&(w+="</div>",w+='<a class="carousel-control-prev" href="#mediaCarouselControlID" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span></a><a class="carousel-control-next" href="#mediaCarouselControlID" role="button" data-slide="next"><span class="carousel-control-next-icon"></span></a>',
      w+="</div>");return w+="</div>"}},{key:"parseAudioVideoThumbnailTemplate",value:function(a){var b,e,f,c,g,r,l,q,p,y=!1;var v=A.createNodeDisplayTitleAndSubtitle();v+='<div id = "cui__media__container" class="mt-2">';a.forEach(function(a,d){var h=a[0].da_ddf;if(a[1].da_meob.da_disob){y=!0;b=h.mediaType;e=h.mediaTitle;f=h.mediaSubtitle;c=h.mediaLeftHandSideFooter1;g=h.mediaLeftHandSideFooter2;r=h.mediaRightHandSideFooter1;l=h.mediaRightHandSideFooter2;q=h.mediaCallToAction;p=h.mediaMediaSource;if("audio"==
    b)v+='<div class="col-6 mb-2 cui__audio__descriptor" >';else if("video"==b)v+='<div class="col-6 mb-2 cui__video__descriptor" >';else{console.log("unknown media type in ASV bubble");return}h=v+="<a>";void 0!=e&&(h=h+'<div class="cui__media__title">'+e+"</div>");void 0!=f&&(h=h+'<div class="cui__media__subtitle mt-1 mb-1">'+f+"</div>");h=v=h;h=h+'<div class="cui__media__call__to__action mt-4"> <button type="button"  class="btn btn-primary " >'+q+"</button>";h=v=h+"</div>";h+='<div class="cui__lhs__rhs__footer1__row mt-4">';
      void 0!=c&&(h=h+'<div class="cui__lhs__footer1 ">'+c+"</div>");void 0!=r&&(h=h+'<div class="cui__rhs__footer1">'+r+"</div>");h=v=h+"</div>";h+='<div class="cui__lhs__rhs__footer2__row ">';void 0!=g&&(h=h+'<div class="cui__lhs__footer2">'+g+"</div>");void 0!=l&&(h=h+'<div class="cui__rhs__footer2">'+l+"</div>");v=h+"</div>";"audio"==b?(h=v,v=h=h+'<audio class="cui__audio__media__object" preload=\'auto\'> <source class="cui__audio__media__file" src='+p+"> </audio>"):(h=v,v=h=h+'<video class="cui__video__media__object" preload=\'auto\'> <source class="cui__video__media__file" src='+
      videoMediaSource+"> </video>");v+="</a>";v+="</div>"}});y||d.showErrorPopUp(k.oopsContentNotFoundMsg);return v+="</div>"}},{key:"render",value:function(a,b,e,f){a=document.createElement("div");a.classList.add(b.config.messageBubbleClass);switch(f){case "th":a.innerHTML=this.parseAudioVideoThumbnailTemplate(this.config);break;case "fs":a.innerHTML=this.parseAudioVideoFullScreenTemplate(this.config);break;default:console.log("err_16 "+f)}return a}}]),c}(),qa=function(){function d(a){return L(this,d),
    this.config=$.extend({},a),this}return M(d,[{key:"parsePaymentAmount",value:function(a){function b(a){a.forEach(function(a,b){var f=a[0].da_ddf;1==a[1].da_meob.da_disob&&(e=f.paymentChoices,d=f.paymentType,k=f.otherFormField,g=f.includePayCCProcessingCharge)})}var e,d,c,g,k;var l=A.getDataProbeID(a.nodeObj);var q=a.prdo;var p=a.qrdo;a=A.createNodeDisplayTitleAndSubtitle();a=function(a,f){b(a);f=function(a,b){b+='<div id="cui__payment__type__container">';for(var e=0;e<a.length;e++){var f=a[e].value;
      var d=a[e].name;var c=a[e].label;var g=a[e].required;var h="preFill"==a[e].valueType?"cui__payment__type__selected":"";h+=" payment-type-button cui__payment__response__field m-2 p-2";b=g?b+'<div class="'+h+'"data-value ="'+f+'"data-name ="'+d+'" required >':b+'<div class="'+h+'"data-value ="'+f+'"data-name ="'+d+'">';b=b+"<p>"+c+"</p>";b+="</div>"}return b+"</div>"}(d,f);f=function(a,b){b+='<div id="cui__payment__amount__container" class="mt-2">';for(var e=0;e<a.length;e++){var f=a[e].value;var d=
      "Other"!=a[e].label?"$"+a[e].label:a[e].label;c=a[e].name;var g=a[e].valueType;g="preFill"==g?"cui__payment__amount__selected":"";g+=" payment-amount-button cui__payment__response__field";b=b+'<div class="'+g+'"data-value ="'+f+'"data-name ="'+c+'">';b=b+"<p>"+d+"</p>";b+="</div>"}return b+"</div>"}(e,f+'<div class="break"></div>');f=function(a,b){var e=a.label,f=a.name;b="preFill"==a.valueType?b+'<div id="cui__payment__other__choice__container" class="mt-3">':b+'<div id="cui__payment__other__choice__container" class = "hide__other__choice mt-3" >';
      return b=b+'<label for="'+f+'" >'+e+'</label><input class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-2 form-control cui__form__input__field" type="text" value="" name="'+f+'" ></div>'}(k,f);f=function(a,b){var e=a.name;var f=a.label;var d=a.value;var c=a.valueType;b+='<div id="cui__payment__include__processing__container">';return b=("preFill"==c?b+'<input class="form-check-input" type="checkbox" value="'+d+'" name="'+e+'"id="'+d+'"checked  >':b+'<input class="form-check-input" type="checkbox" value="'+
    d+'" name="'+e+'"id="'+d+'">')+'<label for="'+d+'">'+f+"</label></div>"}(g,f);return f+"</div>"}(q,a+'<form id = "payment-pa-bi-pp"  data-toggle="validator"  data-probe-id ='+l+">");a=function(a,b){var e,f;a.forEach(function(a,d){var c=a.qr_opty;if("submit"==c){e=1;f="success";var g="submit"}else e=0,f="failure",g="button";var h="submit"==g?"nextNodeInTheme":"previousNodeInTheme";c=A.getQuickReplyOptionLabels(c);b+='<div class="cui__form__qr__button__container">';b=b+'<input type = "'+g+'" id = "'+
    f+'" class="form-button form-control cui__form__qr__button btn btn-outline-primary" value="'+c+'" data-success="'+e+'" data-next-node="'+h+'">';b+="</div>"});return b}(p,a+'</div><div class="cui__pa__qr__container">');return a+"</div>"}},{key:"parseBillingInformation",value:function(a){var b=A.createNodeDisplayName("Enter Your Billing Information");var e=A.getDataProbeID(a.nodeObj);b=A.createForm(a,b+'<form id = "payment-pa-bi-pp"  data-toggle="validator"  data-probe-id ='+e+">","#payment-pa-bi-pp");
      b=A.createFormQR(a,b+'<div class="cui__bi__qr__container">');return b+"</div></form>"}},{key:"parsePaymentProcessing",value:function(a){var b=A.createNodeDisplayName("Enter Credit Card Information");var e=A.getDataProbeID(a.nodeObj);b=A.createForm(a,b+'<form id = "payment-pa-bi-pp"  data-toggle="validator"  data-probe-id ='+e+">","#payment-pa-bi-pp");b=A.createFormQR(a,b+'<div class="cui__pp__qr__container">');return b+"</div></form>"}},{key:"parsePaymentMethod",value:function(a){function b(a,b){b=
    b+'<div class = "cui__wallet__payment__divider mb-1"><hr><div class = "divider_label">'+a+"</div><hr>";return b+="</div>"}function e(a,b){a=a+'<div id= "cui__website__payment__container" class= "mb-4 mt-4"><div class=" website-payment-button  m-2 p-2" data-value="'+b+'" data-name="paymentMethod"><p>Website Payment Page</p></div>';return a+="</div>"}function f(a,b){a+='<div id= "cui__digital__wallet__container" class= "mb-4 mt-4">';for(var e=0;e<b.length;e++){var d=b[e];if("PayPal"==d){var f="paypal";
      a=a+'<div class="wallet-button  m-2 p-1" data-value="'+f+'" data-name= "paymentMethod">';a+='<div id="paypal-button"></div>'}else"Visa Checkout"==d?(f="visa",d="https://chalakh-bot-js.s3.us-east-2.amazonaws.com/images/visa-checkout-logo.jpg",a=a+'<div class="wallet-button  m-2 p-1" data-value="'+f+'" data-name= "paymentMethod">',a+='<div id="visa-button">',a=a+'<img class="img-thumbnail img-fluid" src= "'+d+'" alt="">',a+="</div>"):"Master Card Checkout"==d&&(f="mastercard",a=a+'<div class="wallet-button  m-2 p-1" data-value="'+
    f+'" data-name= "paymentMethod">',a+='<div id="masterpass-button">',d="https://masterpass.com/dyn/img/btn/global/mp_chk_btn_126x030px.svg",a=a+'<img class="img-thumbnail img-fluid" src= "'+d+'" alt="">',a+="</div>");a+="</div>"}return a+"</div>"}A.getDataProbeID(a.nodeObj);var d=a.prdo[0][0].da_ddf;a=d.digitalWallets;var c=d.websitePaymentPage;d=A.createNodeDisplayName("Select Payment Method");d+='<div id="cui__payment__method__container"><div class="break"></div>';void 0!=c&&(d=e(d,c));d=b("or with your Digial Wallet",
    d);0!=a.length&&(d=f(d,a));d=b("or with your Credit Card",d);d=function(a){return a+'<div id= "cui__credit__card__container" class= "mb-4 mt-4"><div class=" credit-card-payment-button m-2 p-2" data-value="creditCardPayment" data-name="paymentMethod"><p>Pay With Credit Card</p></div>'}(d);return d+"</div>"}},{key:"render",value:function(a,b){var e=document.createElement("div");e.classList.add(b.config.responseBubbleClass);var d=this.config.prdsc;switch(d){case "pa":e.innerHTML=this.parsePaymentAmount(this.config);
      break;case "pp":e.innerHTML=this.parsePaymentProcessing(this.config);break;case "pm":e.innerHTML=this.parsePaymentMethod(this.config);break;case "bi":e.innerHTML=this.parseBillingInformation(this.config);break;default:console.log("err_16 "+d)}return e}}]),d}(),ra=function(){function g(a){return L(this,g),this.config=a,this}return M(g,[{key:"createImageThWithSingleCategorySingleGroup",value:function(a){var b=[],e=!1;var f=A.createNodeDisplayTitleAndSubtitle();f+='<div class = "cui__image__thumbnail__container mr-1 ">';
      a.forEach(function(a,d){var c=a[0].da_ddf;if(a[1].da_meob.da_disob){e=!0;b.push(c);var g=f,h=c.imgCaption;g=g+'<div class="mb-2 col-3 col-sm-2 col-md-2 col-lg-2 col-xl-2 cui__image__thumbnail" ><div class ="img-thumbnail img-fluid cui__thumbnail__descriptor"><img class="d-block w-100" src="'+c.imgSrc+'" alt="First slide"></div>';if(null!=h||void 0!=h)g=g+'<div class = "cui__image__caption">'+h+"</div> ";f=g+"</div>"}});e||d.showErrorPopUp(k.oopsContentNotFoundMsg);d.createImageModal(b);return f+=
        "</div>"}},{key:"createImageThWithSingleCategoryMultipleGroups",value:function(a,b,e){function f(a){a=y.concat("-",a.toString(),b.toString());c.imgGroups.push(a);return a}var g=!1,m=[],r=!1,l=0,q=1;this.removeImgGroupSelectorButton(e);this.removeImgGroupNamesFromCDO(e);c.imgGroupCountPerCategory=[];var p=A.createNodeDisplayTitleAndSubtitle();var y=k.imgThumbnailGroupClassName;p+='<div class = "cui__image__thumbnail__container mr-1 ">';var v=k.maxImgsInThumbnailGroup;var w=f(q);a.forEach(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             e){var d=a[0].da_ddf;if(a[1].da_meob.da_disob){r=!0;l+=1;if(l>v){var c=q;v+=k.maxImgsInThumbnailGroup;g=!0;q=c+1;w=f(q)}c=w;d.imgThumbnailGroupClassName=c;d.groupName=c;d.imgGroupTitle=void 0;c=p;var h=w,y=d.imgSrc,P=d.imgCaption;g||0!=b?c=c+'<div class="mt-1 mb-2 col-3 col-sm-2 col-md-2 col-lg-2 col-xl-2 cui__image__thumbnail cui__image__thumbnail__hide '+h+'" >':(m.push(d),c=c+'<div class="mb-2 col-3 col-sm-2 col-md-2 col-lg-2 col-xl-2 cui__image__thumbnail '+h+'" >');c=c+'<img class="img-thumbnail img-fluid" src= "'+
    y+'" alt="">';if(null!=P||void 0!=P)c=c+'<div class = "cui__image__caption">'+P+"</div> ";p=c+"</div>"}});r||d.showErrorPopUp(k.oopsContentNotFoundMsg);this.recordImgGroupCountForCategory(b,q);1<q&&this.addImgGroupSelectorButton(e);d.createImageModal(m);return p+="</div>"}},{key:"OldcreateImageThWithMultipleCategories",value:function(a,b,e){var f,g=[];this.removeImgGroupSelectorButton(nodeObj);this.removeImgGroupNamesFromCDO(nodeObj);c.imgGroupCountPerCategory=[];var k=A.createNodeDisplayTitleAndSubtitle();
      k+='<div class = "cui__image__thumbnail__container mr-1 ">';a.forEach(function(a,e){f=b.createImageThForCategory([a],e,k,g);k=f.innerHTML;g=f.imgObjArrayForModal});this.addImgGroupSelectorButton(e);d.createImageModal(g);return k+="</div>"}},{key:"OldcreateImageThForCategory",value:function(a,b,e,d){function f(a){a=p.concat("-",a.toString(),b.toString());c.imgGroups.push(a);return a}var g=!1,r=0,l=1;var q=e;var p=k.imgThumbnailGroupClassName;var y=k.maxImgsInThumbnailGroup;var v=f(l);a.forEach(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 e){var c=a[0].da_ddf;if(a[1].da_meob.da_disob){r+=1;if(r>y){var h=l;y+=k.maxImgsInThumbnailGroup;g=!0;l=h+1;v=f(l)}h=v;c.imgThumbnailGroupClassName=h;c.groupName=h;c.imgGroupTitle=void 0;h=q;var m=v,p=c.imgSrc,w=c.imgCaption;g||0!=b?h=h+'<div class="mt-1 mb-2 col-3 col-sm-2 col-md-2 col-lg-2 col-xl-2 cui__image__thumbnail cui__image__thumbnail__hide '+m+'" >':(d.push(c),h=h+'<div class="mb-2 col-3 col-sm-2 col-md-2 col-lg-2 col-xl-2 cui__image__thumbnail '+m+'" >');h=h+'<img class="img-thumbnail img-fluid" src= "'+
    p+'" alt="">';if(null!=w||void 0!=w||null!=w)h=h+'<div class = "cui__image__caption">'+w+"</div> ";q=h+"</div>"}});this.recordImgGroupCountForCategory(b,l);return{innerHTML:q,imgObjArrayForModal:d}}},{key:"recordImgGroupCountForCategory",value:function(a,b){c.imgGroupCountPerCategory.push({categoryID:a,imgGroupCount:b})}},{key:"checkIfImgGroupSelectorButtonsNotAdded",value:function(){if(0!=c.imgThumbnailNodeList.length)for(var a=0;a<c.imgThumbnailNodeList.length;a++)if(c.imgThumbnailNodeList[a].nodeID==
    c.currentNodeID)return!1;c.imgThumbnailNodeList.push({nodeID:c.currentNodeID});return!0}},{key:"addImgGroupSelectorButton",value:function(a){var b,e=1,d=a.rs_obj.qr_obj.qr_dobj;c.imgGroupCountPerCategory.forEach(function(a,b){e+=a.imgGroupCount});for(var g=c.imgGroupCountPerCategory.length-1;0<=g;g--){a=c.imgGroupCountPerCategory[g].categoryID;for(var m=b=c.imgGroupCountPerCategory[g].imgGroupCount;1<=m;m--)b={},--e,b.qr_opty=e.toString(),b.fillerObjectCategoryToShow="",b.fillerObjectSubcategoryToShow=
      "",b.ntosh=k.imgThumbnailGroupClassName.concat("-",m,a),b.parlab=!1,d.splice(0,0,b)}}},{key:"removeImgGroupSelectorButton",value:function(a){a=a.rs_obj.qr_obj.qr_dobj;for(var b=a.length-1;0<=b;b--){var e=a[b].qr_opty;"1"!=e&&"2"!=e&&"3"!=e&&"4"!=e&&"5"!=e||a.splice(b,1)}}},{key:"removeImgGroupNamesFromCDO",value:function(a){a.ms_obj.conobj.cdo.forEach(function(a,e){var b=a[0].da_ddf;void 0!=b.groupName&&delete b.groupName;void 0!=b.imgThumbnailGroupClassName&&delete b.imgThumbnailGroupClassName})}},
    {key:"render",value:function(a,b,e,d,c){a=document.createElement("div");a.classList.add(b.config.messageBubbleClass);b=this.config;a.innerHTML=b.length>k.maxImgsInThumbnailGroup?this.createImageThWithSingleCategoryMultipleGroups(b,0,c):this.createImageThWithSingleCategorySingleGroup(b,0,c);return a}}]),g}(),sa=function(){function c(a){return L(this,c),this.config=a,this}return M(c,[{key:"parseDocWithCarousel",value:function(a){var b,e,f,c,g,r,l,q,p,y,v,w,u,x=0,B=!1;var z=A.createNodeDisplayTitleAndSubtitle();
      z+='<div id = "cui__doc__media__container" class="mt-2">';z+='<div id="docCarouselControlID" class="carousel slide carousel-fade" data-ride="carousel" data-wrap="true" data-touch ="true">';z+='<div class="carousel-inner">';a.forEach(function(a,h){var k=a[0].da_ddf;if(a[1].da_meob.da_disob){B=!0;b=k.docTitle;e=k.docSubtitle;f=k.docSummary;c=k.docDetails;g=k.docMediaTitle1;r=k.docMediaSource1;l=k.docMediaTitle2;q=k.docMediaSource2;p=k.docMediaTitle3;y=k.docMediaSource3;v=k.docMediaTitle4;w=k.docMediaSource4;
        u=k.docCallToAction;z=d.makeCarouselItemActiveOrInactive(x,z);x+=1;k=z+='<div class="col-12 mb-2 cui__doc__descriptor" >';void 0!=b&&(k=k+'<div class="cui__doc__title  mb-1">'+b+"</div>");void 0!=e&&(k=k+'<div class="cui__doc__subtitle  mb-1">'+e+"</div>");k=z=k;void 0!=f&&(k=k+'<div class="cui__description__text mt-1 mb-1">'+f+"</div>");k=z=k;if(void 0!=c){k+="<ul class>";for(var m=0;m<c.length;m++)k+="<li>",k=k+'<div class = "cui__doc__details__bullet pb-2 pl-1 pr-1 ml-1 mr-1 mt-1 mb-1">'+c[m]+
        "</div> ",k+="</li>";k+="</ul>"}z=k;z+='<div id = "cui__docs__container" class="mt-2">';void 0!=g&&""!=g&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title ">'+g+"</div>",void 0!=r&&""!=r&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+r+" >"+u+"</button>"),z=k+"</div>");void 0!=l&&""!=l&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title">'+l+"</div>",void 0!=q&&""!=q&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+
        q+" >"+u+"</button>"),z=k+"</div>");void 0!=p&&""!=p&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title">'+p+"</div>",void 0!=y&&""!=y&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+y+" >"+u+"</button>"),z=k+"</div>");void 0!=v&&""!=v&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title">'+v+"</div>",void 0!=w&&""!=w&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+
        w+" >"+u+"</button>"),z=k+"</div>");z+="</div>";z+="</div>";z+="</div>"}});B||d.showErrorPopUp(k.oopsContentNotFoundMsg);z+="</div>";z+='<a class="carousel-control-prev" href="#docCarouselControlID" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span></a><a class="carousel-control-next" href="#docCarouselControlID" role="button" data-slide="next"><span class="carousel-control-next-icon"></span></a>';z+="</div>";return z+="</div>"}},{key:"parseDocWithoutCarousel",value:function(a){var b,
    e,f,c,g,r,l,q,p,y,v,w,u,x=0,B=!1;var z=A.createNodeDisplayTitleAndSubtitle();z+='<div id = "cui__doc__media__container" class="mt-2">';a.forEach(function(a,h){var k=a[0].da_ddf;if(a[1].da_meob.da_disob){B=!0;b=k.docTitle;e=k.docSubtitle;f=k.docSummary;c=k.docDetails;g=k.docMediaTitle1;r=k.docMediaSource1;l=k.docMediaTitle2;q=k.docMediaSource2;p=k.docMediaTitle3;y=k.docMediaSource3;v=k.docMediaTitle4;w=k.docMediaSource4;u=k.docCallToAction;z=d.makeCarouselItemActiveOrInactive(x,z);x+=1;k=z+='<div class="col-12 mb-2 cui__doc__descriptor" >';
      void 0!=b&&(k=k+'<div class="cui__doc__title mb-1">'+b+"</div>");void 0!=e&&(k=k+'<div class="cui__doc__subtitle mb-1">'+e+"</div>");k=z=k;void 0!=f&&(k=k+'<div class="cui__description__text mt-2 mb-2">'+f+"</div>");k=z=k;if(void 0!=c){k+="<ul class>";for(var m=0;m<c.length;m++)k+="<li>",k=k+'<div class = "cui__doc__details__bullet pb-1 ">'+c[m]+"</div> ",k+="</li>";k+="</ul>"}z=k;z+='<div id = "cui__docs__container" class="mt-2">';void 0!=g&&""!=g&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title ">'+
      g+"</div>",void 0!=r&&""!=r&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+r+" >"+u+"</button>"),z=k+"</div>");void 0!=l&&""!=l&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title">'+l+"</div>",void 0!=q&&""!=q&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+q+" >"+u+"</button>"),z=k+"</div>");void 0!=p&&""!=p&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title">'+
      p+"</div>",void 0!=y&&""!=y&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+y+" >"+u+"</button>"),z=k+"</div>");void 0!=v&&""!=v&&(k=z,k=k+'<div class="cui__doc__container mt-1 ml-2 mb-1 mr-2"><div class="cui__doc__src__title">'+v+"</div>",void 0!=w&&""!=w&&(k=k+' <button type="button"  class="btn btn-primary" data-doc-src = '+w+" >"+u+"</button>"),z=k+"</div>");z+="</div>";z+="</div>";z+="</div>"}});B||d.showErrorPopUp(k.oopsContentNotFoundMsg);return z+="</div>"}},{key:"parseDocThumbnail",
    value:function(a){var b,e,d,c,g,k,l,q;var p='<div id = "cui__doc__media__container" class="mt-2">';a.forEach(function(a,f){var h=a[0].da_ddf;a[1].da_meob.da_disob&&(b=h.docTitle,e=h.docSubtitle,d=h.docLeftHandSideFooter1,c=h.docLeftHandSideFooter2,g=h.docRightHandSideFooter1,k=h.docRightHandSideFooter2,l=h.docCallToAction,q=h.docMediaSource,p+='<div class="col-6 mb-2 cui__doc__descriptor" >',h=p+="<a>",void 0!=b&&(h=h+'<div class="cui__doc__title">'+b+"</div>"),void 0!=e&&(h=h+'<div class="cui__doc__subtitle mb-1">'+
      e+"</div>"),h=p=h,h=h+'<div class="cui__doc__call__to__action mt-4"> <button type="button"  class="btn btn-primary " >'+l+"</button>",h=p=h+"</div>",h+='<div class="cui__lhs__rhs__footer1__row mt-4">',void 0!=d&&(h=h+'<div class="cui__lhs__footer1 ">'+d+"</div>"),void 0!=g&&(h=h+'<div class="cui__rhs__footer1">'+g+"</div>"),h=p=h+"</div>",h+='<div class="cui__lhs__rhs__footer2__row ">',void 0!=c&&(h=h+'<div class="cui__lhs__footer2">'+c+"</div>"),void 0!=k&&(h=h+'<div class="cui__rhs__footer2">'+
      k+"</div>"),h=p=h+"</div>",p=h=h+'<doc class="cui__doc__media__object" preload=\'auto\'> <source class="cui__doc__media__file" src='+q+"> </doc>",p+="</a>",p+="</div>")});return p+="</div>"}},{key:"render",value:function(a,b,e,d){a=document.createElement("div");a.classList.add(b.config.messageBubbleClass);switch(d){case "th":a.innerHTML=this.parseDocThumbnail(this.config);break;case "fs":a.innerHTML=1<this.config.length?this.parseDocWithCarousel(this.config):this.parseDocWithoutCarousel(this.config);
      break;default:console.log("err_16 "+d)}return a}}]),c}(),u=function(){return{checkVisitorType:function(){return null==u.getItem(k.botID)?"newVisitor":"returningVisitor"},cookieGoalCompletion:function(d){u.setItem(k.goalStatus,d,k.mediumExpirationPeriod,k.cookiePath);c.campaignGoalAchieved=!0},checkGoalCompletion:function(){return u.getItem(k.uidKey)},cookieClientSessionID:function(){var c=sessionStorage.getItem(k.sessID);null==c&&(c=d.getRandomDigit(3),sessionStorage.setItem(k.sessID,c));c=u.getItem(k.cumSessCnt);
      c=null==c?1:Number(c)+1;u.setItem(k.cumSessCnt,c,k.mediumExpirationPeriod,k.cookiePath)},cookiePageViewCount:function(){var d=sessionStorage.getItem(k.sessPVcnt);d=null==d?1:Number(d)+1;var a=u.getItem(k.cumPVcnt);a=null==a?1:Number(a)+1;sessionStorage.setItem(k.sessPVcnt,d);u.setItem(k.cumPVcnt,a,k.mediumExpirationPeriod,k.cookiePath)},cookieNodeImpressionCount:function(){var d=sessionStorage.getItem(k.nodeImpSessCnt);d=null==d?1:Number(d)+1;var a=u.getItem(k.nodeImpCumCnt);a=null==a?1:Number(a)+
    1;sessionStorage.setItem(k.nodeImpSessCnt,d);u.setItem(k.nodeImpCumCnt,a,k.mediumExpirationPeriod,k.cookiePath)},cookieConversionAttemptCount:function(){var d=sessionStorage.getItem(k.cxSessAttemts);d=null==d?1:Number(d)+1;var a=u.getItem(k.cxCumAttemts);a=null==a?1:Number(a)+1;sessionStorage.setItem(k.cxSessAttemts,d);u.setItem(k.cxCumAttemts,a,k.mediumExpirationPeriod,k.cookiePath)},cookieThemeImpressionCount:function(){var d=sessionStorage.getItem(k.themeImpSessCnt);d=null==d?1:Number(d)+1;var a=
      u.getItem(k.themeImpCumCnt);a=null==a?1:Number(a)+1;sessionStorage.setItem(k.themeImpSessCnt,d);u.setItem(k.themeImpCumCnt,a,k.mediumExpirationPeriod,k.cookiePath)},cookieProAttemptCount:function(){null==sessionStorage.getItem(k.proSessConvAttempts)&&sessionStorage.setItem(k.proSessConvAttempts,1);var d=u.getItem(k.proCumConvAttempts);d=null==d?1:Number(d)+1;u.setItem(k.proCumConvAttempts,d,k.mediumExpirationPeriod,k.cookiePath)},cookieVisitDuration:function(d){var a=sessionStorage.getItem(k.sessDuration);
      null==a?sessionStorage.setItem(k.sessDuration,d):(a=Number(a)+d,sessionStorage.setItem(k.sessDuration,a));a=u.getItem(k.cumDuration);a=null==a?d:Number(a)+d;u.setItem(k.cumDuration,a,k.mediumExpirationPeriod,k.cookiePath)},cookieConversionNodeHistory:function(d){var a=[];var b=localStorage.getItem(k.cxSuccHistory);d={sid:sessionStorage.getItem(k.sessID),nid:d};null!=b&&(a=JSON.parse(b));a.push(d);localStorage.setItem(k.cxSuccHistory,JSON.stringify(a))},cookieConversationThemeHistory:function(d){var a=
      [];var b=localStorage.getItem(k.convThemeHistory);d={sid:sessionStorage.getItem(k.sessID),thid:d};null!=b&&(a=JSON.parse(b));a.push(d);localStorage.setItem(k.convThemeHistory,JSON.stringify(a))},clearCookieAndLocalHistory:function(){localStorage.clear();sessionStorage.clear();var d=document.cookie.split(";");for(var a=0;a<d.length;++a){var b=d[a].toString().split("=");b=b[0];"_cuid"!=b&&" _cuid"!=b&&(document.cookie=b+"=;expires=Jan 1970 00:00:00 GMT;path=/")}},cookieAppropriateURLParams:function(){void 0!=
    c.visitorInterest&&u.setItem(k.visitorContext,c.visitorInterest,k.mediumExpirationPeriod,k.cookiePath);void 0!=c.fnam&&u.setItem(k.visitorName,c.fnam,k.mediumExpirationPeriod,k.cookiePath)},sendNodeImpression:function(c,a,b){var e={};e.nodID=c;e.botID=b;e.nodcat=a;e.eventType="nodeImpression";try{D.Chalakh.casq.push(["sendNodeImpression",e])}catch(f){d.handleError("err_90")}},sendErrorCode:function(c,a,b){var e={};e.botID=b;e.nodID=c;e.errorCode=a;e.eventType="errorCondition";try{D.Chalakh.casq.push(["sendErrorCode",
      e])}catch(f){d.handleError("err_91")}},sendConversationData:function(c,a,b,e,f){var g={};g.nodID=c;g.botID=a;g.eventType=b;g.eventState=e;g.initiationMode=f;try{D.Chalakh.casq.push(["sendConversationData",g])}catch(m){d.handleError("err_92")}},sendExitData:function(c,a,b,e){var f={};f.nodID=c;f.botID=a;f.eventType=b;f.exitType=e;try{D.Chalakh.casq.push(["sendExitData",f])}catch(h){d.handleError("err_93")}},sendConversionData:function(c,a,b,e,f){var g={};g.nodID=c;g.botID=a;g.eventType=b;g.cxEventState=
      e;try{var k=f.rs_obj.pr_obj.p_mo.p_seg}catch(r){d.handleError("err_94")}g.cxp_seg=k;D.Chalakh.casq.push(["sendConversionData",g])},sendUserSelectionData:function(d,a,b,e,c){var f={};f.nodID=d;f.botID=a;f.eventType=b;f.selectionsObject=e;f.selectionQuestion=c;D.Chalakh.casq.push(["sendUserSelectionData",f])},sendUserDemographicData:function(d,a,b,e,c){var f={};f.nodID=d;f.botID=a;f.eventType=b;f.demoQuestion=c;f.demoValuesObject=e;D.Chalakh.casq.push(["sendUserDemographicData",f])},sendMediaUsageData:function(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        a,b,e,c){var f={};f.nodID=d;f.botID=a;f.eventType=b;f.mediaType=e;f.mediaFile=c;D.Chalakh.casq.push(["sendMediaUsageData",f])},getItem:function(d){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(d).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(d,a,b,e,c,h){if(!d||/^(?:expires|max\-age|path|domain|secure)$/i.test(d))return!1;var f="";if(b)switch(b.constructor){case Number:f=b===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":
    "; max-age="+b;break;case String:f="; expires="+b;break;case Date:f="; expires="+b.toUTCString()}return document.cookie=encodeURIComponent(d)+"="+encodeURIComponent(a)+f+(c?"; domain="+c:"")+(e?"; path="+e:"")+(h?"; secure":""),!0},removeItem:function(d,a,b){return!(!d||!this.hasItem(d))&&(document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; domain="+b:"")+(a?"; path="+a:""),!0)},hasItem:function(d){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(d).replace(/[\-\.\+\*]/g,
    "\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){for(var d=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/),a=0;a<d.length;a++)d[a]=decodeURIComponent(d[a]);return d}}}(),B=function(){return{mediaPlay:function(g,a){if(3<=g.readyState){c.loadMediaCounter=0;B.updateTimer(g,a);try{g.play()}catch(b){d.handleError("err_95")}c.updateCurrentTimeTimeOut=setInterval(function(){B.updateTimer(g,a)},2E3)}else{if(0==c.loadMediaCounter){console.log("loading media file from play button",
    c.loadMediaCounter);try{g.load()}catch(b){d.handleError("err_95")}c.loadMediaCounter+=1}c.mediaPlayTimeOut=setTimeout(function(){B.mediaPlay(g)},500);console.log("media file not ready - time out value is "+c.mediaPlayTimeOut)}},mediaPause:function(c){try{0<c.currentTime&&!c.paused&&c.pause()}catch(a){d.handleError("err_96")}},mediaUnPause:function(c,a){try{"patchAudio"!=a?0<c.currentTime&&c.paused&&c.play():c.play()}catch(b){d.handleError("err_96")}},mediaMute:function(c){try{0<c.currentTime&&!c.muted&&
    (c.muted=!0)}catch(a){d.handleError("err_96")}},mediaUnMute:function(c){try{c.muted&&(c.muted=!1,console.log("media file being unmuted"))}catch(a){d.handleError("err_96")}},mediaStop:function(g,a){try{g.pause(),g.currentTime=0,B.updateTimer(g,a)}catch(b){d.handleError("err_97")}clearTimeout(c.mediaPlayTimeOut);clearInterval(c.updateCurrentTimeTimeOut)},mediaBackward:function(c){c.pause();try{3>=c.currentTime?mediaStop(c):c.currentTime-=3}catch(a){d.handleError("err_98")}c.play(c)},mediaForward:function(c){c.pause(c);
      if(c.currentTime>=c.duration-3)mediaStop(c);else try{c.currentTime+=3}catch(a){d.handleError("err_99")}c.play(c)},mediaStart:function(c,a){c.pause(c);try{c.currentTime=0}catch(b){d.handleError("err_100")}B.updateTimer(c,a)},mediaEnd:function(c,a){c.pause(c);try{c.currentTime=c.duration}catch(b){d.handleError("err_101")}B.updateTimer(c,a)},updateTimer:function(c,a){try{var b=c.currentTime.toFixed(1),e=c.duration.toFixed(1);b=b+"s\\"+e+"s";"audio"==a?$("#audio__timer").text(b):$("#video__timer").text(b)}catch(f){d.handleError("err_102")}}}}(),
  C=function(){return{checkIfVisitorToBePutInControl:function(){var c=!1,a=1-T.trafficAllocatedToBot;0!=a?Math.random().toFixed(2)>=a?d.logConversationFlowAlerts("alert_4"):(d.logConversationFlowAlerts("alert_6"),c=!0,sessionStorage.setItem(k.userInControl,1)):d.logConversationFlowAlerts("alert_9");return c},checkPersistenceThreshold:function(){var c,a=!1;try{var b=u.getItem(k.botID);if(null!=b){x.forEach(function(a,d){a.c_r_m.id==b&&(c=d)});if(void 0!=c){var e=x[c].c_r_m.c_r_ge.c_r_coperl;var f=e.split(":")}else d.handleError("err_45");
      if("SE"==f[1]){var h=k.proSessConvAttempts;var m=Number(sessionStorage.getItem(h))}else h=k.proCumConvAttempts,m=Number(u.getItem(h));null!=m&&m>f[0]&&(d.logConversationFlowAlerts("alert_1"),a=!0);return a}d.handleError("err_103")}catch(r){d.handleError("err_104")}},checkDeviceTrigger:function(){var g=!0;try{var a=T.devices[0].split(",");if(0!=a.length)return a.forEach(function(a,d){"all"==a?g=!1:c.device==a&&(g=!1)}),g;d.logWarning("warn_4");return!1}catch(b){d.handleError("err_105")}},checkTrafficSourceTrigger:function(){var g=
      !0;console.log("channel in chat.js is "+c.trafficSource);try{var a=T.trafficSource[0].split(",");if(0!=a.length)return a.forEach(function(a,d){"all"==a?g=!1:c.trafficSource==a&&(g=!1)}),g;d.logWarning("warn_3");return!1}catch(b){d.handleError("err_106")}},checkScheduleTrigger:function(){function c(){var a=new Date,b=a.getTimezoneOffset()/60;return a.getHours()+b}function a(a,b){a=Number(a);switch(b){case "EST":var c=a+5;break;case "CST":c=a+6;break;case "MST":c=a+7;break;case "PST":c=a+8;break;default:d.handleError("err_107a")}return c}
      var b=!0;try{var e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[(new Date).getDay()],f=c(),h=T.schedule,k=h.timeZone,r=h.hours;if(0!=r.length)return r.forEach(function(d,c){if(d.day==e){var g=a(d.from,k),h=a(d.to,k);f>=g&&f<=h&&(b=!1)}}),b;d.logWarning("warn_5");return!1}catch(l){d.handleError("err_107")}},checkRegionTrigger:function(){var g=!0;try{var a=T.region[0].split(",");if(0!=a.length)return a.forEach(function(a,d){"en-US"==c.language&&"USA"==a?g=!1:"en-GB"==c.language&&
    "UK"==a?g=!1:"en-CA"==c.language&&"CANADA"==a?g=!1:"fr-CA"==c.language&&"CANADA"==a?g=!1:"en-IE"==c.language&&"IRELAND"==a&&(g=!1)}),g;d.logWarning("warn_6");return!1}catch(b){d.handleError("err_108")}},checkIfCampaignTargetsNotMet:function(){var c;return(c=C.checkDeviceTrigger())?(d.logWarning("warn_22"),c):(c=C.checkTrafficSourceTrigger())?(d.logWarning("warn_23"),c):(c=C.checkScheduleTrigger())?(d.logWarning("warn_24"),c):(c=C.checkRegionTrigger())?(d.logWarning("warn_25"),c):!1},checkVisitorEligibility:function(){var c;
      if(1==u.getItem(k.goalStatus))return d.logConversationFlowAlerts("alert_2"),"goal completed";if(null!=sessionStorage.getItem(k.userInControl))return d.logConversationFlowAlerts("alert_3"),"new visitor but session already underway";if(null==u.getItem(k.botID)){if(0!=T.trafficAllocatedToBot&&(c=C.checkIfVisitorToBePutInControl()))return"visitor put in control"}else if(c=C.checkPersistenceThreshold())return"conversation persistence exceeded";return C.checkIfCampaignTargetsNotMet()?"campaign target not met":
        1},freshStartOrRestart:function(){var d=sessionStorage.getItem(k.sessID),a=u.checkVisitorType(),b=u.getItem(k.convStarted);sessionStorage.getItem(k.convOpenURL);var c=sessionStorage.getItem(k.sessPVcnt),f=sessionStorage.getItem(k.botURL),h,m;1==c?h="entrancePage":2==c?h="secondPage":h="deeperPage";null!=d?m=!1:m=!0;u.cookieClientSessionID();c=u.getItem(k.cumSessCnt);switch(a){case "newVisitor":return freshStart;case "returningVisitor":if(m)return null==b?"freshStart":2==c?"restartNewSessionSecondVisit":
      "restartNewSessionMultipleVisits";switch(h){case "entrancePage":return"restartOngoingSessionEntrancePage";case "secondPage":return"botURL"==f?"restartOngoingSessionSecondBotPage":"restartOngoingSessionSecondUserPage";case "deeperPage":return"botURL"==f?"restartOngoingSessionDeeperBotPage":"restartOngoingSessionDeeperUserPage";default:console.log("unknown currentPage type")}break;default:console.log("unknown visitor type")}console.log("Fresh Start or Restart Logic Parameters: session id "+d+" conv started "+
      b);console.log(" visitor type "+a)},checkDurTrigger:function(){try{var g=x[c.chrIDObject.chrIndex].c_r_m.c_r_ge.c_r_itrig.split("-")[1].split(":"),a=g[2]}catch(e){d.handleError("err_110")}if("DU"!=g[0])console.log("err_20");else if("SE"==g[1]){var b=k.sessDuration;b=Number(sessionStorage.getItem(b))}else b=k.cumDuration,b=Number(u.getItem(b));return b>=a?0:a-b},checkPVTrigger:function(){try{var g=c.chrIDObject.chrIndex;var a=x[g].c_r_m.c_r_ge.c_r_itrig;var b=a.split("-");var e=b[0];var f=e.split(":");
      var h=f[2]}catch(r){d.handleError("err_111")}if("PV"!=f[0])console.log("err_21");else if("SE"==f[1]){g=k.sessPVcnt;var m=Number(sessionStorage.getItem(g))}else g=k.cumPVcnt,m=Number(u.getItem(g));return m>=h?!0:!1},setToolTipAndHybridActivationDelays:function(){try{var g=c.chrIDObject.chrIndex;var a=x[g].c_r_m.c_r_ge.c_r_usaci;var b=a.split("-");var e=b[0];var f=b[1];var h=b[2];k.chalakIconToolTipDisplayDelay=1E3*e.split(":")[1];k.chalakIconToolTipHideDelay=1E3*f.split(":")[1];k.chalakIconHybridProactiveDelay=
      1E3*h.split(":")[1]}catch(m){d.handleError("err_111")}},getChrObject:function(c){try{for(var a=0;a<x.length;a++)if(x[a].c_r_m.id==c)return u.setItem(k.botID,x[a].c_r_m.id,k.mediumExpirationPeriod,k.cookiePath),{chrID:x[a].c_r_m.id,chrIndex:a}}catch(b){d.handleError("err_111a")}},assignChrID:function(c){c=Math.random().toFixed(2);var a=0;try{if(1==x.length)return x[0].c_r_m.id;x.sort(function(a,b){return parseFloat(a.c_r_m.trafficAllocation)-parseFloat(b.c_r_m.trafficAllocation)});for(var b=0;b<x.length;b++)0==
    b?(x[b].c_r_m.lowerTrafficAlocationBound=0,x[b].c_r_m.upperTrafficAlocationBound=x[b].c_r_m.trafficAllocation):(x[b].c_r_m.lowerTrafficAlocationBound=a,x[b].c_r_m.upperTrafficAlocationBound=a+x[b].c_r_m.trafficAllocation),a=x[b].c_r_m.upperTrafficAlocationBound;for(b=0;b<x.length;b++)if(c>=x[b].c_r_m.lowerTrafficAlocationBound&&c<=x[b].c_r_m.upperTrafficAlocationBound)return x[b].c_r_m.id}catch(e){d.handleError("err_112")}d.handleError("err_113");return!1},retrieveChrID:function(){var c=u.getItem(k.botID);
      try{for(var a=0;a<x.length;a++)if(x[a].c_r_m.id==c)return{chrID:x[a].c_r_m.id,chrIndex:a}}catch(b){d.handleError("err_114")}C.assignChrID()},findExitThemeName:function(){if("proactiveExitMode"==c.botState)return k.unsuccessfulExitTheme;if(1==c.campaignGoalAchieved)return c.botState="proactiveExitMode",k.successfulExitTheme;if(Number(sessionStorage.getItem(k.nodeImpSessCnt))>=k.minEngagementThreshold)return sessionStorage.setItem(k.nodeImpSessCnt,0),c.botState="proactiveExitMode",k.oneLastConversionTry;
      c.botState="passiveExitMode";return k.switchBotToPassiveMode},findExitTheme:function(g){try{for(var a=x[c.chrIDObject.chrIndex].c_r_m.cso_int,b=0;b<a.length;b++)if(a[b].impact==g)return a[b].th_m;d.handleError("err_114A")}catch(e){d.handleError("err_114A")}},findStartTheme:function(g){try{var a=c.chrIDObject.chrIndex;var b=x[a].c_r_m.cso_sta;for(a=0;a<b.length;a++)if(b[a].impact==g)return b[a].th_m}catch(e){d.handleError("err_117")}},findRestartThemeName:function(){try{var g=c.restartScenario;var a=
      x[c.chrIDObject.chrIndex].c_r_m.c_r_ge.c_r_pe}catch(e){d.handleError("err_118")}switch(c.botState){case "passiveExitMode":var b=k.reengageVisitorTheme;c.botState="proactiveRestartMode";break;case "passiveRestartMode":c.botState="proactiveRestartMode";switch(g){case "restartNewSessionMultipleVisits":b=k.visitorRestartPreferenceTheme;break;case "restartOngoingSessionEntrancePage":b=k.reengageVisitorTheme;break;case "restartOngoingSessionSecondUserPage":b=k.recapTopicToDiscussTheme;break;case "restartOngoingSessionDeeperUserPage":b=
      k.recapTopicToDiscussTheme;break;default:console.log("err_25"+g)}break;case "proactiveRestartMode":switch(g){case "restartNewSessionSecondVisit":b="bot"!=a?k.intrusiveRestartTheme:k.visitorRestartPreferenceTheme;break;case "restartNewSessionMultipleVisits":b=k.nonintrusiveRestartTheme;c.botState="passiveRestartMode";break;case "restartOngoingSessionEntrancePage":b=k.nonintrusiveRestartTheme;c.botState="passiveRestartMode";break;case "restartOngoingSessionSecondBotPage":b=k.visitorDeepDiveTheme;break;
      case "restartOngoingSessionDeeperBotPage":b=k.visitorDeepDiveTheme;break;case "restartOngoingSessionSecondUserPage":b=k.nonintrusiveRestartTheme;c.botState="passiveRestartMode";break;case "restartOngoingSessionDeeperUserPage":b=k.nonintrusiveRestartTheme;c.botState="passiveRestartMode";break;default:console.log("err_26"+g)}}return b},findRestartTheme:function(g){try{var a=c.chrIDObject.chrIndex;var b=x[a].c_r_m.cso_res;for(a=0;a<b.length;a++)if(b[a].impact==g)return b[a].th_m}catch(e){d.handleError("err_117")}},
    addNameToCpatchGlobalParam:function(c){var a,b;try{W.forEach(function(a,c){for(var d in a)"globalParameters"==d&&(b=a.globalParameters)})}catch(f){d.handleError("err_115")}try{b.forEach(function(b,d){for(var c in b)"visitorName"==b[c]&&(a=b)});var e=a.sentenceObject;e[0].fragmentObject[0].fragments.push(c)}catch(f){d.handleError("err_115")}},findSkipTheme:function(){return k.skipTheme},findStartInitiationMode:function(){var g;if(void 0==c.initiationMode)try{var a=c.chrIDObject.chrIndex;return g=x[a].c_r_m.c_r_ge.c_r_imod}catch(b){d.handleError("err_116")}else return c.initiationMode},
    setRestartInitiationTrigger:function(c){switch(c){case "restartNewSessionSecondVisit":var a=!0;break;case "restartNewSessionMultipleVisits":a=!0;break;case "restartOngoingSessionEntrancePage":a=!0;break;case "restartOngoingSessionSecondBotPage":a=!0;break;case "restartOngoingSessionDeeperBotPage":a=!0;break;case "restartOngoingSessionSecondUserPage":a=!0;break;case "restartOngoingSessionDeeperUserPage":a=!0;break;default:console.log("err_24"+c)}return a},findAndAddReturningVisitorName:function(){var c=
      u.getItem(k.visitorName);null!=c&&addNameToCpatchGlobalParam(c)},removeSuccessfulConversionProbes:function(){var g;try{var a=c.chrIDObject.chrIndex;var b=u.getItem(k.visitorContext);if(null!=b){"attendee"==b?g="sponsor":g="attendee";var e={csoConvert:I,csoMain:R};d.suppressContextualNodesInCSO(e,g)}}catch(r){d.handleError("err_119")}e=localStorage.getItem(k.cxSuccHistory);try{if(null!=e&&(a=c.chrIDObject.chrIndex,0!=x[a].c_r_m.cso_con.length)){var f=x[a].c_r_m.cso_con[0].th_m;var h=d.findAllThemeNodesInMotif("cso_con",
      I,f,!0);var m=JSON.parse(e);m.forEach(function(a,b){h.forEach(function(b,c){b._nid==a.nid&&(I[b.index].nmobj.dinod="never")})})}}catch(r){d.handleError("err_119")}},processPastConversationHistory:function(){C.removeSuccessfulConversionProbes();C.findAndAddReturningVisitorName()},changeContactConversionProbe:function(c){for(var a,b,e,f,g,k,r,l=0;l<x.length;l++){try{b=x[l].c_r_m.cso_con[0].th_m,a=d.findAllThemeNodesInMotif("cso_con",I,b,!0)}catch(v){d.logWarning("warn_2")}try{if(0!=a.length)for(var q=
      0;q<a.length;q++)if(e=a[q].index,f=I[e].rs_obj.pr_obj.p_rdo,g=I[e].rs_obj.pr_obj.p_mo,"getContact"==g.p_seg){for(var p=0;p<f.length;p++){k=f[p][1].da_meob;for(var y in c)k.da_obseg[0].da_ob_seg==y&&(k.da_disob="never")}r=!1;for(p=0;p<f.length;p++)k=f[p][1].da_meob,"never"!=k.da_disob&&(r=!0);0==r&&(I[e].nmobj.dinod="never",u.cookieConversionNodeHistory(I[e]._nid))}}catch(v){d.handleError("err_120")}}},processUTMCampaignParam:function(){var g,a;try{var b=c.urlParamObj.utm_campaign.split(":");var e=
      b[0];var f=b[1];"attn"==e?a="sponsor":"spons"==e?a="attendee":console.log("unknown target");"attn"==e?g="attendee":"spons"==e?g="sponsor":console.log("unknown target")}catch(h){d.handleError("err_121")}b={csoConvert:I,csoMain:R};void 0!=a&&d.suppressContextualNodesInCSO(b,a);c.visitorInterest=g;return{audienceTargetSegment:e,audienceTargetSubsegment:f}},OldgetDynamicResponse:function(c,a){function b(a,b){$.ajax({method:"GET",dataType:"json",url:k.getDynamicDataAPI+"?unid="+a+"&trid="+b,success:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  b,c){try{JSON.parse(a)}catch(l){JSON.stringify(a)}console.log(c.statusText,c.status);"dynamicDataMotif"==c.statusText?(U=a=a.cso_dyn,E.cso_dyn=a):console.log(c.statusText)},error:function(a,b,c,d){console.log(JSON.stringify(a));console.log("AJAX error: "+c+" : "+d)}})}try{b(c,a)}catch(e){d.handleError("err_121A")}},setCampaignTrackingID:function(){null==c.campaignID&&(null!=E.cso_tid?c.campaignID=E.cso_tid:d.handleError("err_122Z"))},processURLParams:function(){var g={};var a="anon";try{if(!$.isEmptyObject(c.urlParamObj))for(var b in c.urlParamObj)switch(b){case "utm_campaign":var e=
      C.processUTMCampaignParam();a=e.audienceTargetSegment;var f=e.audienceTargetSubsegment;break;case "utm_medium":g.email=!0;break;case "unid":c.userID=c.urlParamObj.unid;break;case "trid":c.campaignID=c.urlParamObj.trid;c.chrIDToActivate="cs_"+c.campaignID+"_1";break;case "inmod":c.initiationMode=c.urlParamObj.inmod;c.initiationMode=c.initiationMode.toUpperCase();break;default:console.log("err_27"+b)}C.setCampaignTrackingID();$.isEmptyObject(g)||C.changeContactConversionProbe(g)}catch(h){d.handleError("err_122")}d.suppressNodesInStartMotif(a,
      f)},restartConversation:function(g){function a(){var a=C.findRestartThemeName();a=C.findRestartTheme(a);try{d.findThemeNodes("cso_res",V,a),e=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index,f=V[e]}catch(m){d.handleError("err_123")}}function b(){d.tagAsNeverInterestNodeProbeThemeOptionNotInMainMotif();C.processPastConversationHistory();c.botState="proactiveRestartMode";a();"proactiveRestartMode"==c.botState?(u.sendConversationData(f._nid,c.chrIDObject.chrID,"conversationEvent","coAttempt","proactive"),
      u.sendConversationData(f._nid,c.chrIDObject.chrID,"conversationEvent","coOpen","proactive"),sessionStorage.setItem(k.convOpenURL,c.currentURL),u.cookieProAttemptCount(),d.adjustCSSVarstoMatchDeviceType(),d.makeChalakhFrameWide(),d.unhideHeader(),d.showBorderToMessageStream()):u.sendConversationData(f._nid,c.chrIDObject.chrID,"conversationEvent","coAttempt","passive");var b=setTimeout(function(){d.displaySubsequentNodeObjInTheme(f,!1,f.nmobj.nodcat,"nextNodeInTheme")},k.delayBeforeConversationStart);
      c.timeouts.push(b)}var e,f;c.chrIDObject=C.retrieveChrID();d.addHeaderTitle();c.restartScenario=g;0!=(C.setRestartInitiationTrigger(g)?!0:C.checkPVTrigger())&&(C.setToolTipAndHybridActivationDelays(),g=C.checkDurTrigger(),setTimeout(b,g))},initiateProactiveFreshConversation:function(g){console.log("starting fresh conversation in proactive mode");var a=function(a){a=C.findStartTheme(a);d.findThemeNodes("cso_sta",N,a);try{var b=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var f=N[b]}catch(h){d.handleError("err_126")}return f}(g);
      d.adjustCSSVarstoMatchDeviceType();d.makeChalakhFrameWide();d.unhideHeader();d.unhideConversationStream();d.showBorderToMessageStream();g=setTimeout(function(){try{var b=a.nmobj.nodcat}catch(e){d.handleError("err_125")}d.displaySubsequentNodeObjInTheme(a,!1,b,"nextNodeInTheme")},k.delayBeforeConversationStart);c.timeouts.push(g);return a},freshConversation:function(g){function a(a){console.log("starting fresh conversation in passive or hybrid mode");a=C.findStartTheme(a);d.findThemeNodes("cso_sta",
      N,a);try{f=c.currentThemeNodes[k.orderOfFirstNodeInTheme].index;var b=N[f];u.sendConversationData(b._nid,c.chrIDObject.chrID,"conversationEvent","coAttempt","passive")}catch(r){d.handleError("err_124")}a=setTimeout(function(){d.displayNode(b,!1,"forward",!0)},k.delayBeforeConversationStart);c.timeouts.push(a);return b}function b(){d.tagAsNeverInterestNodeProbeThemeOptionNotInMainMotif();var b=C.findStartInitiationMode();switch(b){case "PR-1":c.botState="proactiveFreshStartMode";b=C.initiateProactiveFreshConversation(b);
      u.sendConversationData(b._nid,c.chrIDObject.chrID,"conversationEvent","coAttempt","proactive");u.sendConversationData(b._nid,c.chrIDObject.chrID,"conversationEvent","coOpen","proactive");sessionStorage.setItem(k.convOpenURL,c.currentURL);u.cookieProAttemptCount();break;case "PA-1":c.botState="passiveFreshStartMode";a(b);break;case "HB-1":c.botState="hybridFreshStartMode";a(b);break;default:d.logConversationFlowAlerts("something messed up - initiation mode not well defined")}}function e(a){for(var b=
      0;b<x.length;b++)if(x[b].c_r_m.id==a)return!0;console.log("csid not legitimate");return!1}var f;if(void 0!=g)if(e(g))c.chrIDObject=C.getChrObject(g);else return;else g=C.assignChrID(),c.chrIDObject=C.getChrObject(g);d.addHeaderTitle();0!=C.checkPVTrigger()&&(C.setToolTipAndHybridActivationDelays(),g=C.checkDurTrigger(),setTimeout(b,g))},initiateConversation:function(d){if("desktop"!=c.device&&"mobile"!=c.device&&"ipad"!=c.device)console.log("initiateConveration error. device type unkown"+c.device);
    else{if(d){var a="freshStart";u.clearCookieAndLocalHistory()}else a=C.freshStartOrRestart();u.cookieAppropriateURLParams();u.cookiePageViewCount();null!=c.userID&&O.getDynamicResponse(c.userID,c.campaignID);"freshStart"==a?C.freshConversation(d):(console.log("conversationMode "+a),C.restartConversation(a))}}}}(),J=function(){return{QREventHandlers:function(g){g.stopPropagation();a:{try{var a=d.findNodeObj(c.currentNode).rs_obj.pr_obj.p_mo;if("tile"==a.p_rdc&&"t9"==a.p_rdsc&&0==c.visitorSelection.length){d.showErrorPopUp(k.invalidInputMessage);
      var b=!1;break a}b=!0;break a}catch(e){d.handleError("err_63a")}b=void 0}b&&(g=g.target,b=$(g).attr("data-next-node"),(void 0!=b?b.split("-"):[])[0]==k.imgThumbnailGroupClassName?d.processImgSelectorClick(b):d.processResponseClick(null,g,this,"QRbutton"))},tileT8EventHandler:function(g){g.stopPropagation();var a=d.findNodeObj(c.currentNode);(function(a){a=a.rs_obj.pr_obj.p_mo.p_rdsc;var b=document.documentElement;if("t10"==a&&"mobile"!=c.device||"t11"==a&&"mobile"!=c.device)b.style.setProperty("--cui__conversation__stream-max-height",
      "82vh"),b.style.setProperty("--cui__conversation__stream-min-height","82vh"),b.style.setProperty("--cui__bot__container-top","5vh"),b.style.setProperty("--cui__bot__container-top","5vh");"t10"!=a&&"t11"!=a||b.style.setProperty("--cui__footer-display","flex")})(a);var b=$(g.currentTarget).attr("data-tile-value");var e=$(g.currentTarget).attr("data-tile-name");(function(){try{var b=a.rs_obj.pr_obj.p_rdo;for(var c=0;c<b.length;c++){var e=b[c][0].da_ddf;"preFill"==e.valueType&&(e.valueType="")}}catch(r){d.handleError("err_27g")}})();
      d.storeRespTileSelectionInNode(e,b);g=d.createSelectionArray(b);b=d.createSelectionDataObject(e,b);d.sendResponseToBackEnd("#tile-response",b);b=d.createPseudoClickedButtonHTML();d.processResponseClick(null,b,this,"tile",g)},tileT5EventHandler:function(g){var a=d.checkIfSelectionOrDeselection(this);var b=$(this).parent()[0];var e=$(b).attr("tile-value");var f=$(b).attr("tile-name")+"-"+e;b=k.shortListIcon;e=k.selectedIcon;a?(c.visitorSelection.push(f),$(g.target).addClass("cui__tile__selected"),$(g.target).attr("src",
      e),c.conversionModalSuccess?c.leadConnectModalAttempts<k.leadConnectModalMaxAttempts&&(c.leadConnectModalAttempts+=1,d.showLeadConnectModal()):c.conversionModalAttempts<k.conversionModalMaxAttempts&&d.showConversionModal()):(c.visitorSelection=c.visitorSelection.filter(function(a){return a!==f}),$(g.target).removeClass("cui__tile__selected"),$(g.target).attr("src",b));return!1},tileT9EventHandler:function(g){var a=d.checkIfSelectionOrDeselection(this);var b=$(g.currentTarget).attr("data-tile-value");
      g=$(g.currentTarget).attr("data-tile-name");a?($(this).addClass("cui__tile__selected"),$(this).children("img").addClass("cui__img__make__opaque"),c.visitorSelection.push(g+"-"+b),d.storeRespTileSelectionInNode(g,b)):($(this).removeClass("cui__tile__selected"),$(this).children("img").removeClass("cui__img__make__opaque"),c.visitorSelection=d.removeTileSelectionFromVisitorSelection(g,b,c.visitorSelection),d.removeRespTileSelectionFromNode(g,b));return!1},tileT4EventHandler:function(c){$(".cui__bullet__modal").removeClass("cui__bullet__modal__hide");
      $("#cuiBulletModal").modal({backdrop:!1});return!1},handleFormSubmitButtonClick:function(g){function a(){var a;try{var b=$("#form-response :input");b.each(function(){"success"==this.id&&(a=this)})}catch(p){d.handleError("err_66a")}return a}function b(a){try{var b=$("#form-response :input");b.each(function(){"success"!=this.id&&"failure"!=this.id&&(a[this.name]=this.value)})}catch(p){d.handleError("err_66b")}return a}function e(a){var b=d.findNodeObj(c.currentNode);try{var e=b.rs_obj.pr_obj.p_rdo;
      for(var f in a)for(b=0;b<e.length;b++){var g=e[b][0].da_ddf;g.name==f&&(g.value=a[f])}}catch(w){d.handleError("err_66c")}}var f={};g.preventDefault();var h=g.data.ncat;g=g.data.node;if($("#form-response").valid()){try{f=b(f);e(f);d.sendResponseToBackEnd("#form-response",f);var k=1;var r=a()}catch(l){d.handleError("err_67")}d.processResponseClick(null,r,this,"form",null,h,k,g)}},handleFormNonSubmitButtonClick:function(c){d.processResponseClick(null,this,this,"form",null,c.data.ncat,0,c.data.node);
      return!1},handleConversionModalFormSubmitButtonClick:function(g){function a(a){try{var b=$("#conversion-modal-form-response :input");b.each(function(){"success"!=this.id&&"failure"!=this.id&&(a[this.name]=this.value)})}catch(h){d.handleError("err_66b")}return a}var b={};g.preventDefault();c.conversionModalAttempts+=1;if($("#conversion-modal-form-response").valid())try{b=a(b),d.sendResponseToBackEnd("#conversion-modal-form-response",b),c.conversionModalSuccess=!0,d.hideConversionModal()}catch(e){d.handleError("err_67")}},
    handleCloseConversionModalClick:function(g){d.hideConversionModal();c.conversionModalAttempts+=1},handleCloseLeadConnectModalClick:function(g){d.hideLeadConnectModal();c.leadConnectModalAttempts+=1},handleSurveyNodeSubmitButtonClick:function(g){function a(){var a;var b=$("#survey-response :input");try{b.each(function(){"survey-success"==this.id&&(a=this)})}catch(p){d.handleError("err_63b")}return a}function b(a){var b=$("#survey-response :input:checked");try{b.each(function(){a[this.name]=this.value})}catch(p){d.handleError("err_63c")}return a}
      function e(a){var b={},c=$("#other").val();void 0!=c&&null!=c&&""!=c&&(b.other=c);if(b!={})for(var d in b)a[d]=b[d];return a}function f(a){var b=d.findNodeObj(c.currentNode);try{var e=b.rs_obj.pr_obj.p_rdo;for(b=0;b<e.length;b++){var f=e[b][0].da_ddf;f.valueType=""}for(var g in a){var h=a[g];for(b=0;b<e.length;b++)f=e[b][0].da_ddf,f.name==g&&f.value==h&&(f.valueType="preFill")}}catch(K){d.handleError("err_63d")}}var h={},k=[];g.preventDefault();try{var r=a();h=b(h);h=e(h);f(h);d.sendResponseToBackEnd("#survey-response",
        h)}catch(l){d.handleError("err_65")}k=function(a,b){var c=$("#survey-response").attr("data-probe-id");if(a!={})for(var d in a){var e=c+"-"+a[d];b.push(e)}return b}(h,k);d.processResponseClick(null,r,this,"survey",k)},handleSurveyNodeNonSubmitButtonClick:function(c){d.processResponseClick(null,this,this,"survey",null);return!1},handleLeadConnectModalSubmitButtonClick:function(c){function a(){try{var a;var b=$("#lead-connect-modal-survey-response :input");b.each(function(){"textarea"==this.type&&(a=
      this.value)})}catch(r){d.handleError("err_66b")}return a}function b(a){var b=$("#lead-connect-modal-survey-response :input:checked");try{b.each(function(){a[this.name]=this.value})}catch(r){d.handleError("err_63c")}return a}function e(a){var b={},c=$("#other").val();void 0!=c&&null!=c&&""!=c&&(b.other=c);if(b!={})for(var d in b)a[d]=b[d];return a}var f={};c.preventDefault();try{f=b(f),f=e(f),a(),d.sendResponseToBackEnd("#lead-connect-modal-survey-response",f),d.hideLeadConnectModal()}catch(h){d.handleError("err_65")}}}}(),
  A=function(){return{getDataNextNode:function(c){switch(c){case "next":case "online shop":return"nextNodeInTheme";case "previous":return"previousNodeInTheme";default:d.handleError("err_90C")}},createTextBoxHTML:function(c,a,b,d,f,h){c+='<div class="text-box">';return(d?c+'<textarea class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3  mb-2 form-control cui__form__input__field" placeholder="'+a+'" rows="'+f+'" rows="'+f+'" form="'+h+'" name="'+b+'" required >':c+'<textarea class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3  mb-2 form-control cui__form__input__field" placeholder="'+
      a+'" rows="'+f+'" rows="'+f+'" form="'+h+'" name="'+b+'" >')+"</textarea></div>"},readQuickReplyOptionLabels:function(){var c;try{W.forEach(function(a,b){for(var d in a)"_qrl"==d&&(c=a._qrl)})}catch(a){S.handleError("err_88")}try{c.forEach(function(a,b){for(var c in a)window.Chalakh.runtime.quickReplyOptionLabelsObj.push({qrType:c,qrTypeLabels:a[c]})})}catch(a){S.handleError("err_88")}},getQuickReplyOptionLabels:function(c){0==window.Chalakh.runtime.quickReplyOptionLabelsObj.length&&A.readQuickReplyOptionLabels();
      try{var a=window.Chalakh.runtime.quickReplyOptionLabelsObj.filter(function(a){return a.qrType==c});var b=S.getRandomMinMax(0,a[0].qrTypeLabels.length-1);var d=a[0].qrTypeLabels[b]}catch(f){S.handleError("err_89")}return d},createNodeDisplayTitleAndSubtitle:function(g){function a(a,b){var c="";try{for(var e=a.rs_obj.pr_obj.p_rdo,f=b[0].split("-")[1],g=0;g<e.length;g++){var h=e[g][0].da_ddf;h.value==f&&(c=h.label)}}catch(G){d.handleError("err_70x")}return c}function b(){var a=c.displayedThemeNodes.length-
      1;return 0!=a&&(e=a-1,"searchNode"==d.findNodCategory(e))?!0:!1}var e;try{var f=d.createTextObjFromPatches("_ndn",c.currentNodeID);if(null!=f&&0!=f.length){var h=f[0][0].da_ddf.text[0];null==h&&(h="")}else if(b()){var k=d.findNodeObj(e);h=a(k,c.segmentSelectionArrayOfArrays[c.segmentSelectionArrayOfArrays.length-1])}else h="";var r=""}catch(l){d.handleError("err_70")}g='<div class = "cui__cdo__section__header">';""!=h&&void 0!=h&&(g=g+'<div class = "cui__cdo__section__header__title mb-1">'+h+"</div> ");
      ""!=r&&void 0!=r&&(g=g+'<div class = ".cui__cdo__section__header__subtitle" class="mb-1">'+r+"</div>");return g+"</div>"},createNodeDisplayName:function(c){return'<div class = "cui__cdo__section__header mb-3"><div class = "cui__cdo__section__header__title mb-1">'+c+"</div></div>"},createForm:function(c,a,b){var d,f,g,k,r;c.prdo.forEach(function(c,e){var h=c[0].da_ddf;if(1==c[1].da_meob.da_disob)if(f=h.name,k=h.label,g=h.value,null==g&&(g=""),d=h.required,"textBox"==h.fieldType)a=A.createTextBoxHTML(a,
      k,f,d,10,b);else if("phone"==h.fieldType){h=a;var l=window.Chalakh.st.telStringPattern;h=h+'<div class= cui__form__input__container><label for="'+f+'" >'+k+"</label>";h=d?h+'<input class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3  mb-2 form-control cui__form__input__field" pattern="'+l+'" type="tel" value="'+g+'" name="'+f+'" required >':h+'<input class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3  mb-2 form-control cui__form__input__field" pattern="'+l+'" type="tel" value="'+g+'" name="'+f+'" >';a=h+"</div>"}else h=
      a,r="email"==f?"email":"text",h=h+'<div class= cui__form__input__container><label for="'+f+'" >'+k+"</label>",h=d?h+'<input class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-2 form-control cui__form__input__field" type="'+r+'" value="'+g+'" name="'+f+'" required >':h+'<input class="mr-2 mr-sm-2 mr-md-2 mr-lg-3 mr-xl-3 mb-2 form-control cui__form__input__field" type="'+r+'" value="'+g+'" name="'+f+'" >',a=h+"</div>"});return a},createFormQR:function(c,a){var b,d;c.qrdo.forEach(function(c,e){var f=c.qr_opty;
      if("submit"==f){b=1;d="success";var g="submit"}else b=0,d="failure",g="button";var h="submit"==g?"nextNodeInTheme":"previousNodeInTheme";f=A.getQuickReplyOptionLabels(f);a+='<div class="cui__form__qr__button__container">';a=a+'<input type = "'+g+'" id = "'+d+'" class="form-button form-control cui__form__qr__button btn btn-outline-primary" value="'+f+'" data-success="'+b+'" data-next-node="'+h+'">';a+="</div>"});return a},createSurvey:function(c,a,b){var d=c.prdo,f,g,k,r,l,q;var p="sc"==c.prdsc?"radio":
      "checkbox";var u=function(){for(var a,b=!0,c=0;c<d.length;c++)if(a=d[c][0].da_ddf,"preFill"==a.valueType){b=!1;break}return b}();d.forEach(function(c,d){var e=c[0].da_ddf;f=p;g=e.valueType;k=e.name;l=e.label;r=e.required;q=e.value;if("textBox"==e.fieldType)a=A.createTextBoxHTML(a,l,k,r,8,b);else if("other"==e.fieldType)e=a,e=e+'<div class="form-check form-control cui__survey__input__field cui__survey__other__option mr-1 mr-sm-1 mr-md-1 mr-lg-1 mr-xl-1 mb-2  mb-2"><div><label for="other">'+l+"</label>",
      e=e+'</div><div><input class="form-check-input" type="text" id="other" name="'+k+'"></div>',a=e+"</div>";else{e=a;var h="preFill"==g?!0:!1;g+=" form-check form-control cui__survey__input__field mr-1 mr-sm-1 mr-md-1 mr-lg-1 mr-xl-1 mb-2";e=e+'<div class="'+g+' " >';e=h?r&&u?e+'<input class="form-check-input" type="'+f+'" value="'+q+'" name="'+k+'"id="'+q+'"checked required >':e+'<input class="form-check-input" type="'+f+'" value="'+q+'" name="'+k+'"id="'+q+'"checked>':r&&u?e+'<input class="form-check-input" type="'+
      f+'" value="'+q+'" name="'+k+'"id="'+q+'" required >':e+'<input class="form-check-input" type="'+f+'" value="'+q+'" name="'+k+'"id="'+q+'"  >';a=e=e+'<label for="'+q+'">'+l+"</label></div>"}});return a},createSurveyQR:function(c,a){var b,d;c.qrdo.forEach(function(c,e){var f=c.qr_opty;if("submit"==f){b=1;d="survey-success";var g="submit"}else b=0,d="survey-failure",g="button";var h="submit"==g?"nextNodeInTheme":"previousNodeInTheme";f=A.getQuickReplyOptionLabels(f);a+='<div class="cui__survey__qr__button__container">';
      a=a+'<input type = "'+g+'" id = "'+d+'" class="form-button form-control cui__form__qr__button btn btn-outline-primary" value="'+f+'" data-success="'+b+'" data-next-node="'+h+'">';a+="</div>"});return a},getDataProbeID:function(c){try{return c.rs_obj.pr_obj.p_mo.p_seg}catch(a){d.handleError("err_71")}}}}(),S=function(){return{handleError:function(g){u.sendErrorCode(c.currentNodeID,g,void 0==c.chrIDObject?void 0:c.chrIDObject.chrID);console.log(g);if(k.debugMode){var a=d.findErrorOrAlertorWarningString(g);
      alert(g+" : "+a+" "+c.currentNodeID);debugger}d.gracefulErrorExit()},getRandomDigit:function(c){var a=11;if(c>a)return S.getRandomDigit(a)+S.getRandomDigit(c-a);a=Math.pow(10,c+1);c=a/10;return(""+(Math.floor(Math.random()*(a-c+1))+c)).substring(1)},getRandomMax:function(c){return Math.floor(Math.random()*Math.floor(c))},getRandomMinMax:function(c,a){return Math.floor(Math.random()*(a-c+1))+c}}}(),O=function(){return{getDownloadFile:function(d){console.log("document being downloaded "+d);var a=k.downloadClientDocAPI+
      "?finm="+d+"&trid="+c.campaignID;d=d.split("/");var b=d[d.length-1];$.ajax({method:"GET",xhrFields:{responseType:"blob"},url:a,success:function(a,c,d){c=document.createElement("a");window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(a,b):(a=(window.URL||webkitURL).createObjectURL(a),c.href=a,c.download=b,document.body.append(c),c.click(),c.remove(),window.URL.revokeObjectURL(a))},error:function(a,b,c,d){console.log(JSON.stringify(a));console.log("AJAX error: "+c+
        " : "+d)}})},getSearchContent:function(g,a,b){function e(c){$.ajax({method:"POST",contentTpe:"application/json",dataType:"json",data:c,url:k.getSearchResultsAPI,success:function(c,e,f){console.log(f.statusText,f.status);"searchContent"==f.statusText?(g.ms_obj.conobj.cdo=c.cdo,d.displayNode(g,a,b,!1)):console.log(f.statusText)},error:function(a,b,c,d){console.log(JSON.stringify(a));console.log("AJAX error: "+c+" : "+d)}})}try{var f=c.chrIDObject.chrIndex,h=x[f].c_r_m.useCase,m=x[f].c_r_m.searchType,
      r=c.segmentSelectionArrayOfArrays;f={};f.trid=c.campaignID;f.uscs=h;f.query=r;f.searchtype=m;f.nid=g._nid;e(f)}catch(l){d.handleError("err_121A")}},getDynamicResponse:function(c,a){function b(a,b){$.ajax({method:"GET",dataType:"json",url:k.getDynamicDataAPI+"?unid="+a+"&trid="+b,success:function(a,b,c){"dynamicDataMotif"==c.statusText?(U=a=a.cso_dyn,E.cso_dyn=a):console.log(c.statusText)},error:function(a,b,c,d){console.log(JSON.stringify(a));console.log("AJAX error: "+c+" : "+d)}})}try{b(c,a)}catch(e){d.handleError("err_121A")}},
    storePaymentInformation:function(d){d.type="store_payment_information";d.trid=c.campaignID;d.uid=c._i;d.paymentType=c.paymentType;for(var a in d)"false"==d[a]?d[a]=!1:"true"==d[a]?d[a]=!0:"null"==d[a]&&(d[a]=null);O.makeAjaxCall("storePaymentInformation",d,k.paymentProcessingAPI,"POST","application/json")},processCreditCard:function(d,a,b,e,f){d.type="process_credit_card";d.trid=c.campaignID;d.uid=c._i;O.makeAjaxCall("processCreditCard",d,k.paymentProcessingAPI,"POST","application/json",a,b,e,f)},
    postVisitorData:function(d){$.ajax({method:"POST",contentType:"application/x-www-form-urlencoded",data:d,url:k.storeSurveyResponseAPI+"?unid="+c.userID+"&trid="+c.campaignID+"&uscs="+x[c.chrIDObject.chrIndex].c_r_m.useCase,success:function(a,b,c){console.log(a,b);try{JSON.parse(a)}catch(f){JSON.stringify(a)}console.log(a,b)},error:function(a,b,c,d){console.log(JSON.stringify(a));console.log("AJAX error: "+c+" : "+d)}})},handleCreditCardProcessingAJAXResponse:function(c,a,b,e,f){c=c.statusText.split(":");
      "success"==c[0]?d.showErrorPopUp(k.paymentThankYouMessage,"openNewWindow"):"error"==c[0]&&d.showErrorPopUp(k.errorMsg)},makeAjaxCall:function(c,a,b,d,f,h,k,r,l){a=JSON.stringify(a);$.ajax({method:d,contentType:f,data:a,url:b,success:function(a,b,d){"processCreditCard"==c&&O.handleCreditCardProcessingAJAXResponse(d)},error:function(a,b,c,d){console.log(JSON.stringify(a));console.log("AJAX error: "+c+" : "+d)}})}}}(),Y={debugMode:!1,orderOfFirstNodeInTheme:0,storeSurveyResponseAPI:"https://drw.chalakh.co/api/pos_dat",
    downloadClientDocAPI:"https://drw.chalakh.co/api/dow_doc",getDynamicDataAPI:"https://drw.chalakh.co/api/get_dyn",paymentProcessingAPI:"https://drw.chalakh.co/api/payment",getSearchResultsAPI:"https://drw.chalakh.co/api/get_search",creditCardProcessingErrorMsg:"Sorry, error in credit card processing",paymentThankYouMessage:"Your Donation Has Been Processed. Thank You So Much for Helping Out. We will now send you to our college website",botContainerClass:["cui__bot__container","col-12"],headerClass:["cui__header"],
    exitMessageModalClass:["cui__exit__modal"],errorMessageModalClass:["cui__error__modal"],conversionModalClass:["cui__conversion__modal"],leadConnectModalClass:["cui__lead__connect__modal"],videoModalClass:["cui__video__modal"],audioModalClass:["cui__audio__modal"],imageModalClass:["cui__image__modal"],bulletModalClass:["cui__bullet__modal"],cpatchAudioContainerClass:["cui__cpatch__audio__container"],checkVideoFileReadyStatusInterval:null,checkAudioFileReadyStatusInterval:null,checkPatchAudioFileReadyStatusInterval:null,
    abortMediaPlay:null,conversationStreamClass:["cui__conversation__stream"],footerClass:[""],scrollNode:"html,body",carouselIntervalPeriod:5E3,maxCarouselCycleCount:3,shortCarouselIntervalPeriod:3500,scrollPeriod:1E3,scrolInc:15,iframeAnchorIDTop:.05,maxCharsResponse:120,maxImgsInThumbnailGroup:18,maxTilesInT1Group:14,maxTilesInT2Group:2,maxTilesInT3Group:16,maxTilesInT4Group:8,maxTilesInT5Group:1,maxTilesInT6Group:2,maxTilesInT7Group:1,maxTilesInT9Group:9,maxBulletsInGroup:10,imgThumbnailGroupClassName:"imgGroup",
    invalidInputMessage:"Please select at least one of the options show (click or touch the option)",oopsContentNotFoundMsg:"Ooops! I could not find any content for your selection. Please go back and make another selection",oopsCouldNotDownloadAVFile:"Ooops! I am having network trouble. Sorry cannot get hold of the audio-video file ",messageStreamClass:["cui__message__stream"],responseStreamClass:["cui__response__stream"],messageBubbleClass:"cui__message__bubble",messageTextClass:["cui__text__message"],
    responseBubbleClass:"cui__response__bubble",responseQRButtonClass:["cui__qr__button__response"],responseFormClass:["cui__form__response"],responseSurveyClass:["cui__survey__response"],responsePaymentClass:["cui__payment__response"],responseTileClass:["cui__tile__response"],responseInputClass:["cui__input__response"],responseAnimationDistance:150,delayBetweenMessagesAndResponse:1E3,delayBetweenNodes:2E3,delayBetweenMessages:500,delayBeforeFirstMessage:1E3,delayBeforeConversationStart:120,patchMsgRespSyncIntervalCheck:100,
    delayBetweenExitMotifNodesAndMainMotifNodes:200,delayBeforeDownloadGifIsShown:2500,delayBeforeOpeningClientWindow:5E3,audioVideoDownloadAttemptCount:40,chalakIconDisplayDelay:0,chalakIconToolTipDisplayDelay:null,chalakIconToolTipHideDelay:null,chalakIconHybridProactiveDelay:null,beepSoundFile:"./Conversational Chat Interface/audio/icon-bell.mp3",alertUser:!0,botID:"_cbotid",uidKey:"_cuid",uidValueString:"uid",sessID:"_cssid",cumSessCnt:"_cumsct",proSessConvAttempts:"_prsecoat",proCumConvAttempts:"_prcucoat",
    cxSuccHistory:"_cpprid",goalStatus:"_cagost",cxSessAttemts:"_cpseat",cxCumAttemts:"_cpcuat",userInControl:"_celstat",visitorContext:"_cvico",convThemeHistory:"_cothi",convStarted:"_costa",convOpenURL:"_courl",sessPVcnt:"_csepvc",cumPVcnt:"_ccupvc",sessDuration:"_csedur",cumDuration:"_ccudur",nodeImpSessCnt:"_nisecnt",nodeImpCumCnt:"_nicucnt",themeImpSessCnt:"_tisecnt",themeImpCumCnt:"_ticucnt",botURL:"_cbotURL",visitorName:"_cpnam",longExpirationPeriod:63113904,mediumExpirationPeriod:5184E3,cookieDeletionPeriod:-1E3,
    cookiePath:"/",botURLs:"_cbotURLs",successfulExitTheme:"SUET",oneLastConversionTry:"OLCT",unsuccessfulExitTheme:"USET",switchBotToPassiveMode:"SWPA",minEngagementThreshold:8,delayBeforeBotTerminating:1500,nonintrusiveRestartTheme:"Non Intrusive Restart",intrusiveRestartTheme:"Non Intrusive Restart",visitorRestartPreferenceTheme:"Non Intrusive Restart",reengageVisitorTheme:"Non Intrusive Restart",recapTopicToDiscussTheme:"Non Intrusive Restart",visitorDeepDiveTheme:"Non Intrusive Restart",skipTheme:"SKCT",
    pastThemeSummaryBlurb:"PTSB",pastThemeGenericBlurb:"PTGB",themesShownInThePast:"themesShownInThePast",returningVisitorName:"returningVisitorName",typingInnerHTML:'<div class="cui__message__stream__typing"> <span>.</span> <span>.</span> <span>.</span> <span>.</span>  <span>.</span>  <span>.</span>  </div>',maxFormFields:4,telStringPattern:"[0-9]{10}|[0-9]{11}|[0-9]{3}-[0-9]{3}-[0-9]{4}|[0-9]{1}-[0-9]{3}-[0-9]{3}-[0-9]{4}",telPlaceHolder:"1-203-969-8997",firstDripFirstAsk:"We will email contact & profile of your short listed companies. Simply share your contacts. Save time and hassle!! ",
    firstDripSecondAsk:"I know I asked you once before for your contacts. I promise we won't spam with unnecessary emails. Just an email with profiles of companies you selected ",secondDripFirstAsk:"I can also have executives from companies you selected contact you. No more than 3 companies! It will help jump start your discussions.",awsshortListIcon:"https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/shortlist.png",awsrevenueIcon:"https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/revenues.png",
    awsyearFoundedIcon:"https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/yearfounded.png",awsemployeesIcon:"https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/employees.png",awsselectedIcon:"https://s3.us-east-2.amazonaws.com/chalakh-bot-js/images/selected.png",shortListIcon:"./images/shortlist.png",revenueIcon:"./images/revenues.png",yearFoundedIcon:"./images/yearfounded.png",employeesIcon:"./images/employees.png",selectedIcon:"./images/selected.png",conversionModalMaxAttempts:2,leadConnectModalMaxAttempts:1,
    conversionModalData:{prdo:[[{da_ddf:{value:"",valueType:"",name:"personName",fieldType:"personName",label:"Your Name",required:!0}},{da_meob:{da_disob:!0,da_obseg:[]}}],[{da_ddf:{value:"",valueType:"",name:"company",fieldType:"company",label:"Company",required:!0}},{da_meob:{da_disob:!0,da_obseg:[]}}],[{da_ddf:{value:"",valueType:"",name:"email",fieldType:"email",label:"Email Address",required:!0}},{da_meob:{da_disob:!0,da_obseg:[]}}],[{da_ddf:{value:"",valueType:"",name:"phone",fieldType:"phone",
          label:"Your Phone",required:!0}},{da_meob:{da_disob:!0,da_obseg:[]}}]],qrdo:[{qr_opty:"submit"}]},leadConnectModalData:{prdsc:"singleChoice",prdo:[[{da_ddf:{value:"yes",valueType:"",name:"vendorscancontact",fieldType:"vendorscancontact",label:"I would like companies I selected to contact me",required:!0}},{da_meob:{da_disob:!0,da_obseg:[]}}],[{da_ddf:{value:"",valueType:"",name:"visitormessagetovendor",fieldType:"textBox",label:"(If you would like) we can also send a message on your behalf to the companies you selected. Add your message in this text box",
          required:!1}},{da_meob:{da_disob:!0,da_obseg:[{da_ob_seg:"fnam",da_ob_sseg:null}]}}]],qrdo:[{qr_opty:"submit",parlab:!1}]}};D.Chalakh=D.Chalakh||{};var ba={eligible:null,timeouts:[],campaignID:null,userID:null,ChalakhIconCreated:null,videoMediaObject:null,audioMediaObject:null,cpatchAudioMediaObject:null,muteAudio:!0,loadCpatchMediaCounter:0,mediaPlayTimeOut:0,downloadGifDisplayTimeOut:0,toolTipDisplayTimeout:0,toolTipHideTimeout:0,loadMediaCounter:0,updateCurrentTimeTimeOut:null,currentThemeNodes:[],
  displayedThemeNodes:[],currentNode:null,currentTheme:null,currentMotif:null,previousNode:null,nextNode:null,afterNextNode:null,afterNextNextNode:null,currentNodeID:null,currentURL:null,currentNodesCopy:{},restartScenario:null,campaignGoalAchieved:null,conversionModalAttempts:0,leadConnectModalAttempts:0,conversionModalSuccess:!1,listingSelection:[],nodeImpCumCnt:null,nodeImpSessCnt:null,themeImpCumCnt:null,themeImpSessCnt:null,cxRejectsCum:null,cxRejectsSess:null,checkCxTrigger:!0,imgGroups:[],imgGroupCount:0,
  imgThumbnailNodeList:[],imgGroupCountPerCategory:[],botState:null,thankYouPage:"https://www.tesu.edu/alumni",paypalSDKLoaded:!1,conversationStartRecorded:!1,interestNodes:[],mainMotifThemeBeingShown:null,segmentSelectionArrayOfArrays:[],segmentNodeWasFound:!1,visitorSelection:[],visitorQuestion:"",chrIDObject:{},quickReplyOptionLabelsObj:[],messageTimeout:0,displayMsgTimeOutCount:0};void 0!=D.Chalakh.runtime?(D.Chalakh.runtime=$.extend(ba,D.Chalakh.runtime),console.log("merging chat.js runtime params with analytics.js defined runtime ones ")):
  (D.Chalakh.runtime=ba,console.log("analytics did not create runtime params; chat.js initializing w.Chalakh.runtime "));void 0!=D.Chalakh["static"]?(D.Chalakh["static"]=$.extend(Y,D.Chalakh["static"]),console.log("merging chat.js static params with analytics.js defined runtime ones ")):(D.Chalakh["static"]=Y,console.log("analytics did not create static params; chat.js initializing w.Chalakh.static "));D.Chalakh.co=u;D.Chalakh.pl=B;D.Chalakh.bb=A;D.Chalakh.ev=J;D.Chalakh.ut=S;D.Chalakh.cc=window.Chalakh.chat;
  D.Chalakh.st=Y;var c=Chalakh.runtime,E=Chalakh.c_so,x=E.cso_met,N=E.cso_sta,V=E.cso_res,I=E.cso_con,R=E.cso_mai,Q=E.cso_int,W=E.cso_pat,T=E.cso_tar,U=E.cso_dyn,ca=E.cso_ecde;D.Chalakh.chat=new fa(E);"undefined"==typeof D.Chalakh.casq&&(D.Chalakh.casq=[]);var d=Chalakh.chat,k=d.config;d.registerBubbleType("text",ha);d.registerBubbleType("QRNodeSelector",ia);d.registerBubbleType("QRImgSelector",ja);d.registerBubbleType("form",ka);d.registerBubbleType("survey",la);d.registerBubbleType("tile",ma);d.registerBubbleType("bullet",
    oa);d.registerBubbleType("doc",sa);d.registerBubbleType("card",na);d.registerBubbleType("audioVideo",pa);d.registerBubbleType("payment",qa);d.registerBubbleType("image",ra);var ta=setInterval(function(){if(void 0!=D.Chalakh.runtime.casLaunched)if(clearInterval(ta),C.processURLParams(),c.chrIDToActivate)D.Chalakh.runtime.eligible=!0,C.initiateConversation(c.chrIDToActivate);else{var d=C.checkVisitorEligibility();D.Chalakh.runtime.eligible=d;1==d?C.initiateConversation():console.log("visitor not eligible...  "+
    d)}},150)}(window);